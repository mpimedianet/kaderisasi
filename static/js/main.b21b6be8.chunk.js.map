{"version":3,"sources":["models/AuthorityType.ts","redux/appReducer.js","redux/types.js","models/BaseEntity.ts","utils/StringUtil.ts","models/settings/Menu.ts","constant/Menus.ts","redux/userReducer.js","models/AttachmentInfo.ts","services/Promises.ts","services/UserService.ts","services/CategoriesService.ts","services/LessonService.ts","services/MasterDataService.ts","models/Quiz.ts","utils/EventUtil.ts","utils/websockets.js","services/PublicQuizService.ts","services/QuizService.ts","services/GalleryService.ts","redux/servicesReducer.ts","redux/reducers.js","middlewares/UserMiddleware.ts","middlewares/RealtimeChatMiddleware.js","redux/configureStore.js","middlewares/Common.ts","constant/Url.js","models/User.ts","redux/actionCreators.ts","constant/stores.js","component/loader/Loader.js","component/alert/Alert.js","utils/ComponentUtil.ts","models/FieldType.ts","models/ApplicationProfile.ts","component/BaseComponent.tsx","component/navigation/Header.tsx","component/loader/Spinner.tsx","component/navigation/AnchorWithIcon.tsx","component/pages/login/Login.tsx","component/layout/BaseMainMenus.tsx","component/pages/dashboard/main/DashboardMain.tsx","component/navigation/AnchorButton.tsx","component/container/Modal.tsx","models/Filter.ts","models/settings/EntityProperty.ts","utils/EntityValues.tsx","component/navigation/NavigationButtons.tsx","component/pages/masterdata/form/fields/BaseField.tsx","component/pages/masterdata/form/fields/FormInputImage.tsx","component/pages/masterdata/form/fields/FormInputImageMultiple.tsx","component/pages/masterdata/form/fields/FormInputDropDown.tsx","component/pages/masterdata/form/fields/FormInputTextEditor.tsx","component/pages/masterdata/form/fields/FormInputCheckBox.tsx","utils/DateUtil.ts","component/pages/masterdata/form/fields/FormInputCoomon.tsx","component/pages/masterdata/form/fields/FormInputDropDownDynamic.tsx","component/form/FormGroup.tsx","component/pages/masterdata/form/fields/FormInputDocument.tsx","component/pages/masterdata/form/FormInputField.tsx","component/pages/masterdata/form/MasterDataForm.tsx","component/pages/masterdata/ExternalEditForm.tsx","component/pages/masterdata/EditDeleteAction.tsx","component/pages/masterdata/DataTableHeader.tsx","component/alert/SimpleError.tsx","component/navigation/ToggleButton.tsx","component/pages/masterdata/MasterDataList.tsx","component/pages/masterdata/MasterDataManagement.tsx","component/pages/masterdata/MasterDataMain.tsx","component/pages/home/HomeMain.tsx","component/pages/settings/SettingsMain.tsx","component/container/Card.tsx","component/pages/settings/settingHelper.tsx","component/pages/settings/UserProfile.tsx","component/pages/settings/EditApplicationProfile.tsx","component/pages/home/AboutUs.tsx","models/Lesson.ts","component/container/Carousel.tsx","component/pages/lesson/LessonDetail.tsx","component/pages/lesson/LessonContent.tsx","component/pages/lesson/LessonMain.tsx","component/container/ScrollDiv.tsx","component/pages/quizshared/QuizList.tsx","utils/CollectionUtil.tsx","component/pages/quizmanagement/QuizManagementMain.tsx","models/QuizQuestion.ts","component/pages/quizmanagement/QuizFormCompontnes.tsx","component/pages/quizmanagement/QuizManagementForm.tsx","component/pages/quizmanagement/QuizDetail.tsx","component/pages/quizpublic/PublicQuizMain.tsx","component/pages/quizpublic/challenge/QuizTimerProgress.tsx","component/pages/quizpublic/challenge/QuizBody.tsx","component/pages/quizpublic/challenge/QuizTimer.tsx","component/pages/quizpublic/challenge/quizChallengeHalper.tsx","component/pages/quizpublic/challenge/PublicQuizChallenge.tsx","component/pages/gallery/GalleryMain.tsx","models/Images.ts","component/pages/gallery/picture/GalleryPictureDetail.tsx","component/pages/gallery/picture/GalleryPicture.tsx","models/QuizHistory.ts","component/alert/SimpleWarning.tsx","component/pages/dashboard/QuizHistoryPage.tsx","models/Videos.ts","component/pages/gallery/video/GalleryVideo.tsx","models/Documents.ts","component/pages/gallery/document/DocumentItem.tsx","component/pages/gallery/document/GalleryDocument.tsx","component/pages/login/Register.tsx","component/pages/quizmanagement/QuizUpload.tsx","component/pages/quizpublic/QuizHistoryDetail.tsx","component/layout/ApplicationContent.tsx","component/navigation/SideBar.tsx","component/layout/MainLayout.tsx","App.tsx","Root.tsx","serviceWorker.js","index.js"],"names":["AuthorityType","initState","mainApp","undefined","reducer","state","action","type","payload","BaseEntity","id","createdDate","modifiedDate","nulledFields","index","uniqueId","string","String","Date","getUTCMilliseconds","toString","beautifyNominal","val","isDecimal","includes","isNegative","startsWith","replace","rawVal","parseInt","split","nominal","Math","abs","result","length","zeroIndex","i","Menu","code","name","description","url","pathVariables","iconUrl","color","fontColor","role","active","menuClass","authenticated","showSidebar","subMenus","userAuthorized","user","element","defaultMenuIconClassName","getIconClassName","menu","getMenus","menuSet","_menus","Object","assign","subMenu","push","ROLE_ADMIN","ROLE_USER","loginKey","loginStatus","loginFailed","menus","menuData","loggedUser","loginAttempt","requestId","applicationProfile","assetsPath","console","debug","masterHealthCenter","referer","refresh","setLoginKeyCookie","data","AttachmentInfo","blob","Blob","arg0","this","info","axios","require","commonAjaxPostCalls","endpoint","request","Promise","resolve","reject","post","headers","commonAuthorizedHeader","then","axiosResponse","updateAccessToken","response","rawAxiosResponse","catch","e","error","commonAjaxPublicPostCalls","commonHeader","UserService","updateProfile","contextPath","concat","saveUser","requestApplicationId","callbackSuccess","callbackError","alert","requestApplicationIdNoAuth","instance","CategoriesService","categories","Map","getCategories","getLoadedCategories","get","setLoadedCategories","set","LessonService","getLessons","categoryCode","MasterDataService","managementProperties","entityPropertyMap","updateApplicationProfile","profile","req","entity","filter","limit","page","exacts","fieldsFilter","model","editMode","responseType","fileName","rawSplit","extension","window","URL","createObjectURL","attachmentInfo","commonAjaxPostCallsWithBlob","Quiz","title","available","showAllQuestion","questionsTimered","duration","repeatable","protectedByCode","questions","image","startedDate","submittedDate","mappedAnswer","maxQuestionNumber","getQuestionCount","resetCorrectChoices","correctChoice","answerCode","allQuestionHasBeenAnswered","accessCode","afterCompletionMessage","clone","quiz","updateMappedAnswer","answerEssay","entered","number","doItLater","callback","intervalMs","timeout","setTimeout","clearTimeout","stompClient","wsConnected","websocketUrl","onConnectCallbacks","Array","subscriptionCallbacks","sendToWebsocket","requestObject","send","JSON","stringify","PublicQuizService","getQuiz","submitAnswers","submited","choices","getQuizList","orderBy","orderType","getHistories","sendUpdateStart","_quiz","quizHistory","token","getLoginKey","sendUpdateAnswer","updated","q","QuizService","submit","deleteQuiz","uploadQuiz","attachment","GalleryService","getPictures","getVideos","getDocuments","services","userService","getInstance","categoriesService","lessonService","masterDataService","publicQuizService","quizService","galleryService","rootReducer","combineReducers","appState","appReducer","userState","userReducer","servicesState","servicesReducers","initialState","performLoginMiddleware","store","next","meta","app","responseJson","loginSuccess","log","newAction","common","dispatch","finally","endLoading","getLoggedUserMiddleware","param","performLogoutMiddleware","logoutSuccess","setLoggedUserMiddleware","getMessagesMiddleware","fetch","method","body","json","err","storeChatMessageLocallyMiddleware","getStore","configureStore","createStore","applyMiddleware","userMiddleware","realtimeChatMiddleware","getRequestId","LOGIN_KEY","getAssetsPath","getState","getCookie","accessToken","setCookie","cookieValue","cname","cvalue","exdays","d","setTime","getTime","expires","toUTCString","document","cookie","ca","decodeURIComponent","c","charAt","substring","indexOf","devMode","getElementById","value","rootValue","baseImageUrl","baseDocumentUrl","User","username","displayName","editPassword","profileImage","usedHost","apiAccount","performLogout","startLoading","mapCommonUserStateToProps","LoaderContent","props","realtime","className","style","margin","position","zIndex","marginBottom","aria-hidden","padding","marginTop","height","width","progress","transitionDuration","disabled","Loader","timer","intervalId","update","clearInterval","setState","endMessage","withTimer","setInterval","Component","Backdrop","backgroundColor","Footer","ref","yesButtonRef","onClick","onYes","yesOnly","noButtonRef","onNo","Header","fontClassName","onClose","Alert","React","createRef","isError","current","focus","headerClassName","display","tabIndex","aria-labelledby","children","byId","getAttachmentInfo","fileInput","files","file","reader","FileReader","readAsDataURL","onload","setUrl","onerror","Error","toBase64v2","FieldType","ApplicationProfile","appCode","shortDescription","about","welcomingMessage","address","contact","website","pageIcon","backgroundUrl","footerIconClass","BaseComponent","parentApp","validateLoginStatus","isLoggedUserNull","backToLogin","sendWebSocket","setWsUpdateHandler","handler","resetWsUpdateHandler","handleInputChange","event","target","checked","isAdmin","getLoggedUser","showCommonErrorAlert","message","showError","getServices","activeId","withProgress","successCallback","errorCallback","params","doAjax","showAlert","showAlertError","history","IState","showNavLinks","buttonToggleNavRef","toggleNavLinks","onLogout","showConfirmation","ok","setMenu","click","label","getApplicationProfile","href","data-toggle","data-target","aria-controls","aria-expanded","aria-label","map","isActive","activeMenuCode","key","to","setMenuNull","NavBarTop","paddingLeft","fontSize","UserIcon","marginRight","src","withRouter","connect","Spinner","innerDivs","visibility","show","AnchorWithIcon","btnClassName","attributes","iconClassName","tyle","loading","Login","updateCredentialProperty","getAttribute","preventDefault","performLogin","isUserLoggedIn","onSubmit","login","onChange","PasswordField","placeholder","required","UsernameField","autoFocus","password","BaseMainMenus","DashboardMain","toLowerCase","AnchorButton","Modal","hideModal","showModal","toggleable","footerContent","showFooter","Filter","contains","day","year","month","module","monthTo","yearTo","maxValue","availabilityCheck","useExistingFilterPage","EntityProperty","groupNames","entityName","alias","fieldNames","idField","detailFieldName","formInputColumn","editable","creatable","elements","fieldNameList","withProgressWhenUpdated","record","prop","identity","getEntityElement","getHeaderLabels","header","labelName","isDate","filterable","hasTextEditorField","fieldType","FIELD_TYPE_TEXTEDITOR","EntityValues","object","elemnents","elementid","FIELD_TYPE_DATE","toDateString","FIELD_TYPE_DATETIME","toLocaleString","FIELD_TYPE_IMAGE","imgLink","FIELD_TYPE_COLOR","FIELD_TYPE_NUMBER","dangerouslySetInnerHTML","__html","FIELD_TYPE_CHECKBOX","FIELD_TYPE_DOCUMENT","FIELD_TYPE_FIXED_LIST","FIELD_TYPE_DYNAMIC_LIST","optionItemName","NavigationButtons","buttonIndexes","generateButtonValues","totalData","activePage","lastIndex","nextPage","previusPage","currentPage","displayed_buttons","buttonCount","ceil","min","max","BaseField","prepopulateForm","entityElement","getRequiredAttr","FormInputImage","singlePreviewData","showInputFile","changeSingleImageData","removeImage","showConfirmationDanger","doRemoveImage","recordToEdit","defaultValue","fullUrl","Fragment","accept","imageData","ImagePreview","FormInputImageMultiple","previewData","inputElements","setImageData","addInputElement","removeInputElement","removedIndex","doRemoveInputElement","splice","delete","trim","imageNames","imageName","isNull","isBase64","isBase64Image","FormInputDropDown","inputList","inputListLoaded","entities","loadInputList","entityReferenceClass","commonAjax","loadAllEntities","isNotReady","validateInputType","fieldName","recordValue","defaultInputValue","optionValueName","options","option","optionItemValue","fieldValue","FormInputTextEditor","contentRef","formatDoc","sCmd","sValue","oDoc","validateMode","executed","execCommand","contentEditable","setValue","innerHTML","setDocMode","bToSource","oContent","createTextNode","oPre","createElement","appendChild","all","innerText","createRange","selectNodeContents","firstChild","printDoc","setEditMode","mode","paleteCommand","anchor","commmand","dataset","clean","contentOnChange","onMouseDown","data-command","data-value","sLnk","prompt","onInput","FontSizeOption","t","selected","BackgroundColorOption","FontColorOption","FormattingList","FontList","FormInputCheckbox","twoDigits","timerString","inputSeconds","seconds","hour","minutes","totalSeconds","floor","FormInputCommon","date","dateObj","getFullYear","getMonth","getDate","join","valueAsObj","requiredAttr","input","FIELD_TYPE_PLAIN_LIST","plainListValues","FIELD_TYPE_TEXTAREA","searchValue","FormInputDropDownDynamic","inputRef","searchKey","loadEntities","search","keyCode","div","onKeyDown","FormGroup","orientation","FormInputDocument","changeFile","remove","doRemove","FilePreview","FormInputField","multiple","formLabel","MasterDataForm","formRef","form","formData","FormData","promises","withRealtimeProgress","forEach","valueAttr","objectPayload","generateRequestPayload","ajaxSubmit","rawObject","realtimeProgress","getEntityProperty","commonAjaxWithProgress","save","recordSaved","showInfo","entityProperty","editModeStr","SubmitReset","InputFields","groupedElements","counter","hasTextEditor","ei","ExternalEditForm","link","EditDeleteAction","doDelete","recordId","getRecordId","recordDeleted","getRecordById","getById","recordLoaded","showEditForm","reload","additionalButton","DataTableHeader","headerProps","headerProp","headerName","filterClass","minWidth","autoComplete","filterOnChange","data-ordertype","orderButtonOnClick","data-orderby","SimpleError","ToggleButton","yesLabel","noLabel","MasterDataList","adjustFilter","entitiesLoaded","recordData","checkDefaultData","getRecordNumber","filterFormSubmit","setExactSearch","filterReset","showForm","showCreateForm","updateFilterPage","updateFilterLimit","printRecord","exactsSearch","resultList","onReset","overflow","values","parseValues","Loading","paddingTop","marginLeft","SubmitResetButton","MasterDataManagement","loadingEntityProperty","entityPropertyLoaded","setEntityProperty","setTitle","entityProp","property","generateReport","reportCreated","download","loadEntityProperty","raltime","existingEntityProperty","MasterDataMain","managementPropertiesLoaded","generalList","setSidebarMenus","sidebarMenus","loadManagamenetPages","loadManagementProperties","getCode","match","properties","HomeMain","imageUrl","backgroundImage","backgroundSize","SettingsMain","Card","EditField","edit","toggleInput","updateProperty","PropertyInput","PropertyLabel","EditImage","editFields","fieldChanged","UserProfile","updateProfileProperty","updateProfleImage","setProfileImage","actualLoggedUser","propertyName","enabled","saveRecord","doSaveRecord","getUserEditedData","profileSaved","editedUser","setLoggedUser","EditFields","EditApplicationProfile","updateImageField","setAppProfileField","appProfile","actualAppProfile","getApplicationEditedData","editedApplication","setApplicationProfile","bgUrl","AboutUs","Lesson","content","bannerImages","category","getImageUrs","lesson","urls","splitted","Carousel","imageLength","getCurrentImage","imageUrls","prev","currentActive","overflowX","LessonDetail","back","lessons","selectedLesson","filterValue","LessonContent","dataLoaded","loadLessons","loadLessonsInPage","updateFilter","updateLimit","setSelectedLesson","setSelectedLessonUndefined","setFilterValue","clearFilter","LessonItem","LessonMain","lessonCategoriesLoaded","lessonCategories","ScrollDiv","render","State","QuizList","resetFilter","quizOnClick","skipAccessCode","validateAccessCode","accessCodeValidated","onFilter","tableHeader","colSpan","quizList","startingNumber","QuizManagementMain","loadRecords","loadRecordsAtPage","loadRecordsWithFilter","editQuiz","pathname","QuizQuestion","statement","essay","public_choices","publicQuizQuestion","question","ChoiceForm","choice","setAnswer","questionIndex","updateField","data-questionindex","data-index","QuestionForm","showChoices","updateChoiceField","choiceIndex","removeChoiceImage","QuizInformationForm","updateQuizBooleanField","saved","QuizManagementForm","validateQuizFromProps","location","reset","updateQuizField","addQuestion","doAddQUestion","addQuestionEssay","updateQuestionField","imageString","removeQuestion","removeQuestionImage","removeAllQuestion","submitQuiz","doSubmitQuiz","dataSaved","hideChoices","QuizDetail","loadQuiz","getId","editRecord","deleteRecord","doDeleteQuiz","dataDeleted","questionTimered","Question","rightAnswer","PublicQuizMain","takeQuiz","startNumber","QuizTimer","tick","progressRef","timerStringRef","stop","updateTick","resetTimeout","updateTickWithCallback","onTimeout","updateTimerLoop","stopTimer","resetTick","QuizBody","questionTimerRef","updateQuestionIndex","setQuestionIndex","getCurrentQuestion","toggleQuestionView","showAll","nextQuestion","nextIndex","resetTimer","setChoice","updateTimer","questionCount","QuestionNavigation","QuestionBody","answered","ChoiceItem","choiceClass","latestUpdate","Timer","right","RertyPage","retrySubmit","StatusTImeout","QuizLanding","start","QuizResultInfo","quizResult","displayScore","score","toFixed","correctAnswer","wrongAnswer","running","errorSubmit","PublicQuizChallenge","quizTemp","timerRef","quizBodyRef","setWsUpdateHandlerOnQuestionChange","updateStartedDate","beginTimer","sendStartUpdate","setFailedTimeout","doSubmitAnswer","synchronizedQuiz","synchronizeLatestHistory","remainingDuration","started","questionNumber","elapsedSecond","remainingSecond","goBack","answer","sendUpdateQuizHistory","quizSubmitted","submittedQuiz","resetQuiz","submitAnwser","quizNotSubmitted","GalleryMain","Images","images","rawImages","GalleryPictureDetail","getFullUrls","imageList","selectedImage","GalleryPicture","loadPictures","loadPicturesAtPage","onImageClick","removeSelectedImage","ImageList","ImageItem","firstImage","getFirstImage","bottom","QuizHistoryModel","ended","quizDuration","userDuration","quizRepeatable","created","BaseModel","SimpleWarning","histories","QuizHistoryPage","Histories","h","Videos","videoSnippet","videoList","GalleryVideo","video","VideoList","VideoItem","snippet","thumbnails","medium","Documents","getExtension","showLink","DocumentItem","showAccessCodeInput","validateDocumentAccessCode","doc","ExtraViewer","controls","documentList","GalleryDocument","documents","DocumentList","docs","editPasswordRepeat","Register","UserModel","userSaved","passwordMatch","fieldComplete","register","borderColor","CommonField","QuizUpload","upload","uploadSuccess","setAttachmentInfo","attchment","endsWith","QuizHistoryDetail","recordNotLoaded","loadHistoryDetail","getHistoryDetail","getHistoryId","QuestionDetail","Choices","listStyle","ApplicationContent","exact","path","LoginRoute","Gallery","Dashboard","Settings","MemberQuiz","QuizManagement","SideBar","isSidebarActive","parentMenu","pathName","addEventListener","handleScroll","removeEventListener","scrollTop","srcElement","brand","menuClassName","Brand","textAlign","paddingBottom","textDecoration","MainLayout","currentPathName","warn","setCurrentMenu","pathRaw","firstPath","extractMenuPath","getMenuByMenuPath","getSubMenus","menuState","loadingPercentage","mainAppUpdated","appIdStatus","errorAuthenticatingApp","App","loadings","alertTitle","alertBody","alertIsYesOnly","alertIsError","alertOnYesCallback","alertOnCancelCallback","wsUpdateHandler","clientRef","alertCallback","onOk","requestAppId","setRequestId","retryRequestAppId","smoothEndLoading","handleProgress","msg","percentageFloat","percentage","initWebsocket","callBackObjects","registerWebSocketCallbacks","subscribeUrl","handleWsUpdate","performWebsocketConnection","socket","SockJS","Stomp","over","frame","ws","_transport","callBackObject","subscribe","respObject","parse","setMainApp","incrementLoadings","decrementLoadings","yesCallback","noCallback","dismissAlert","querySelector","setAttribute","head","updateFavicon","text","loggedIn","actions","Root","Boolean","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b21b6be8.chunk.js","sourcesContent":["\nexport   enum AuthorityType{\n    \n    ROLE_ADMIN = \"ROLE_ADMIN\",\n    ROLE_USER = \"ROLE_USER\"\n}\n","import * as types from './types'\r\n\r\nexport const initState = { \r\n    mainApp: undefined\r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case types.SET_MAIN_APP:\r\n              \r\n            return { ...state, mainApp: action.payload }; \r\n       \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","/**\r\n * \r\n */\r\n \r\nexport const REMOVE_SHOP_ENTITY= \"remove_shop_entity\"; \r\nexport const FETCH_PRODUCT_CATEGORIES_ALL = \"all_product_categories\";\r\nexport const DO_LOGIN = \"do_login\";\r\nexport const DO_LOGOUT = \"do_logout\";    \r\nexport const SET_REQUEST_ID = \"SET_REQUEST_ID\"; \r\nexport const STORE_MESSAGE = \"store_message\";\r\nexport const GET_ENTITY_PROPERTY = \"get_entity_config\";\r\nexport const GET_MANAGEMENT_MENUS = \"GET_MANAGEMENT_MENUS\";\r\nexport const GET_MESSAGE = \"GET_MESSAGE\";\r\nexport const SET_MAIN_APP = \"SET_MAIN_APP\"; \r\nexport const GET_ENTITY_BY_ID = \"get_entity_by_id\";\r\nexport const UPDATE_ENTITY = \"update_entity\"; \r\nexport const REFRESH_LOGIN = \"refresh_login\";\r\nexport const GET_LOGGED_USER = \"get_logged_user\";\r\nexport const SET_LOGGED_USER = \"set_logged_user\";\r\nexport const SET_APPLICATION_PROFILE = \"SET_APPLICATION_PROFILE\";","\nexport default class BaseEntity{\n\tid?:number;\n\tcreatedDate?:Date;\n\tmodifiedDate?:Date;\n\tnulledFields?:string[] | undefined;\n\t \n\n}\n","let index = 1;\r\nexport const uniqueId = function () {\r\n\tlet string = new String(new Date().getUTCMilliseconds()).toString();\r\n\tindex++;\r\n\treturn index + \"-\" + string;\r\n}\r\n\r\nexport function beautifyNominal(val:any) {\r\n\tif (val == \"\" || val == null) return \"0\";\r\n\tconst isDecimal:boolean = new String(val).includes(\".\");\r\n\tconst isNegative:boolean = new String(val).startsWith(\"-\");\r\n\tif (isNegative) {\r\n\t\tval = new String(val).replace(\"-\",\"\");\r\n\t}\r\n\tconst rawVal = isDecimal? parseInt( new String(val).split(\".\")[0]) : parseInt(val);\r\n\tlet nominal = Math.abs(rawVal).toString();\r\n\tlet result = \"\";\r\n\tif (nominal.length > 3) { \r\n\t\tlet zeroIndex: number = 0;\r\n\t\tfor (let i = nominal.length - 1; i > 0; i--) {\r\n\t\t\tzeroIndex++; \r\n\t\t\tresult = nominal[i] + result;\r\n\t\t\tif (zeroIndex == 3 ) {\r\n\t\t\t\tresult = \".\" + result;\r\n\t\t\t\tzeroIndex = 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tresult = nominal[0] + result;\r\n\t} else {\r\n\t\tresult = val;\r\n\t}\r\n\tif (rawVal < 0) {\r\n\t\treturn rawVal;\r\n\t}\r\n\tif (isDecimal) {\r\n\t\tresult+= \",\"+ new String(val).split(\".\")[1];\r\n\t}\r\n\tif (isNegative) {\r\n\t\tresult = \"-\"+result;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport const getMaxSales = (list) => {\r\n\tlet result = 0;\r\n\tfor (let i = 0; i < list.length; i++) {\r\n\t\tconst element = list[i];\r\n\t\tif (element.sales > result)\r\n\t\t\tresult = element.sales;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport const isNonNullArray = function (array) {\r\n\treturn array != null && array.length > 0;\r\n}\r\n\r\nexport const isNonNullArrayWithIndex = function (array, i) {\r\n\treturn array != null && array.length > 0 && array[i] != null;\r\n}\r\n\r\nconst months = [\r\n\t\"January\", \"Ferbuary\", \"March\", \"April\", \"May\", \"June\",\r\n\t\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n]\r\n\r\nexport const monthYearString = function (m, y) {\r\n\tif (m == null || y == null) {\r\n\t\treturn \"-\";\r\n\t}\r\n\treturn months[m - 1] + \" \" + y;\r\n}\r\n\r\nexport const base64StringFileSize = (base64String:string) : number => {\r\n\tif (base64String.includes(\",\")) {\r\n\t\tbase64String = base64String.split(\",\")[1];\r\n\t}\r\n\tvar stringLength = base64String.length;\r\n\r\n\tvar sizeInBytes = 4 * Math.ceil((stringLength / 3))*0.5624896334383812;\r\n\tvar sizeInKb=sizeInBytes/1000;\r\n\treturn sizeInBytes;\r\n}\r\n\r\nexport const fileExtension = (fileName:string) :string => {\r\n\tif (fileName.includes(\".\") == false) {\r\n\t\treturn \"*\";\r\n\t}\r\n\r\n\tconst splitted = fileName.split(\".\");\r\n\treturn splitted[splitted.length - 1];\r\n}","import BaseEntity from '../BaseEntity'; \nimport { uniqueId } from '../../utils/StringUtil';\nimport { AuthorityType } from '../AuthorityType';\nimport User from './../User';\n\nexport default class Menu extends BaseEntity{\n\tstatic defaultMenuIconClassName:string = \"fas fa-folder\";\n\n\tcode:string = uniqueId();\n\tname?:string;\n\tdescription?:string;\n\turl?:string;\n\tpathVariables?:string; \n\ticonUrl?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\trole:AuthorityType[] = [];\n\n\t//\n\tactive?:boolean = false;\n\tmenuClass?:string = \"fas fa-folder\";\n\tauthenticated?:boolean = false;\n\tshowSidebar?:boolean  = false;\n\tsubMenus?:Menu[] = undefined;\n\n\tstatic getIconClassName = (menu:Menu) => {\n\t\tif (undefined == menu.menuClass) {\n\t\t\treturn Menu.defaultMenuIconClassName;\n\t\t}\n\t\treturn menu.menuClass;\n\t}\n\n\tuserAuthorized? = (user?:User) : boolean => {\n\t\tif (this.role.length == 0) return true;\n\t\tif (!user) return false;\n\t\tfor (let i = 0; i < this.role.length; i++) {\n\t\t\tconst element = this.role[i];\n\t\t\tif (user.role == element) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","\r\nimport { AuthorityType } from '../models/AuthorityType';\r\nimport Menu from '../models/settings/Menu';\r\n\r\nexport const HOME = \"home\"; \r\nexport const ABOUT = \"about\";\r\nexport const ACCOUNT = \"account\";\r\nexport const LOGIN = \"login\";\r\nexport const LOGOUT = \"logout\";\r\nexport const DASHBOARD = \"dashboard\"; \r\nexport const MENU_SETTING = \"settings\";\r\nexport const MENU_MASTER_DATA = \"management\";\r\nexport const LESSONS = \"lessons\";\r\nexport const CLUB = \"language_club\";\r\nexport const EVENTS = \"events\";\r\nexport const GALLERY = \"gallery\"; \r\nexport const CHATROOM = \"chatroom\";\r\nexport const QUIZ_MANAGEMENT = \"quiz_management\";\r\nexport const PUBLIC_QUIZ = \"public_quiz\";\r\n\r\nexport const getMenus = () => {\r\n    let menuSet: Menu[] = [];\r\n    for (let i = 0; i < _menus.length; i++) {\r\n        const element: Menu = _menus[i];\r\n        const menu:Menu = Object.assign(new Menu, element);\r\n        const subMenus:Menu[] = [];\r\n        if (element.subMenus) {\r\n            for (let i = 0; i < element.subMenus.length; i++) {\r\n                const subMenu = element.subMenus[i];\r\n                subMenus.push(Object.assign(new Menu, subMenu));\r\n            }\r\n            menu.subMenus = subMenus;\r\n        }\r\n        menuSet.push(menu);\r\n    }\r\n    \r\n    return menuSet;\r\n}\r\nexport const extractMenuPath = (pathName: string) => {\r\n    const pathRaw = pathName.split('/');\r\n   \r\n    let firstPath = pathRaw[0];\r\n    if (firstPath.trim() == \"\") {\r\n        firstPath = pathRaw[1];\r\n    }\r\n    return firstPath;\r\n}\r\nexport const getMenuByMenuPath = (pathName: string): Menu | null => {\r\n    const menus = getMenus();\r\n    try {\r\n        for (let i = 0; i < menus.length; i++) {\r\n            const menu: Menu = menus[i];\r\n            if (menu.url == \"/\" + pathName) {\r\n                return menu;\r\n            }\r\n        }\r\n        return null;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst _menus: Menu[] = [\r\n    {\r\n        code: HOME,\r\n        name: \"Home\",\r\n        url: \"/home\",\r\n        menuClass: \"fa fa-home\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: false,\r\n        role : []\r\n    },\r\n    {\r\n        code: LESSONS,\r\n        name: \"Lessons\",\r\n        url: \"/lessons\",\r\n        menuClass: \"fa fa-home\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: true,\r\n        role : []\r\n    },\r\n    {\r\n        code: EVENTS,\r\n        name: \"Events\",\r\n        url: \"/events\",\r\n        menuClass: \"fa fa-calendar-week\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: true,\r\n        role : [],\r\n        subMenus: [\r\n            {\r\n                code: 'e_public_speaking',\r\n                name: 'Public Speaking',\r\n                url: 'publicspeaking',\r\n                menuClass: 'fas fa-broadcast-tower',\r\n                role : [],\r\n            },\r\n            {\r\n                code: 'e_skills',\r\n                name: 'Skill',\r\n                url: 'skill',\r\n                menuClass: 'fas fa-basketball-ball',\r\n                role : [],\r\n            }\r\n        ]\r\n    },\r\n    \r\n    {\r\n        code: GALLERY,\r\n        name: \"Gallery\",\r\n        url: \"/gallery\",\r\n        menuClass: \"fa fa-photo-video\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: true,\r\n        role: [],\r\n        subMenus: [\r\n            {\r\n                code: 'gallery_picture',\r\n                name: 'Pictures',\r\n                url: 'picture',\r\n                menuClass: 'fas fa-images',\r\n                role: [], \r\n            },\r\n            {\r\n                code: 'gallery_video',\r\n                name: 'Videos',\r\n                url: 'video',\r\n                menuClass: 'fas fa-video',\r\n                role: [],\r\n            }, {\r\n                code: 'gallery_document',\r\n                name: 'Documents',\r\n                url: 'document',\r\n                menuClass: 'far fa-file',\r\n                role: [],\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        code: DASHBOARD,\r\n        name: \"Dashboard\",\r\n        url: \"/dashboard\",\r\n        menuClass: \"fas fa-tachometer-alt\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        role: [AuthorityType.ROLE_ADMIN, AuthorityType.ROLE_USER],\r\n        subMenus: [\r\n            {\r\n                code: 'dashboard_quiz_history',\r\n                name: 'Quiz History',\r\n                url: 'quizhistory',\r\n                menuClass: 'fas fa-history',\r\n                role: [AuthorityType.ROLE_ADMIN, AuthorityType.ROLE_USER],\r\n            },\r\n            // {\r\n            //     code: 'dashboard_productsales',\r\n            //     name: 'Product Sales',\r\n            //     url: 'productsales',\r\n            //     menuClass: 'fas fa-chart-line',\r\n            //     role: [],\r\n            // }\r\n        ]\r\n    }, \r\n    {\r\n        code: PUBLIC_QUIZ,\r\n        name: \"Quiz\",\r\n        url: \"/quiz\",\r\n        menuClass: \"fas fa-book\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: false,\r\n        subMenus: [],\r\n        role: [AuthorityType.ROLE_ADMIN, AuthorityType.ROLE_USER]\r\n    },\r\n    {\r\n        code: QUIZ_MANAGEMENT,\r\n        name: \"Quiz Management\",\r\n        url: \"/quizmanagement\",\r\n        menuClass: \"fas fa-chalkboard\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        role: [AuthorityType.ROLE_ADMIN],\r\n        subMenus: [\r\n            {\r\n                code: 'quiz_management_form',\r\n                name: 'Quiz Form',\r\n                url: 'form',\r\n                menuClass: 'fas fa-keyboard',\r\n                role:[]\r\n            }, \r\n            {\r\n                code: 'quiz_upload_form',\r\n                name: 'Quiz Upload',\r\n                url: 'upload',\r\n                menuClass: 'fas fa-upload',\r\n                role:[]\r\n            }, \r\n        ]\r\n    }, \r\n    {\r\n        code: MENU_MASTER_DATA,\r\n        name: \"Master Data\",\r\n        url: \"/management\",\r\n        menuClass: \"fa fa-database\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        role: [AuthorityType.ROLE_ADMIN],\r\n    },\r\n    {\r\n        code: MENU_SETTING,\r\n        name: \"Setting\",\r\n        url: \"/settings\",\r\n        menuClass: \"fas fa-cogs\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        role: [AuthorityType.ROLE_ADMIN ,AuthorityType.ROLE_USER],\r\n        subMenus: [\r\n            {\r\n                code: 'user_profile',\r\n                name: 'Profile',\r\n                menuClass: 'fas fa-user-cog',\r\n                url: 'user-profile',\r\n                role: [AuthorityType.ROLE_ADMIN, AuthorityType.ROLE_USER],\r\n            },\r\n            {\r\n                code: 'app_profile',\r\n                name: 'Application Setting',\r\n                menuClass: 'fas fa-cog',\r\n                url: 'app-profile',\r\n                role: [AuthorityType.ROLE_ADMIN ],\r\n            },\r\n            \r\n        ]\r\n    },\r\n];\r\n","import * as types from './types'\r\nimport * as menuData from '../constant/Menus' \r\nimport { setLoginKeyCookie } from './../middlewares/Common';\r\n\r\nexport const initState = {\r\n    loginKey: null,\r\n    loginStatus: false,\r\n    loginFailed: false,\r\n    menus: menuData.getMenus(),\r\n    loggedUser: null,\r\n    loginAttempt: false,\r\n    requestId: null,\r\n    applicationProfile: {},\r\n    assetsPath: \"\"\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n    \r\n    let result = {};\r\n    switch (action.type) { \r\n        case types.SET_REQUEST_ID:\r\n            \r\n            console.debug(\"USER REDUCER:REQUEST_ID\", action.payload.requestId);\r\n            result = {\r\n                ...state, requestId: action.payload.requestId,\r\n                masterHealthCenter: action.payload.masterHealthCenter??{},\r\n                applicationProfile: action.payload.applicationProfile ?? {},\r\n                assetsPath: action.payload.applicationProfile.assetsPath\r\n            };\r\n            \r\n            if (action.payload.loginStatus == true) {\r\n                result.loggedUser = action.payload.user;\r\n                result.loginStatus = true;\r\n            } else {\r\n                result.loginStatus = false;\r\n                result.loggedUser = null;\r\n            }\r\n            console.debug(\"result\");\r\n            console.debug(\"action.payload.requestId: \",action.payload.requestId); \r\n            console.debug(\"REQUEST_ID result.loginStatus:\", result.loginStatus)\r\n             action.payload.referer.refresh();\r\n\r\n            return result;\r\n        case types.DO_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginAttempt: true,\r\n                loginStatus: action.payload.loginStatus,\r\n                loginKey: action.payload.loginKey,\r\n                loginFailed: action.payload.loginStatus == false,\r\n                loggedUser: action.payload.loggedUser\r\n            };\r\n            return result;\r\n        case types.DO_LOGOUT:\r\n            result = {\r\n                ...state,\r\n                loginStatus: false,\r\n                loggedUser: null\r\n            };\r\n            setLoginKeyCookie(null);\r\n            return result;\r\n        case types.REFRESH_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginStatus: action.payload.loginStatus,\r\n                loggedUser: action.payload.loggedUser,\r\n                requestId: action.payload.requestId,\r\n            };\r\n            return result;\r\n        case types.GET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.data\r\n            };\r\n            return result;\r\n        case types.SET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.user\r\n            };\r\n            return result;\r\n        case types.SET_APPLICATION_PROFILE:\r\n            result = {\r\n                ...state, applicationProfile: action.payload.applicationProfile\r\n            };\r\n            return result;\r\n        default:\r\n            return { ...state };\r\n\r\n    }\r\n}\r\n\r\nexport default reducer;","export default class AttachmentInfo {\r\n    setUrl(arg0: string) {\r\n        this.url = arg0;\r\n        this.data = arg0.split(\",\")[1];\r\n    }\r\n    static nameOnly(name: any): AttachmentInfo {\r\n        const info = new AttachmentInfo();\r\n        info.name = name;\r\n        return info;\r\n    }\r\n    static instance(name: any, url:string): AttachmentInfo {\r\n        const info = new AttachmentInfo();\r\n        info.name = name;\r\n        info.url = url;\r\n        return info;\r\n    }\r\n    name: string = \"\";\r\n    blob: Blob = new Blob();\r\n    url: string = \"\";\r\n    data: string = \"\";\r\n}","\r\nimport { commonAuthorizedHeader, commonHeader } from '../middlewares/Common';\r\nimport WebResponse from '../models/WebResponse';\r\nimport { updateAccessToken } from './../middlewares/Common';\r\nimport AttachmentInfo from './../models/AttachmentInfo';\r\n\r\nconst axios = require('axios');\r\n\r\nexport const rejectedPromise = (message: any) => {\r\n    return new Promise((res, rej) => {\r\n        rej(message);\r\n    });\r\n}\r\n\r\nexport const emptyPromise = (defaultResponse: any) => new Promise(function (res, rej) {\r\n    res(defaultResponse);\r\n});\r\n\r\nexport const commonAjaxPostCalls = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                updateAccessToken(axiosResponse);\r\n                const response: WebResponse = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                if (response.code == \"00\") {\r\n\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { \r\n                \r\n                console.error(e); \r\n                reject(e); \r\n            });\r\n    })\r\n}\r\n\r\n\r\nexport const commonAjaxPublicPostCalls = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            headers: commonHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                \r\n                const response: WebResponse = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                if (response.code == \"00\") {\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { \r\n                \r\n                console.error(e); \r\n                reject(e); \r\n            });\r\n    })\r\n}\r\n\r\nexport const commonAjaxPostCallsWithBlob = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<AttachmentInfo>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            responseType: 'blob' ,\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                updateAccessToken(axiosResponse);\r\n                \r\n                const response: any = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                console.debug(\"axiosResponse.headers: \", axiosResponse.headers);\r\n                let contentDisposition = axiosResponse.headers[\"content-disposition\"];\r\n                let fileName = contentDisposition.split(\"filename=\")[1];\r\n                let rawSplit = fileName.split(\".\");\r\n                let extension = rawSplit[rawSplit.length - 1];\r\n                let blob = new Blob([response], { type: extension });\r\n                let url = window.URL.createObjectURL(blob);\r\n                // let a = document.createElement(\"a\");\r\n\r\n                // document.body.appendChild(a);\r\n\r\n                // a.href = url;\r\n                // a.style.display = 'none';\r\n                // a.download = fileName;\r\n                // a.click();\r\n\r\n                // window.URL.revokeObjectURL(url);\r\n                const attachmentInfo:AttachmentInfo = new AttachmentInfo();\r\n                attachmentInfo.name = fileName;\r\n                attachmentInfo.blob = blob;\r\n                attachmentInfo.url = url;\r\n                resolve(attachmentInfo);\r\n                \r\n            })\r\n            .catch((e: any) => { console.error(e); reject(e); });\r\n    })\r\n}","\r\nimport User from './../models/User';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls, commonAjaxPublicPostCalls } from './Promises';\r\nimport WebResponse from './../models/WebResponse';\r\nimport { updateAccessToken } from './../middlewares/Common';\r\nexport default class UserService {\r\n    private static instance?: UserService;\r\n\r\n    static getInstance(): UserService {\r\n        if (this.instance == null) {\r\n            this.instance = new UserService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    updateProfile = (user: User) => {\r\n\r\n        const request: WebRequest = {\r\n            user: user\r\n        }\r\n\r\n        const endpoint = contextPath().concat(\"api/member/account/updateprofile\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    saveUser = (user: User) => {\r\n\r\n        const request: WebRequest = {\r\n            user: user\r\n        } \r\n        const endpoint = contextPath().concat(\"api/public/register\")\r\n        return commonAjaxPublicPostCalls(endpoint, request);\r\n    }\r\n    requestApplicationId = (callbackSuccess: (response: WebResponse) => any, callbackError: ()=>any) => {\r\n        const url = contextPath() + \"api/public/requestid\";\r\n        commonAjaxPostCalls(url, {}).then(data => {\r\n            if (data.code != \"00\") {\r\n                alert(\"Error requesting app ID\");\r\n                return;\r\n            }\r\n            const response = data.rawAxiosResponse;\r\n            updateAccessToken(response);\r\n            console.debug(\"response header:\", response.headers['access-token']);\r\n            callbackSuccess(data);\r\n        }).catch(e => {\r\n            console.error(\"ERROR requestApplicationId: \", e);\r\n            callbackError();\r\n        })\r\n\r\n    }\r\n    requestApplicationIdNoAuth = (callbackSuccess: (response:WebResponse)=>any, callbackError: ()=>any) => {\r\n        const url =   contextPath() + \"api/public/requestid\";\r\n        commonAjaxPublicPostCalls(url, {}).then(data => {\r\n          if (data.code != \"00\") {\r\n              alert(\"Error requesting app ID\");\r\n              return;\r\n          } \r\n          callbackSuccess(data);\r\n      }).catch(e=>{\r\n          console.error(\"ERROR requestApplicationIdNoAuth: \", e);\r\n        //   alert(\"Error, please reload OR try again\");\r\n            callbackError();\r\n      })\r\n          \r\n      }\r\n\r\n}","\r\nimport User from '../models/User';\r\nimport WebRequest from '../models/WebRequest';\r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCalls, commonAjaxPublicPostCalls } from './Promises';\r\nexport default class CategoriesService\r\n{\r\n    private static instance?:CategoriesService;\r\n    private categories:Map<string, any[]>= new Map();\r\n    static getInstance(): CategoriesService {\r\n        if (this.instance == null) {\r\n            this.instance = new CategoriesService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    getCategories = (code:string) => { \r\n        const endpoint = contextPath().concat(\"api/public/categories/\"+code)\r\n        return commonAjaxPublicPostCalls(endpoint, {});\r\n    }\r\n    getLoadedCategories = (code:string) : any[] =>{\r\n        return this.categories.get(code) ?? [];\r\n    }\r\n    setLoadedCategories = (code:string, categories:any[]) =>{\r\n        this.categories.set(code, categories);\r\n    }\r\n\r\n}","\r\nimport WebRequest from '../models/WebRequest';\r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPublicPostCalls } from './Promises'; \r\nexport default class LessonService {\r\n    private static instance?: LessonService;\r\n\r\n    static getInstance(): LessonService {\r\n        if (this.instance == null) {\r\n            this.instance = new LessonService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    getLessons = (categoryCode: string, request: WebRequest) => {\r\n\r\n        const endpoint = contextPath().concat(\"api/public/lessons/\" + categoryCode)\r\n        return commonAjaxPublicPostCalls(endpoint, request);\r\n    }\r\n\r\n}","\r\nimport Filter from './../models/Filter';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls, commonAjaxPostCallsWithBlob } from './Promises';\r\nimport BaseEntity from './../models/BaseEntity';\r\nimport ManagementProperty from '../models/ManagementProperty';\r\nimport EntityProperty from '../models/settings/EntityProperty';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\n\r\nexport default class MasterDataService {\r\n    managementProperties: ManagementProperty[] = [];\r\n    private entityPropertyMap: Map<string, EntityProperty> = new Map();\r\n    private static instance?: MasterDataService;\r\n\r\n    static getInstance(): MasterDataService {\r\n        if (this.instance == null) {\r\n            this.instance = new MasterDataService();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    setEntityProperty(code: string, data?: EntityProperty) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n        this.entityPropertyMap.set(code, data);\r\n    }\r\n    getEntityProperty(code?: string): EntityProperty | undefined {\r\n        if (code == undefined) {\r\n            return undefined;\r\n        }\r\n        return this.entityPropertyMap.get(code);\r\n    }\r\n\r\n    loadManagementProperties(req?: any) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/managementpages\");\r\n        return commonAjaxPostCalls(endpoint, {});\r\n\r\n    }\r\n    loadEntityProperty(code: string) {\r\n        console.debug(\"Load entity prop: \", code);\r\n        const request: WebRequest = {\r\n            entity: code\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/configv2\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadEntities(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadAllEntities(code: string) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                limit: 0, page: 0\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    getById(code: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                exacts: true,\r\n                limit: 1,\r\n                page: 0,\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getBy(code: string, fieldsFilter: {}, limit = 1) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                exacts: true,\r\n                limit: limit,\r\n                page: 0,\r\n                fieldsFilter: fieldsFilter\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    delete(code: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/delete\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    save(code: string, model: BaseEntity, editMode: boolean) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            [code]: model\r\n        }\r\n        let endpoint: string;\r\n        if (editMode) {\r\n            endpoint = contextPath().concat(\"api/app/entity/update\");\r\n        } else {\r\n            endpoint = contextPath().concat(\"api/app/entity/add\");\r\n        }\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    updateApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n        const request: WebRequest = {\r\n            profile: applicationProfile\r\n        }\r\n        const endpoint = contextPath().concat(\"api/app/setting/updateprofile\");\r\n        return commonAjaxPostCalls(endpoint, request)\r\n    }\r\n\r\n    generateReport(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/report/records\");\r\n        return commonAjaxPostCallsWithBlob(endpoint, request);\r\n\r\n    }\r\n}","import BaseEntity from './BaseEntity';\nimport QuizQuestion from './QuizQuestion';\n\nexport default class Quiz extends BaseEntity{\n    static clone= (quiz: Quiz):Quiz => {\n        return  Object.assign(new Quiz(), quiz);\n    }\n\ttitle?:string = \"\";\n\tdescription?:string = \"\";\n\t\n\tavailable?:boolean = true;\n\tshowAllQuestion:boolean = true;\n\tquestionsTimered:boolean = false;\n\t\n\tduration:number = 0;\n\tactive?:boolean = true;\n\trepeatable?:boolean = true;\n\tprotectedByCode?:boolean;\n\t\n\tquestions:QuizQuestion[] = [];\n\t\n\timage?:string = \"\";\n\tstartedDate?:Date = new Date();\n\tsubmittedDate?:Date = new Date();\n\tmappedAnswer?:{}; \n\t//\n\tmaxQuestionNumber?:number;\n\n\tpublic static updateMappedAnswer = (quiz:Quiz) => {\n\t\tquiz.mappedAnswer = {};\n\t\tfor (let i = 0; i < quiz.questions.length; i++) {\n\t\t\tconst element = quiz.questions[i];\n\t\t\tif (element.id &&(element.answerCode|| element.answerEssay || element.entered == true)) {\n\t\t\t\tquiz.mappedAnswer[new String(element.number).toString()] = element.answerCode??(element.answerEssay??null);\n\t\t\t\t \n\t\t\t}\n\t\t}\n\t\t// console.debug(\"quiz.mappedAnswer: \", quiz.mappedAnswer);\n\t}\n\tgetQuestionCount = () : number => {\n\t\treturn this.questions?this.questions.length : 0;\n\t}\n\n\tresetCorrectChoices = () : void => {\n\t\tif (!this.questions || this.getQuestionCount() == 0) return;\n\t\tfor (let i = 0; i < this.questions.length; i++) {\n\t\t\tconst element = this.questions[i];\n\t\t\telement.correctChoice = undefined;\n\t\t\telement.answerCode = undefined;\n\t\t}\n\t}\n\n\tallQuestionHasBeenAnswered = () : boolean => {\n\t\tif (!this.questions || this.getQuestionCount() == 0) return false;\n\n\t\tfor (let i = 0; i < this.questions.length; i++) {\n\t\t\tconst element = this.questions[i];\n\t\t\tif (element.answerCode  == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\taccessCode?: string ;\n\tafterCompletionMessage?:string;\n}\n","\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport { baseImageUrl } from './../constant/Url';\r\nexport const doItLater = (callback:()=>any, intervalMs:number) => {\r\n    const timeout = setTimeout(()=>{\r\n       callback();\r\n        clearTimeout(timeout);\r\n      }, intervalMs)\r\n}\r\n\r\n\r\nexport const  updateFavicon = (profile: ApplicationProfile) => {\r\n    if (profile.pageIcon) {\r\n      let link = document.querySelector('link[rel=\"shortcut icon\"]') ||\r\n        document.querySelector('link[rel=\"icon\"]');\r\n      if (!link) {\r\n        link = document.createElement('link');\r\n        link.id = 'favicon';\r\n        link.setAttribute(\"rel\", 'shortcut icon');\r\n        document.head.appendChild(link);\r\n      }\r\n      link.setAttribute(\"href\", baseImageUrl() + profile.pageIcon);\r\n    }\r\n  }","import { doItLater } from './EventUtil';\r\nlet stompClient = undefined;\r\nlet wsConnected = false;\r\nlet websocketUrl = undefined;\r\nconst onConnectCallbacks = new Array();\r\nconst subscriptionCallbacks = new Array();\r\nexport const isWsConnected = () => {\r\n\treturn wsConnected == true;\r\n}\r\nexport const setWebSocketUrl = (url) => {\r\n\twebsocketUrl = url;\r\n}\r\nexport const sendToWebsocket = (url, requestObject) => {\r\n\tif (!wsConnected || !stompClient) {\r\n\t\tconsole.info(\"Connecting\");\r\n\t\treturn false;\r\n\t}\r\n\tconsole.debug(\"SEND WEBSOCKET\")\r\n\tstompClient.send(url, {}, JSON.stringify(requestObject));\r\n\treturn true;\r\n}\r\n\r\nexport const addOnWsConnectCallbacks = (...callbacks) => {\r\n\tfor (let i = 0; i < callbacks.length; i++) {\r\n\t\tconst element = callbacks[i];\r\n\t\tonConnectCallbacks.push(element);\r\n\t}\r\n}\r\n\r\nexport const performWebsocketConnection = () => {\r\n\tvar socket = new window.SockJS(websocketUrl);\r\n\tstompClient  = window.Stomp.over(socket);\r\n\tstompClient .connect({}, function (frame) {\r\n\t\twsConnected = true;\r\n\t\t// setConnected(true);\r\n\t\tconsole.log('Websocket CONNECTED: ', websocketUrl, 'frame :', frame, stompClient.ws._transport.ws.url);\r\n\t\tconsole.debug(\"subscriptionCallbacks :\", subscriptionCallbacks.length);\r\n\t\t// document.getElementById(\"ws-info\").innerHTML =\r\n\t\t// stompClients.ws._transport.ws.url;\r\n\t\tfor (let i = 0; i < subscriptionCallbacks.length; i++) {\r\n\t\t\tconst callBackObject = subscriptionCallbacks[i];\r\n\r\n\t\t\tif (callBackObject) {\r\n\r\n\t\t\t\tstompClient.subscribe(callBackObject.subscribeUrl, (response) => {\r\n\t\t\t\t\tvar respObject = JSON.parse(response.body);\r\n\t\t\t\t\tcallBackObject.callback(respObject);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < onConnectCallbacks.length; i++) {\r\n\t\t\tconst callback = onConnectCallbacks[i];\r\n\t\t\tcallback(frame);\r\n\t\t}\r\n\r\n\t}, (e) => {\r\n\t\tconsole.warn(\"Error connection websocket, reconnect\");\r\n\t\tdoItLater(performWebsocketConnection, 2000);\r\n\t});\r\n\r\n\t \r\n}\r\n\r\n /**\r\n  * \r\n  * @param  {...WsCallback} callBackObjects \r\n  */\r\nexport const registerWebSocketCallbacks = (...callBackObjects) => {\r\n\r\n\tif (null == callBackObjects) {\r\n\t\treturn;\r\n\t}\r\n\tfor (var i = 0; i < callBackObjects.length; i++) {\r\n\t\tsubscriptionCallbacks.push(callBackObjects[i]);\r\n\t}\r\n}\r\n","\r\n\r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises'; \r\nimport WebRequest from './../models/WebRequest';\r\nimport Filter from './../models/Filter';\r\nimport Quiz from './../models/Quiz';\r\nimport { getLoginKey } from '../middlewares/Common';\r\nimport { sendToWebsocket } from '../utils/websockets';\r\nimport QuizQuestion from './../models/QuizQuestion';\r\nimport QuizHistoryModel from './../models/QuizHistory';\r\nexport default class PublicQuizService {\r\n   \r\n    private static instance?: PublicQuizService;\r\n\r\n    static getInstance(): PublicQuizService {\r\n        if (this.instance == null) {\r\n            this.instance = new PublicQuizService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    \r\n    getQuiz = (id: number) => {\r\n        const endpoint = contextPath().concat(\"api/member/quiz/get/\"+id)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    submitAnswers = (quiz:Quiz) => {\r\n        const submited = Object.assign(new Quiz, quiz);\r\n        for (let i = 0; i < submited.questions.length; i++) { \r\n            submited.questions[i].choices = undefined;\r\n        }\r\n        const endpoint = contextPath().concat(\"api/member/quiz/submit\")\r\n        return commonAjaxPostCalls(endpoint, {quiz:submited});\r\n    }\r\n    getQuizList = (filter:Filter) => {\r\n        filter.orderBy = \"title\";\r\n        filter.orderType = \"asc\";\r\n        const request:WebRequest = {filter:filter};\r\n        const endpoint = contextPath().concat(\"api/member/quiz/list\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getHistories = (filter:Filter) => {\r\n        const request:WebRequest = {filter:filter};\r\n        const endpoint = contextPath().concat(\"api/member/quiz/history\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    validateAccessCode(q: Quiz, code: string | null) {\r\n        const endpoint = contextPath().concat(\"api/member/quiz/validateaccesscode/\"+q.id+\"?code=\"+code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n\r\n    /**\r\n     * ================== update via websocket ==================\r\n     */\r\n    sendUpdateStart = (_quiz:Quiz, requestId:string) => {\r\n        const quiz = Object.assign(new Quiz, _quiz);\r\n        quiz.questions = [];\r\n        sendToWebsocket(\"/app/quiz/start\", {\r\n            quizHistory:{\r\n                quiz: quiz,\r\n                token: getLoginKey(),\r\n                requestId:  requestId\r\n            }\r\n        });\r\n    }\r\n\r\n    sendUpdateAnswer = (_quiz:Quiz,  requestId: string) => {\r\n        const quiz = Object.assign(new Quiz, _quiz);\r\n        try {\r\n            Quiz.updateMappedAnswer(quiz);\r\n            // console.debug(\"MAPPED ANSWER: \",quiz.mappedAnswer);\r\n            quiz.questions = [];\r\n            const quizHistory:QuizHistoryModel = {\r\n                updated: new Date(),\r\n                requestId:  requestId,\r\n                quiz: quiz,\r\n                token: getLoginKey(),\r\n            }\r\n            sendToWebsocket(\"/app/quiz/answer\", {\r\n                quizHistory:quizHistory\r\n            });\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    }\r\n\r\n}","\r\n\r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises'; \r\nimport Quiz from './../models/Quiz';\r\nimport Filter from '../models/Filter';\r\nimport AttachmentInfo from './../models/AttachmentInfo';\r\nexport default class QuizService {\r\n    getHistoryDetail(id: any) {\r\n        const endpoint = contextPath().concat(\"api/member/quiz/history/\"+id)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    getQuizList = (filter:Filter) => {\r\n        const endpoint = contextPath().concat(\"api/app/quiz/list\")\r\n        return commonAjaxPostCalls(endpoint, {filter:filter});\r\n    }\r\n    private static instance?: QuizService;\r\n\r\n    static getInstance(): QuizService {\r\n        if (this.instance == null) {\r\n            this.instance = new QuizService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    submit = (quiz: Quiz) => {\r\n        const endpoint = contextPath().concat(\"api/app/quiz/submit\")\r\n        return commonAjaxPostCalls(endpoint, {quiz:quiz});\r\n    }\r\n    getQuiz = (id: number) => {\r\n        const endpoint = contextPath().concat(\"api/app/quiz/getquiz/\"+id)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    deleteQuiz = (id: number) => {\r\n        const endpoint = contextPath().concat(\"api/app/quiz/deletequiz/\"+id)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    uploadQuiz = (attachment:AttachmentInfo) => {\r\n        const endpoint = contextPath().concat(\"api/app/quiz/uploadquiz\")\r\n        return commonAjaxPostCalls(endpoint, {attachmentInfo:attachment});\r\n    }\r\n\r\n}","  \r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPublicPostCalls } from './Promises';\r\nimport Filter from './../models/Filter';\r\nexport default class GalleryService\r\n{\r\n    \r\n    private static instance?:GalleryService; \r\n    static getInstance(): GalleryService {\r\n        if (this.instance == null) {\r\n            this.instance = new GalleryService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    getPictures = (filter:Filter) => { \r\n        const endpoint = contextPath().concat(\"api/public/gallery/pictures\")\r\n        return commonAjaxPublicPostCalls(endpoint, {filter:filter});\r\n    }\r\n    getVideos = (filter:Filter) => { \r\n        const endpoint = contextPath().concat(\"api/public/gallery/videos\")\r\n        return commonAjaxPublicPostCalls(endpoint, {filter:filter});\r\n    }\r\n    getDocuments = (filter:Filter) => { \r\n        const endpoint = contextPath().concat(\"api/public/gallery/documents\")\r\n        return commonAjaxPublicPostCalls(endpoint, {filter:filter});\r\n    }\r\n    validateDocumentAccessCode(code: string, id: any) {\r\n        const endpoint = contextPath().concat(\"api/public/gallery/documents/\"+id+\"/unlock/\"+code)\r\n        return commonAjaxPublicPostCalls(endpoint, {});\r\n    }\r\n\r\n}","\r\nimport UserService from '../services/UserService';\r\nimport CategoriesService from '../services/CategoriesService';\r\nimport LessonService from '../services/LessonService';\r\nimport MasterDataService from '../services/MasterDataService';\r\nimport PublicQuizService from '../services/PublicQuizService';\r\nimport QuizService from '../services/QuizService';\r\nimport Services from './../services/Services';\r\nimport GalleryService from './../services/GalleryService';\r\n\r\nexport const initState: { services: Services } = {\r\n    services: {\r\n        userService: UserService.getInstance(),\r\n        categoriesService: CategoriesService.getInstance(),\r\n        lessonService: LessonService.getInstance(),\r\n        masterDataService: MasterDataService.getInstance(),\r\n        publicQuizService: PublicQuizService.getInstance(),\r\n        quizService: QuizService.getInstance(),\r\n        galleryService: GalleryService.getInstance()\r\n    }\r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n\r\n    return state;\r\n}\r\n\r\nexport default reducer;","import * as appReducer from \"./appReducer\"\r\nimport * as userReducer from \"./userReducer\" \r\nimport  * as servicesReducers from './servicesReducer';\r\nimport { combineReducers } from \"redux\";\r\n\r\nexport const rootReducer = combineReducers(\r\n    {\r\n        appState: appReducer.reducer,\r\n        userState: userReducer.reducer, \r\n        servicesState: servicesReducers.reducer\r\n    }\r\n);\r\n\r\nexport const initialState = {\r\n    appState: appReducer.initState,\r\n    userState: userReducer.initState, \r\n    servicesState: servicesReducers.initState\r\n}\r\n\r\nexport default rootReducer;","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\nimport WebResponse from './../models/WebResponse';\r\nconst axios = require('axios');\r\nexport const performLoginMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGIN) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n    axios.post(action.meta.url, {}, {\r\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n    }).then(axiosResponse => {\r\n        const responseJson = axiosResponse.data;\r\n        let loginKey: string = \"\";\r\n        let loginSuccess: boolean = false;\r\n\r\n        if (responseJson.code != null && responseJson.code == \"00\") {\r\n            loginKey = axiosResponse.headers['access-token'];\r\n            console.log(\"api_token: \", loginKey);\r\n            loginSuccess = true;\r\n        }\r\n        let newAction = Object.assign({}, action, {\r\n            payload: {\r\n                loginStatus: loginSuccess,\r\n                loginKey: loginKey,\r\n                loggedUser: responseJson.user\r\n            }\r\n        });\r\n        common.updateAccessToken(axiosResponse);\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log)\r\n        .finally(() => { app.endLoading(); });\r\n\r\n}\r\n \r\n\r\nexport const getLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_LOGGED_USER) { return next(action); }\r\n\r\n    let headers = common.commonAuthorizedHeader();\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: headers\r\n    }).then(response => {\r\n        const data = response.data;\r\n\r\n        if (!data) {\r\n            alert(\"Error performing request\");\r\n            return;\r\n        }\r\n\r\n        let newAction = Object.assign({}, action, { payload: { data } });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log).finally(param => {\r\n            action.meta.app.endLoading();\r\n            action.meta.app.refresh();\r\n        });\r\n}\r\n\r\n\r\nexport const performLogoutMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGOUT) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: common.commonAuthorizedHeader()\r\n    })\r\n        .then(response => {\r\n            const responseJson = response.data;\r\n            let logoutSuccess = false;\r\n            if (responseJson.code == \"00\") {\r\n                logoutSuccess = true;\r\n            } else {\r\n                alert(\"Logout Failed\");\r\n            }\r\n\r\n            let newAction = Object.assign({}, action, {\r\n                payload: {\r\n                    loginStatus: !logoutSuccess\r\n                }\r\n            });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(console.log).finally(param => app.endLoading());\r\n}\r\n\r\nexport const setLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.SET_LOGGED_USER) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n}","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\n\r\nconst POST_METHOD = \"post\"; \r\n\r\nexport const getMessagesMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_MESSAGE) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: common.commonAuthorizedHeader()\r\n    }).then(response => response.json())\r\n        .then(data => {\r\n            console.debug(\"sendChatMessageMiddleware Response:\", data);\r\n            let newAction = Object.assign({}, action, { payload: data });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n \r\nexport const storeChatMessageLocallyMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.STORE_MESSAGE) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n} \r\n\r\n","import { createStore, applyMiddleware } from 'redux'\r\nimport { initialState, rootReducer } from './reducers' \r\nimport * as userMiddleware from '../middlewares/UserMiddleware' \r\nimport * as realtimeChatMiddleware from '../middlewares/RealtimeChatMiddleware' \r\n \r\nlet store = null;\r\nexport const getStore = () => {\r\n    return store;\r\n}\r\nexport const configureStore = () => {\r\n    store = createStore(\r\n        rootReducer,\r\n        initialState,\r\n        applyMiddleware(   \r\n\r\n            //user related\r\n            userMiddleware.performLoginMiddleware,\r\n            userMiddleware.performLogoutMiddleware,  \r\n            userMiddleware.getLoggedUserMiddleware, \r\n            userMiddleware.setLoggedUserMiddleware,\r\n \r\n\r\n            /*realtime chat*/\r\n            realtimeChatMiddleware.storeChatMessageLocallyMiddleware,\r\n            realtimeChatMiddleware.getMessagesMiddleware,\r\n\r\n        )\r\n    );\r\n\r\n    return store;\r\n}\r\n   \r\n\r\nexport default configureStore;","import {  getStore } from '../redux/configureStore';\r\nexport const commonAuthorizedHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(),//'localStorage.getItem(\"requestId\")',\r\n        'Authorization': 'Bearer '+getLoginKey()\r\n    }\r\n};\r\nexport const commonHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(), \r\n    }\r\n};\r\n\r\nconst LOGIN_KEY:string = \"arabic-club-login-key\";\r\n \r\nexport const getAssetsPath = () :string => {\r\n    const store = getStore(); \r\n    if (null == store) return \"\";\r\n    const state = store.getState();\r\n    return state.userState.assetsPath;\r\n}\r\n\r\nexport const getRequestId = () :string => {\r\n    const store = getStore();\r\n    if (null == store) return \"\";\r\n    const state = store.getState();\r\n    return state.userState.requestId;\r\n}\r\nexport const getLoginKey = () => {\r\n    return getCookie(LOGIN_KEY);\r\n}\r\n\r\nexport const updateAccessToken = (axiosResponse) => {\r\n    if (axiosResponse && axiosResponse.headers && axiosResponse.headers['access-token']) {\r\n        const accessToken = axiosResponse.headers['access-token'];\r\n        // console.debug(\"update access token: \", accessToken);\r\n        setCookie(LOGIN_KEY, accessToken);\r\n    }\r\n} \r\nexport const setLoginKeyCookie = (cookieValue:any) => {\r\n    setCookie(LOGIN_KEY, cookieValue);\r\n}\r\nexport const setCookie = function (cname, cvalue, exdays=1) {\r\n    var d = new Date();\r\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n    var expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n}\r\nexport const getCookie = function (cname) {\r\n    var name = cname + \"=\";\r\n    var decodedCookie = decodeURIComponent(document.cookie);\r\n    var ca = decodedCookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n        var c = ca[i];\r\n        while (c.charAt(0) == ' ') {\r\n            c = c.substring(1);\r\n        }\r\n        if (c.indexOf(name) == 0) {\r\n            return c.substring(name.length, c.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}","import { getAssetsPath } from \"../middlewares/Common\";\r\n\r\nconst devMode = \r\n    document.getElementById(\"rootPath\").value == \"${contextPath}\" || \r\n    document.getElementById(\"rootPath\").value == \"\";\r\nconst rootValue = devMode ?\r\n     \"/universal-good-shop/\" : document.getElementById(\"rootPath\").value+\"/\";\r\n\r\nexport const contextPath = function(){\r\n    const contextPath = devMode? \"http://localhost:8080\".concat(rootValue):rootValue;\r\n    //console.debug(\"contextPath: \",contextPath,document.getElementById(\"rootPath\").value);\r\n    return contextPath;\r\n}\r\n\r\n// export const baseImageUrl() = contextPath()+\"assets/images/\"; \r\n// export const baseImageUrl() = \"https://developmentmode.000webhostapp.com/uploaded_storage/\"; \r\n// export const baseImageUrl() = \"http://localhost/storage/images/\"; \r\nexport const baseImageUrl = () => getAssetsPath()+ \"images/\"; \r\nexport const baseDocumentUrl = () => getAssetsPath()+ \"documents/\"; \r\n// export const baseImageUrl() = contextPath()+\"WebAsset/Shop1/Images/\"; \r\n\r\nexport const POST = \"post\";\r\n","import { AuthorityType } from './AuthorityType';\nimport BaseEntity from './BaseEntity';\n\nexport default class User extends BaseEntity{\n\tusername?:string;\n\tdisplayName?:string;\n\teditPassword?:string;\n\tprofileImage?:string;\n\trole?:AuthorityType;\n\trequestId?:string; \n\n}\n","import * as types from './types'\r\nimport * as url from '../constant/Url'\r\nimport { contextPath } from '../constant/Url'; \r\nimport User from './../models/User';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport WebResponse from './../models/WebResponse';\r\n\r\nconst usedHost = url.contextPath();\r\nconst apiBaseUrl = usedHost + \"api/public/\"\r\nconst apiEntityBaseUrl = usedHost + \"api/app/entity/\"\r\nconst apiAccount = usedHost + \"api/member/account/\"\r\nconst apiAdmin = usedHost + \"api/app/admin/\"    \r\n\r\nexport const getEntityProperty = (entityName, app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_ENTITY_PROPERTY,\r\n        payload: {\r\n            entity: entityName\r\n        },\r\n        meta: {\r\n            type: types.GET_ENTITY_PROPERTY,\r\n            url: apiEntityBaseUrl.concat(\"config\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n\r\n\r\nexport const getManagementMenus = (app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_MANAGEMENT_MENUS,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MANAGEMENT_MENUS,\r\n            url: apiEntityBaseUrl.concat(\"managementpages\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n \r\n\r\nexport const setRequestId = (data:WebResponse, app) => {\r\n   \r\n    const ret= {\r\n        type: types.SET_REQUEST_ID,\r\n        payload: { loginStatus: data.loggedIn, referer:app, ...data },\r\n        meta: {\r\n            type: types.SET_REQUEST_ID, \r\n        }\r\n    };\r\n    // console.debug(\"setRequestId: \", ret);\r\n    return ret;\r\n}\r\n\r\nexport const getMessageList = (app) => {\r\n    app.startLoading();\r\n    return {\r\n        type: types.GET_MESSAGE,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MESSAGE, app: app,\r\n            url: apiAdmin.concat(\"getmessages\")\r\n        }\r\n    };\r\n}\r\n\r\nexport const storeMessageLocally = (messages) => {\r\n\r\n    return {\r\n        type: types.STORE_MESSAGE,\r\n        payload: {\r\n            entities: messages\r\n        },\r\n        meta: {\r\n            type: types.STORE_MESSAGE,\r\n        }\r\n    };\r\n}\r\n    \r\n\r\nexport const performLogout = (app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGOUT,\r\n        payload: {},\r\n        meta: { app: app, type: types.DO_LOGOUT, url: apiAccount.concat(\"logout\") }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const performLogin = (username, password, app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGIN,\r\n        payload: {},\r\n        meta: {\r\n            type: types.DO_LOGIN, url: contextPath().concat(\"login?username=\" + username + \"&password=\" +\r\n                password + \"&transport_type=rest\"), app: app\r\n        }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const getLoggedUser = (app) => {\r\n    app.startLoading();\r\n    let request = {\r\n        type: types.GET_LOGGED_USER,\r\n        payload: {},\r\n        meta: { type: types.GET_LOGGED_USER, url: apiAccount.concat(\"user\"), app: app }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setLoggedUser = (user: User) => {\r\n\r\n    let request = {\r\n        type: types.SET_LOGGED_USER,\r\n        payload: { user: Object.assign(new User(), user) },\r\n        meta: { type: types.SET_LOGGED_USER }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n\r\n    let request = {\r\n        type: types.SET_APPLICATION_PROFILE,\r\n        payload: { applicationProfile: applicationProfile },\r\n        meta: { type: types.SET_APPLICATION_PROFILE }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const removeEntity = () => ({\r\n    type: types.REMOVE_SHOP_ENTITY,\r\n    payload: {},\r\n    meta: { type: types.REMOVE_SHOP_ENTITY }\r\n})\r\n\r\n\r\nexport const  setMainApp = (mainApp:any) => ({\r\n    type: types.SET_MAIN_APP,\r\n    payload: mainApp,\r\n    meta: { type: types.SET_MAIN_APP }\r\n})\r\n\r\n","\r\nexport const mapCommonUserStateToProps = (state) => {\r\n    return {\r\n        applicationProfile: state.userState.applicationProfile,\r\n        loggedUser: state.userState.loggedUser,\r\n        loginStatus: state.userState.loginStatus,\r\n        requestId: state.userState.requestId, \r\n        services: state.servicesState.services,\r\n        mainApp: state.appState.mainApp\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport './Loader.css'\r\n\r\nclass Loader extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timer: 130,\r\n            intervalId: 0\r\n        }\r\n        this.update = () => {\r\n            if (this.state.timer < 0) {\r\n                clearInterval(this.state.intervalId);\r\n            }\r\n            console.log(\"tick\")\r\n            this.setState({ timer: this.state.timer - 1 })\r\n            if (this.state.timer < 0 && this.props.endMessage) {\r\n                this.props.endMessage();\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.withTimer == true) {\r\n            let intervalId = setInterval(this.update, 1, null);\r\n            this.setState({ intervalId: intervalId });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let className = \"message message-\" + this.props.type;\r\n\r\n        if (this.props.realtime == true) {\r\n            return <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n        }\r\n\r\n        return (\r\n            <div className={className} >\r\n                <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nfunction LoaderContent(props) {\r\n    if (props.realtime) {\r\n        return (\r\n            <div className=\"row container-fluid bg-light\" style={{margin:0, position: 'fixed', zIndex: 100 }}>\r\n                <div className=\"col-1\">\r\n                <span style={{marginBottom:'3px'}} className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </div>\r\n                <div className=\"col-11 progress\" style={{padding:0, marginTop: '7px', height:'10px'}}  >\r\n                    <div className=\"bg-primary\" style={{\r\n                        width: props.progress + \"%\",\r\n                        transitionDuration: '50ms',\r\n                        margin: 0,\r\n                    }}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n        <button className=\"btn btn-dark \" type=\"button\" disabled>\r\n            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n            <span className=\" \">Loading...</span>\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default Loader;","import React, { Component } from 'react'\r\n\r\nclass Alert extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.yesButtonRef = React.createRef();\r\n        this.noButtonRef = React.createRef();\r\n\r\n        this.onYes = (e) => {\r\n             \r\n            if (this.props.onYes) {\r\n                this.props.onYes(e);\r\n            }\r\n        }\r\n        this.onNo = (e) => {\r\n            \r\n            if (this.props.onNo) {\r\n                this.props.onNo(e);\r\n            }\r\n        }\r\n        this.onClose = (e) => {\r\n            if (this.props.onClose) {\r\n                this.props.onClose(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount () {\r\n        const isError = this.props.isError == true;\r\n        if (!isError && this.yesButtonRef.current) {\r\n            this.yesButtonRef.current.focus();\r\n        } else if (isError && this.noButtonRef.current) {\r\n            this.noButtonRef.current.focus();\r\n        } else if (isError && this.yesButtonRef.current) {\r\n            this.yesButtonRef.current.focus();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const title = this.props.title ? this.props.title : \"Info\";\r\n        const yesOnly = this.props.yesOnly == true;\r\n        const isError = this.props.isError == true;\r\n        const headerClassName = isError ? 'bg-danger':'bg-info';\r\n        const headerFontClassName = 'text-light';\r\n        return (\r\n            <>\r\n                <Backdrop />\r\n                <div className=\"modal fade show\" style={{ display: 'block' }} id=\"exampleModalCenter\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n                    <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                        <div className=\"modal-content\">\r\n                            <Header fontClassName={headerFontClassName} className={headerClassName} title={title} onClose={this.onClose} />\r\n                            <div className=\"modal-body\"> {this.props.children}</div>\r\n                            <Footer noButtonRef={this.noButtonRef} yesButtonRef={this.yesButtonRef} yesOnly={yesOnly} onYes={this.onYes} onNo={this.onNo} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nfunction Backdrop(props) {\r\n    return (\r\n        <div className=\"modal-backdrop\" style={{backgroundColor: 'rgba(100,100,100,0.7)'}} ></div>\r\n    );\r\n}\r\n\r\nfunction Footer(props) {\r\n    return (\r\n        <div className={\"modal-footer \"+props.className}>\r\n            <button ref={props.yesButtonRef} type=\"button\"\r\n                onClick={props.onYes} className=\"btn btn-outline-primary\">Yes</button>\r\n            {props.yesOnly ? null : <button ref={props.noButtonRef} type=\"button\"\r\n                onClick={props.onNo} className=\"btn btn-outline-secondary\">No</button>}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Header(props) {\r\n    return (<div className={\"modal-header \"+props.className}>\r\n        <h5 className={\"modal-title \"+props.fontClassName }id=\"exampleModalCenterTitle\">{props.title}</h5>\r\n        <button onClick={props.onClose} type=\"button\" className=\"close\">\r\n            <span aria-hidden=\"true\" className={props.fontClassName}><i className=\"fas fa-times\"/></span>\r\n        </button>\r\n    </div>)\r\n}\r\n\r\nexport default Alert;","import { base64StringFileSize } from './StringUtil';\r\nimport { ChangeEvent } from 'react';\r\nimport AttachmentInfo from './../models/AttachmentInfo';\r\nexport const byId = (id) => { return document.getElementById(id) }\r\n \r\nexport function toBase64(file, referer, callback) {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file.files[0]);\r\n    reader.onload = () => callback(reader.result, referer);\r\n    reader.onerror = error => {\r\n        alert(\"Error Loading File\");\r\n    }\r\n}\r\n \r\nexport const getHtmlInputElement = (e:ChangeEvent) : HTMLInputElement => {\r\n    const target = e.target as HTMLInputElement;\r\n    return target;\r\n}\r\nexport const getAttachmentInfo = (fileInput:HTMLInputElement): Promise<AttachmentInfo> => {\r\n    return new Promise<AttachmentInfo>((resolve, reject) =>{\r\n        if (null == fileInput.files || !fileInput.files[0]) {\r\n            reject(new Error(\"No file\"));\r\n            return;\r\n        }\r\n        try { \r\n            const file:File = fileInput.files[0]; \r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            console.debug(\"fileInput.files[0]: \", file);\r\n            reader.onload = function () { \r\n                const info:AttachmentInfo = new AttachmentInfo();\r\n                info.setUrl(new String(reader.result).toString());\r\n                // info.\r\n                info.name = file.name;\r\n                resolve(info);\r\n             }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nexport const toBase64v2 = (fileInput): Promise<string> => {\r\n    return new Promise<string>((resolve, reject) =>{\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(fileInput.files[0]);\r\n            console.debug(\"fileInput.files[0]: \", fileInput.files[0]);\r\n            reader.onload = function () { resolve(new String(reader.result).toString()); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nexport const resizeImage = (data:string, ratio:number, extension:string) => {\r\n    const actualFilesize = base64StringFileSize(data);\r\n    console.debug(\"Actual filesize: \", actualFilesize);\r\n    return new Promise<string>(function(resolve, reject){\r\n        const img = new Image();\r\n        img.src = data;\r\n        img.onload = function () {\r\n            const width = img.width   * ratio;\r\n            const height = img.height   * ratio;\r\n            // create an off-screen canvas\r\n            var canvas:HTMLCanvasElement = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            if (!ctx) return;\r\n            // set its dimension to target size\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            var mime_type = \"image/\"+extension;\r\n            // draw source image into the off-screen canvas:\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n            console.debug(\"Resize ratio: \", ratio, \"mime_type: \",mime_type);\r\n            // encode image to data-uri with base64 version of compressed image\r\n            const dataURL = (canvas.toDataURL());\r\n            console.debug(\"Resized filesize: \", base64StringFileSize(dataURL));\r\n            resolve(dataURL);\r\n        }\r\n    });\r\n}\r\n\r\nexport function toBase64FromFile(file) {\r\n    return new Promise(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = function () { resolve(reader.result); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\n\r\nexport const checkExistance = function (...ids) {\r\n    for (let i = 0; i < ids.length; i++) {\r\n        if (byId(ids[i]) == null) {\r\n            console.log(\"component with id:\", ids[i], \"does not exist\");\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Number} totalButton \r\n * @param {Number} currentPage \r\n */\r\nexport const createNavButtons = (totalButton, currentPage) => {\r\n    totalButton = Math.ceil(totalButton);\r\n    if (!currentPage) { currentPage = 0 }\r\n    let buttonData = new Array();\r\n    let min = currentPage - 3 < 0 ? 0 : currentPage - 3;\r\n    let max = currentPage + 3 > totalButton ? totalButton : currentPage + 3;\r\n\r\n    if (min != 0) {\r\n        buttonData.push({\r\n            text: 1,\r\n            value: 0\r\n        });\r\n    }\r\n\r\n    for (let index = min; index < max; index++) {\r\n        buttonData.push({\r\n            text: index + 1,\r\n            value: index\r\n        });\r\n    }\r\n\r\n    if (max != totalButton) {\r\n        buttonData.push({\r\n            text: totalButton,\r\n            value: totalButton - 1\r\n        });\r\n    }\r\n\r\n\r\n    return buttonData;\r\n}\r\n\r\n\r\nexport const getDropdownOptionsMonth = () => {\r\n    let options:any[] = [];\r\n    for (let i = 1; i <= 12; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}\r\nexport const getDropdownOptionsYear = (from, to) => {\r\n    let options:any[] = [];\r\n    for (let i = from; i <= to; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}","\nexport enum FieldType {\n\n\tFIELD_TYPE_TEXT = \"FIELD_TYPE_TEXT\",\n\tFIELD_TYPE_IMAGE =\n\t'FIELD_TYPE_IMAGE',\n\tFIELD_TYPE_CURRENCY =\n\t'FIELD_TYPE_CURRENCY',\n\tFIELD_TYPE_NUMBER =\n\t'FIELD_TYPE_NUMBER',\n\tFIELD_TYPE_HIDDEN =\n\t'FIELD_TYPE_HIDDEN',\n\tFIELD_TYPE_COLOR =\n\t'FIELD_TYPE_COLOR',\n\tFIELD_TYPE_CHECKBOX =\n\t'FIELD_TYPE_CHECKBOX',\n\tFIELD_TYPE_FIXED_LIST =\n\t'FIELD_TYPE_FIXED_LIST',\n\tFIELD_TYPE_DYNAMIC_LIST =\n\t'FIELD_TYPE_DYNAMIC_LIST',\n\tFIELD_TYPE_TEXTAREA =\n\t'FIELD_TYPE_TEXTAREA',\n\tFIELD_TYPE_PLAIN_LIST =\n\t'FIELD_TYPE_PLAIN_LIST',\n\tFIELD_TYPE_DATE =\n\t'FIELD_TYPE_DATE',\n\tFIELD_TYPE_TEXTEDITOR = \n\t'FIELD_TYPE_TEXTEDITOR',\n\tFIELD_TYPE_DATETIME=\n\t'FIELD_TYPE_DATETIME',\n\tFIELD_TYPE_DOCUMENT=\n\t'FIELD_TYPE_DOCUMENT',\n}\n\n","import BaseEntity from './BaseEntity';\n\nexport default class ApplicationProfile extends BaseEntity{\n\tname?:string;\n\tappCode?:string;\n\tshortDescription?:string;\n\tabout?:string;\n\twelcomingMessage?:string;\n\taddress?:string;\n\tcontact?:string;\n\twebsite?:string;\n\ticonUrl?:string;\n\tpageIcon?:string;\n\tbackgroundUrl?:string;\n\tfooterIconClass?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\n}\n","import { Component } from 'react';\r\nimport { byId } from '../utils/ComponentUtil';\r\nimport WebResponse from './../models/WebResponse';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport User from './../models/User';\r\nimport Services from './../services/Services';\r\nimport { AuthorityType } from '../models/AuthorityType';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { sendToWebsocket } from './../utils/websockets';\r\n\r\nexport default class BaseComponent extends Component<any, any> {\r\n    parentApp: any;\r\n    authenticated: boolean = true;\r\n    state: any = { updated: new Date() };\r\n    constructor(props: any, authenticated = false) {\r\n        super(props);\r\n        \r\n        this.authenticated = authenticated\r\n        this.state = {\r\n            ...this.state\r\n        }\r\n        this.parentApp = props.mainApp;\r\n    }\r\n    \r\n    validateLoginStatus = () => {\r\n        if (this.authenticated == false) return;\r\n        if (this.isLoggedUserNull()) {\r\n            this.backToLogin();\r\n        }\r\n    }\r\n\r\n    protected sendWebSocket = (url:string, payload:WebRequest) => {\r\n        sendToWebsocket(url, payload);\r\n    }\r\n\r\n    protected setWsUpdateHandler =(handler:Function | undefined) => {\r\n        if (this.parentApp) {\r\n            this.parentApp.setWsUpdateHandler(handler);\r\n        }\r\n    }\r\n    protected resetWsUpdateHandler = () => {\r\n        if (this.parentApp) {\r\n            this.parentApp.resetWsUpdateHandler();\r\n        }\r\n    }\r\n\r\n    getApplicationProfile():ApplicationProfile\r\n    {\r\n        return this.props.applicationProfile == null ? new ApplicationProfile() : this.props.applicationProfile;\r\n    }\r\n\r\n    handleInputChange=(event: any) =>{\r\n        const target = event.target;\r\n        const value = target.type == 'checkbox' ? target.checked : target.value;\r\n        this.setState({ [target.name]: value });\r\n        console.debug(\"input changed: \", target.name, value);\r\n    }\r\n\r\n    focusToActiveField() {\r\n        if (this.state.activeId != null && byId(this.state.activeId) != null) {\r\n            const element = byId(this.state.activeId);\r\n            if (element != null) {\r\n                element.focus();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param {boolean} withProgress \r\n     */\r\n    startLoading(withProgress: boolean) {\r\n        this.parentApp.startLoading(withProgress);\r\n    }\r\n\r\n    endLoading() {\r\n        this.parentApp.endLoading();\r\n    }\r\n    /**\r\n     * api response must be instance of WebResponse\r\n     * @param method \r\n     * @param withProgress \r\n     * @param successCallback \r\n     * @param errorCallback \r\n     * @param params \r\n     */\r\n    doAjax(method: Function, withProgress: boolean, successCallback: Function, errorCallback?: Function, ...params: any ) {\r\n        this.startLoading(withProgress);\r\n\r\n        method(...params).then(function (response:WebResponse) {\r\n            if (successCallback) {\r\n                successCallback(response);\r\n            }\r\n        }).catch(function (e) {\r\n            if (errorCallback) {\r\n                errorCallback(e);\r\n            } else {\r\n                if (typeof (e) == 'string') {\r\n                    alert(\"Operation Failed: \" + e);\r\n                }\r\n                alert(\"resource not found\");\r\n            }\r\n        }).finally(() => {\r\n            this.endLoading();\r\n        })\r\n    }\r\n\r\n    commonAjax(method: Function, successCallback: Function, errorCallback: Function, ...params:any) {\r\n        this.doAjax(method, false, successCallback, errorCallback, ...params);\r\n    }\r\n    commonAjaxWithProgress(method: Function, successCallback: Function, errorCallback: Function, ...params:any) {\r\n        this.doAjax(method, true, successCallback, errorCallback, ...params);\r\n    }\r\n    getLoggedUser():User|undefined {\r\n        const user:User|undefined = this.props.loggedUser;\r\n        if (!user) return undefined;\r\n        user.editPassword = \"^_^\";\r\n        return Object.assign(new User(), user);\r\n    }\r\n    isAdmin = () : boolean => {\r\n        const user = this.getLoggedUser();\r\n        if (!user) return false;\r\n        return user.role == AuthorityType.ROLE_ADMIN;\r\n    }\r\n    isLoggedUserNull(): boolean {\r\n        return false == this.props.loginStatus || null == this.props.loggedUser;\r\n    }\r\n    isUserLoggedIn(): boolean {\r\n        return true == this.props.loginStatus && null != this.props.loggedUser;\r\n    }\r\n    showConfirmation(body:any): Promise<boolean> {\r\n        const app = this;\r\n        return new Promise(function(resolve, reject){\r\n            const onYes = function (e) {\r\n                resolve(true);\r\n            }\r\n            const onNo = function (e) {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlert(\"Confirmation\", body, false, onYes, onNo);\r\n        });\r\n  \r\n    }\r\n    showConfirmationDanger(body: any): Promise<any> {\r\n        const app = this;\r\n        return new Promise(function(resolve, reject){\r\n            const onYes = function (e) {\r\n                resolve(true);\r\n            }\r\n            const onNo = function (e) {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlertError(\"Confirmation\", body, false, onYes, onNo);\r\n        });\r\n\r\n    }\r\n    showInfo(body: any) {\r\n        this.parentApp.showAlert(\"Info\", body, true, function () { });\r\n    }\r\n    showError(body: any) {\r\n       \r\n        this.parentApp.showAlertError(\"Error\", body, true, function () { });\r\n    }\r\n\r\n    backToLogin() {\r\n        if (!this.authenticated || this.props.history == null) {\r\n            return;\r\n        }\r\n        this.props.history.push(\"/login\");\r\n    }\r\n    refresh() {\r\n        this.setState({ updated: new Date() });\r\n    }\r\n\r\n    showCommonErrorAlert = (e:any) => {\r\n        console.error(e);\r\n        \r\n        let message;\r\n        if (e.response && e.response.data ) {\r\n            message = e.response.data.message;\r\n        } else {\r\n            message = e;\r\n        } \r\n        this.showError(\"Operation Failed: \"+message);\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.authenticated == true && this.isLoggedUserNull()) {\r\n            console.debug(typeof this , \"BACK TO LOGIN\");\r\n            this.validateLoginStatus();\r\n        }\r\n    }\r\n\r\n    getServices = () : Services => {\r\n        return this.props.services;\r\n    }\r\n}","\r\nimport React, { useRef, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport { getMenus } from '../../constant/Menus';\r\nimport './Header.css';\r\nimport User from './../../models/User';\r\nimport { baseImageUrl } from './../../constant/Url';\r\nimport Menu from './../../models/settings/Menu';\r\nclass IState {\r\n    showNavLinks: boolean = false;\r\n}\r\nclass Header extends BaseComponent {\r\n    state: IState = new IState();\r\n    buttonToggleNavRef: React.RefObject<HTMLButtonElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    toggleNavLinks = () => {\r\n        this.setState({ showNavLinks: !this.state.showNavLinks });\r\n    }\r\n    onLogout = (e: any) => {\r\n        const app = this;\r\n        app.showConfirmation(\"Logout?\").then(\r\n            function (ok) {\r\n                if (ok) {\r\n                    app.props.performLogout(app.parentApp);\r\n                }\r\n            }\r\n        )\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        if (this.state.showNavLinks && this.buttonToggleNavRef.current) {\r\n            this.buttonToggleNavRef.current.click();\r\n        }\r\n        this.props.setMenu(menu);\r\n\r\n    }\r\n    render() {\r\n        const showNavLinks: boolean = this.state.showNavLinks;\r\n        const menus = getMenus();\r\n        const user = this.getLoggedUser();\r\n        return (\r\n            <div className=\"bg-dark container-fluid\" style={{ position: 'fixed', zIndex: 55, padding: 0, margin: 0 }}>\r\n                <NavBarTop label={this.getApplicationProfile().name} />\r\n                <nav id=\"navbar\" className=\"navbar navbar-expand-lg navbar-dark bg-dark\" style={{ width: '100%' }}>\r\n                    {/* <div className=\"container-fluid\"></div> */}\r\n                    <a id=\"navbar-brand\" className=\"navbar-brand\" href=\"#\">{this.getApplicationProfile().name}</a>\r\n                    <button ref={this.buttonToggleNavRef} onClick={this.toggleNavLinks} className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\r\n                        data-target=\"#navbarToggler\" aria-controls=\"navbarToggler\"\r\n                        aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                        <i className={showNavLinks ? \"fas fa-times\" : \"fas fa-bars\"} />\r\n                    </button>\r\n                    <div className={\"collapse navbar-collapse\"} id=\"navbarToggler\">\r\n                        <ul id=\"navbar-top\" className=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n                            {menus.map(menu => {\r\n                                if (menu == null || (menu.authenticated && !user)) return null;\r\n                                if (menu.userAuthorized && menu.userAuthorized(user) == false) return null;\r\n                                const isActive = this.props.activeMenuCode == menu.code;\r\n                                return (\r\n                                    <li key={\"header-menu-\" + new String(menu.code)} className={\"nav-item \" + (isActive ? \"active nav-active\" : \"nav-inactive\")}>\r\n                                        <Link onClick={() => this.setMenu(menu)} className={\"nav-link  \"}\r\n                                            to={menu.url}><span>{menu.name}</span>\r\n                                        </Link></li>\r\n                                )\r\n                            })}\r\n                        </ul >\r\n                        <form className=\"form-inline my-2 my-lg-0\">\r\n                            <UserIcon setMenuNull={this.props.setMenuNull}\r\n                                onLogout={this.onLogout} user={user} />\r\n                        </form >\r\n                    </div >\r\n                </nav >\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst NavBarTop = (props) => {\r\n    return (\r\n        <div id=\"navbar-brand-top\" style={{ paddingLeft: '0.5rem' }} className=\"container-fluid\">\r\n            <a style={{ fontSize: '15px' }} className=\"text-white navbar-brand\" href=\"#\">\r\n                <strong>{props.label}</strong>\r\n            </a>\r\n        </div>\r\n    );\r\n}\r\nconst UserIcon = (props: { user: User | undefined, setMenuNull(): any, onLogout(e): any }) => {\r\n    if (props.user) {\r\n        return (\r\n            <Fragment>\r\n                <Link onClick={props.setMenuNull} style={{ marginRight: \"5px\" }} className=\"btn btn-light btn-sm my-2 my-sm-0\"\r\n                    to='/settings/user-profile'>\r\n                    <img width=\"20\" src={baseImageUrl() + props.user.profileImage} className=\"rounded rounded-circle\" />\r\n                        &nbsp;{props.user.displayName}\r\n                </Link>\r\n                <a style={{ marginRight: '5px' }} className=\"btn btn-danger btn-sm  my-2 my-sm-0\"\r\n                    onClick={props.onLogout}><i className=\"fas fa-sign-out-alt\"></i>&nbsp;Logout\r\n\t\t\t\t</a>\r\n            </Fragment>);\r\n    }\r\n    return (\r\n\r\n        <Link style={{ marginRight: '5px' }} onClick={props.setMenuNull} className=\"btn btn-sm btn-info my-2 my-sm-0\"\r\n            to='/login'> <i className=\"fas fa-sign-in-alt\"></i>&nbsp;Login\r\n        </Link>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Header))","\r\nimport React, { Component } from 'react';\r\nimport './Spinner.css';\r\nexport default class Spinner extends Component<any, any>{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const innerDivs:JSX.Element[] = new Array<JSX.Element>();\r\n        for (let i = 0; i <= 11; i++) {\r\n            innerDivs.push(<div key={\"spinner-item-\"+i}></div>);\r\n        }\r\n        return (\r\n            <div style={{width:'85px', height:'85px', display:'block'}} className=\"container-fluid text-center\" >\r\n                 <div style={{visibility:this.props.show == false?'hidden':'visible'}} className=\"lds-spinner\">\r\n                  {innerDivs}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nexport default class AnchorWithIcon extends Component<any, any>\r\n{\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className ?? \"btn btn-outline-secondary\";\r\n        if (this.props.to) {\r\n            return <Link {...this.props.attributes} to={this.props.to} style={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName ?\r\n                    <span style={{ marginRight: '5px' }}><i className={this.props.iconClassName} /></span>\r\n                    :\r\n                    null}\r\n                {this.props.children}\r\n            </Link>\r\n        }\r\n        return (\r\n            <a {...this.props.attributes} tyle={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName ?\r\n                    <span style={{ marginRight: '5px' }}><i className={this.props.iconClassName} /></span>\r\n                    :\r\n                    null}\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { RefObject, Component, FormEvent, Fragment, ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport './Login.css';\r\nimport { performLogin } from '../../../redux/actionCreators';\r\nimport Spinner from './../../loader/Spinner';\r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nclass IState {\r\n    loading: boolean = false; username: string = \"\"; editPassword: string = \"\";\r\n}\r\nclass Login extends BaseComponent {\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    login(e: FormEvent) {\r\n        e.preventDefault();\r\n        this.props.performLogin(this.state.username, this.state.editPassword, this);\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"Login\";\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n\r\n        console.debug(\"Login update\");\r\n        console.debug(\"logged in : \", this.props.loginStatus);\r\n        console.debug(\"logged user : \", this.getLoggedUser());\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    updateCredentialProperty = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name: string | null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({ [name]: target.value });\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"Login\" style={{ marginTop: '20px' }} >\r\n                <form name='login' onSubmit={(e) => { this.login(e) }}\r\n                    method='POST' className=\"form-signin\">\r\n                    <div className=\"text-center\">\r\n                        <h2><i className=\"fas fa-user-circle\"></i></h2>\r\n                        <h1 className=\"h3 mb-3 font-weight-normal\">Please sign in</h1>\r\n                    </div>\r\n                    <UsernameField value={this.state.username} onChange={this.updateCredentialProperty} />\r\n                    <PasswordField value={this.state.editPassword} onChange={this.updateCredentialProperty} />\r\n                    {this.state.loading ? <Spinner /> :\r\n\r\n                        <Fragment>\r\n                            <button className=\"btn text-light\" style={{ marginRight: '5px', backgroundColor: 'rgb(9,26,78)' }} type=\"submit\">\r\n                                Sign in\r\n                            </button>\r\n                            <AnchorWithIcon className=\"btn btn-light border border-dark \" to=\"register\" children=\"Register\" />\r\n                        </Fragment>}\r\n                    <input name=\"transport_type\" type=\"hidden\" value=\"rest\" />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst PasswordField = ({ value, onChange }) => {\r\n    return <Fragment>\r\n        <label className=\"sr-only\">Password</label>\r\n        <input name=\"editPassword\" value={value} onChange={onChange} type=\"password\" id=\"inputPassword\" className=\"form-control\"\r\n            placeholder=\"Password\" required />\r\n    </Fragment>\r\n}\r\nconst UsernameField = ({ value, onChange }) => {\r\n    return (<Fragment>\r\n        <label className=\"sr-only\">Username</label>\r\n        <input name=\"username\" value={value} onChange={onChange} type=\"text\" id=\"username\" className=\"form-control\"\r\n            placeholder=\"Username\" required autoFocus />\r\n    </Fragment>)\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogin: (username: string, password: string, app: any) => dispatch(performLogin(username, password, app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Login))","\r\nimport BaseComponent from './../BaseComponent';\r\nimport Menu from '../../models/settings/Menu';\r\nexport default class BaseMainMenus extends BaseComponent {\r\n\r\n    title:string = \"\";\r\n    constructor(props, title:string, authenticated:boolean = false) {\r\n        super(props, authenticated);\r\n        this.title = title;\r\n    }\r\n\r\n    componentDidMount(){\r\n        if (this.authenticated) {\r\n            this.validateLoginStatus();\r\n        }\r\n        document.title = this.title;\r\n        \r\n    }\r\n\r\n}","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseMainMenus from '../../../layout/BaseMainMenus';\r\nimport User from './../../../../models/User';\r\nimport { baseImageUrl } from './../../../../constant/Url';\r\n\r\n\r\nclass DashboardMain extends BaseMainMenus {\r\n    constructor(props: any) {\r\n        super(props, \"Dashboard\", true);\r\n    }\r\n\r\n    render() {\r\n        const user: User | undefined = this.getLoggedUser();\r\n        if (!user) return null;\r\n        return (\r\n            <div  className=\" section-body container-fluid\">\r\n                <h2>Dashboard</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{user.displayName}  </strong>\r\n                    <p />\r\n                    <p className=\"badge badge-dark\">{user.role?.toLowerCase().split(\"_\")[1]}</p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(DashboardMain))","\r\nimport React, { Component } from 'react';\r\ninterface IProps {\r\n    show?:boolean;\r\n    className?:string;\r\n    style?:any;\r\n    onClick?:any;\r\n    iconClassName?:string;\r\n    attributes?:any;\r\n}\r\nexport default class AnchorButton extends Component<IProps, any>\r\n{\r\n    constructor(props:any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className??\"btn btn-outline-secondary\";\r\n        return (\r\n            <a style={this.props.style} {...this.props.attributes} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName?\r\n                <span style={this.props.children?{marginRight:'5px'}:{}}><i className={this.props.iconClassName}/></span>\r\n                :\r\n                null}\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport AnchorButton from '../navigation/AnchorButton';\r\nclass IState {\r\n    show:boolean = true\r\n}\r\nexport default class Modal extends Component<any, IState> {\r\n    state:IState = new IState();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    hideModal = () => {\r\n        this.setState({show:false});\r\n    }\r\n    showModal = () => {\r\n        this.setState({show:true});\r\n    }\r\n    render() {\r\n       if (this.props.show == false) { return null; }\r\n        const title = this.props.title?? \"Title\"; \r\n        if (this.props.toggleable == true && this.state.show == false) {\r\n            return (\r\n                <AnchorButton style={{marginBottom:'10px'}} onClick={this.showModal} iconClassName=\"fas fa-angle-down\" >Show {title}</AnchorButton>\r\n            )\r\n        }\r\n        const props = (({ style, show, footerContent, toggleable, ...props }) => props)(this.props) // remove b and c\r\n        return (\r\n            <div {...props} className=\"modal-content \" style={{...props.style, marginBottom:'10px'}}>\r\n                <div className=\"modal-header\">\r\n                    <h5 className=\"modal-title\">{title}</h5>\r\n                    {this.props.toggleable?\r\n                    <button type=\"button\" className=\"btn btn-sm\" onClick={this.hideModal} aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">\r\n                            <i className='fas fa-times'/>\r\n                        </span>\r\n                    </button>\r\n                    :\r\n                    null}\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent || this.props.showFooter == true?\r\n                <div className=\"modal-footer\">\r\n                    {this.props.footerContent}\r\n                </div>\r\n                :null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","\nexport default class Filter{\n\tlimit? :number = 5; \n\tpage? :number = 0;\n\torderType?:string;\n\torderBy?:string;\n\tcontains?:boolean; \n\texacts?:boolean;\n\tday?:number;\n\tyear?:number;\n\tmonth?:number;\n\tmodule?:string;\n\tfieldsFilter?:{};\n\tmonthTo?:number;\n\tyearTo?:number;\n\tmaxValue?:number;\n\tavailabilityCheck?:boolean;\n\t\n\t//\n\tuseExistingFilterPage?:boolean = false; \n\n}\n","\r\nimport EntityElement from \"./EntityElement\";\r\nimport { FieldType } from \"../FieldType\";\r\nimport HeaderProps from '../HeaderProps'; \r\n\r\nexport default class EntityProperty{\r\n\tgroupNames?:string;\r\n\tentityName?:string;\r\n\talias?:string;\r\n\tfieldNames?:string;\r\n\tidField?:string;\r\n\tdetailFieldName?:string; \r\n\tformInputColumn?:number;\r\n\teditable:boolean = true;\r\n\tcreatable:boolean = true; \r\n\telements:EntityElement[] = new Array();\r\n\tfieldNameList?:string[]; \r\n\twithProgressWhenUpdated:boolean = false;\r\n\r\n\tstatic getEntityElement = (prop: EntityProperty, id:string) :EntityElement|undefined => {\r\n\t\tfor (let i = 0; i < prop.elements.length; i++) {\r\n\t\t\tconst element = prop.elements[i];\r\n\t\t\tif (element.id == id) {\r\n\t\t\t\treturn element;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tstatic getHeaderLabels = (prop:EntityProperty) : HeaderProps[] => {\r\n\t\tconst result:HeaderProps[] = new Array();\r\n\t\tif (prop.elements == undefined) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tconst elements:EntityElement[] = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\r\n\t\t\tconst element = elements[i];\r\n\t\t\tconst header:HeaderProps=  {\r\n\t\t\t\tlabel:element.labelName,\r\n\t\t\t\tvalue:element.id,\r\n\t\t\t\tisDate:element.type == 'date',\r\n\t\t\t\tfilterable: element.filterable\r\n\t\t\t};\r\n\t\t\tresult.push(header);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tstatic getRecordId(record:any, prop:EntityProperty) {\r\n\t\tconst elements = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tconst element = elements[i];\r\n\t\t\tif (element.identity) {\r\n\t\t\t\treturn record[element.id];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic hasTextEditorField = (elements:EntityElement[]) => {\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tif(elements[i].fieldType == FieldType.FIELD_TYPE_TEXTEDITOR) return true;\r\n\t\t\t\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n}\r\n","import React from 'react';\r\nimport EntityProperty from '../models/settings/EntityProperty';\r\nimport EntityElement from '../models/settings/EntityElement';\r\nimport { baseDocumentUrl, baseImageUrl } from '../constant/Url';\r\nimport { FieldType } from '../models/FieldType';\r\nimport { beautifyNominal } from './StringUtil';\r\nexport default class EntityValues {\r\n\tstatic parseValues(object: any, prop: EntityProperty): Array<any> {\r\n\t\tconst result = new Array();\r\n\t\tconst elemnents: EntityElement[] = prop.elements;\r\n\t\tfor (let i = 0; i < elemnents.length; i++) {\r\n\t\t\tconst element = elemnents[i];\r\n\t\t\tconst elementid = element.id;\r\n\t\t\tlet value: any = object[elementid];\r\n\t\t\tif (value == null) {\r\n\t\t\t\tresult.push(value);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tswitch (element.fieldType) {\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DATE:\r\n\t\t\t\t\tvalue = new Date(value).toDateString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DATETIME:\r\n\t\t\t\t\tvalue = new Date(value).toLocaleString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_IMAGE:\r\n\t\t\t\t\tconst imgLink = new String(value).split(\"~\")[0];\r\n\t\t\t\t\tvalue = <img src={baseImageUrl() + imgLink} width=\"50\" height=\"50\" />\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_COLOR:\r\n\t\t\t\t\tvalue = <strong style={{ color: value }} >{value}</strong>\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_NUMBER:\r\n\t\t\t\t\tvalue = beautifyNominal(value);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_TEXTEDITOR:\r\n\t\t\t\t\tvalue = <div dangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t__html: new String(value).length > 100 ?\r\n\t\t\t\t\t\t\t(new String(value).substring(0, 100) + \"...\")\r\n\t\t\t\t\t\t\t: value\r\n\t\t\t\t\t}}></div>;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_CHECKBOX:\r\n\t\t\t\t\tvalue = value == true ? <i>true</i> : <i>false</i>;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DOCUMENT:\r\n\t\t\t\t\tconst name = new String(value).substring(0, 20);\r\n\t\t\t\t\tvalue = name == \"\" ? \"-\" :\r\n\t\t\t\t\t\t(<a target=\"_blank\" href={baseDocumentUrl() + value} >\r\n\t\t\t\t\t\t\t<i className=\"far fa-file\" style={{ marginRight: 5 }} />\r\n\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t</a>)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_FIXED_LIST:\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (element.optionItemName && element.optionItemName != \"\") {\r\n\t\t\t\t\t\tconst valueAsObj = object[elementid];\r\n\t\t\t\t\t\tvalue = valueAsObj[element.optionItemName ?? \"id\"];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalue = object[elementid];\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresult.push(value);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}","\r\nimport React, { Component } from 'react';\r\nimport { uniqueId } from './../../utils/StringUtil';\r\ninterface IProps {\r\n    limit: number,\r\n    totalData: number,\r\n    activePage: number,\r\n    onClick: any\r\n}\r\nexport default class NavigationButtons extends Component<IProps, any> {\r\n    constructor(props: IProps) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const buttonIndexes = generateButtonValues(this.props.limit, this.props.totalData, this.props.activePage);\r\n        if (buttonIndexes.length == 0) { return null }\r\n        const lastIndex = buttonIndexes[buttonIndexes.length - 1];\r\n        const nextPage = this.props.activePage + 1 >= lastIndex  ? 0 : this.props.activePage + 1;\r\n        const previusPage = this.props.activePage - 1 < 0? lastIndex-1 : this.props.activePage - 1;\r\n        return (<div>\r\n            <nav aria-label=\"Page navigation example\">\r\n                <ul className=\"pagination\">\r\n                    <li className=\"page-item\"><a className=\"page-link\" onClick={(e) => this.props.onClick(previusPage)}>Previous</a></li>\r\n                    {buttonIndexes.map((page, i) => {\r\n                        return <li key={\"NAV-\"+uniqueId()} className={\"page-item \"+(page-1 == this.props.activePage?\"active\":\"\")}><a className=\"page-link \" onClick={(e) => this.props.onClick(page - 1)} >{page}</a></li>\r\n                    })}\r\n                    <li className=\"page-item\"><a className=\"page-link\" onClick={(e) => this.props.onClick(nextPage)}>Next</a></li>\r\n                </ul>\r\n            </nav>\r\n        </div>)\r\n    }\r\n}\r\n\r\nconst generateButtonValues = (limit: number, totalData: number, currentPage: number) => {\r\n\r\n    /* DISPLAYED BUTTONS */\r\n    const displayed_buttons: number[] = [];\r\n    const buttonCount = Math.ceil(totalData / limit);\r\n\r\n    // console.debug(\"current page:\", currentPage);\r\n    const min = (currentPage) - 1;\r\n    const max = (currentPage) + 3;\r\n    // const min = (currentPage) - 2;\r\n    // const max = (currentPage) + 2;\r\n\r\n    // console.debug(\"min\", min, \"current page:\", currentPage, \"max\", max);\r\n    if (buttonCount > 1) {\r\n        displayed_buttons.push(1);\r\n    }\r\n    for (let i = min; i <= max; i++) {\r\n        if (i > 1 && i <= buttonCount) {\r\n            (displayed_buttons.push(i));\r\n        }\r\n    }\r\n    if (max < buttonCount) {\r\n        displayed_buttons.push(buttonCount);\r\n    }\r\n    return displayed_buttons;\r\n}\r\n","import React from 'react'\r\nimport BaseComponent from './../../../../BaseComponent';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\n\r\nexport default class BaseField extends BaseComponent {\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n    componentDidMount() {\r\n        this.prepopulateForm();\r\n    }\r\n    prepopulateForm = () => {\r\n\r\n    }\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    getRequiredAttr = () => {\r\n        const requiredAttr = { required: this.getEntityElement().required == true }\r\n        return (\r\n            // null\r\n            requiredAttr\r\n        )\r\n    }\r\n}","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../../../../../constant/Url';\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    singlePreviewData?: string,\r\n    showInputFile: boolean\r\n}\r\n  class FormInputImage extends BaseField {\r\n    state: IState = {\r\n        singlePreviewData: undefined,\r\n        showInputFile: false\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    changeSingleImageData = (e) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            app.setState({ singlePreviewData: data });\r\n        })\r\n    }\r\n    removeImage = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Remove image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveImage();\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveImage = () => {\r\n        if (this.ref.current) {\r\n            this.ref.current.value = null;\r\n        }\r\n        this.setState({ singlePreviewData: undefined, showInputFile: false });\r\n    }\r\n    \r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit){ \r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue){ \r\n            return;\r\n        }\r\n        const fullUrl = baseImageUrl() + defaultValue;\r\n        this.setState({ singlePreviewData: fullUrl, showInputFile:true });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.showInputFile ?\r\n                    <input ref={this.ref}\r\n                        onChange={this.changeSingleImageData} type=\"file\" accept=\"image/*\"\r\n                        //  name={element.id}\r\n                          className='form-control' />\r\n\r\n                    :\r\n                    <Fragment>\r\n                        <p></p>\r\n                        <AnchorButton onClick={(e)=> this.setState({showInputFile:true})} iconClassName=\"fas fa-plus\" className=\"btn btn-info btn-sm\">Add Image</AnchorButton>\r\n                       \r\n                        <input type=\"hidden\" name={element.id} value=\"NULLED\" />\r\n                    </Fragment>\r\n                }\r\n                 <input value={this.state.singlePreviewData} type=\"hidden\" name={element.id} />\r\n                <ImagePreview imageData={this.state.singlePreviewData} />\r\n                <AnchorButton show={this.state.singlePreviewData != undefined} onClick={this.removeImage} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">remove</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputImage))","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../../../../../constant/Url'; \r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    previewData: Map<number, string>,\r\n    inputElements: number[]\r\n}\r\nclass FormInputImageMultiple extends BaseField {\r\n    state: IState = {\r\n        previewData: new Map(),\r\n        inputElements: [1]\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    setImageData = (e, index) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            const previewData = app.state.previewData;\r\n            previewData.set(index, data);\r\n            app.setState({ previewData: previewData });\r\n        })\r\n    }\r\n\r\n    addInputElement = (e) => {\r\n        const element = this.state.inputElements;\r\n        if (element.length == 0) {\r\n            element.push(1);\r\n        } else {\r\n            element.push(element[element.length - 1] + 1);\r\n        }\r\n        this.setState({ inputElements: element });\r\n    }\r\n    removeInputElement = (removedIndex: number) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveInputElement(removedIndex);\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveInputElement = (removedIndex: number) => {\r\n        const previewData = this.state.previewData;\r\n        const element = this.state.inputElements;\r\n        for (let i = 0; i < element.length; i++) {\r\n            const index = element[i];\r\n            if (index == removedIndex) {\r\n                element.splice(i, 1);\r\n                previewData.delete(removedIndex);\r\n            }\r\n        }\r\n        this.setState({ inputElements: element, previewData: previewData });\r\n    }\r\n      \r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue || new String(defaultValue).trim() == \"\") {\r\n            return;\r\n        }\r\n        const previewData: Map<number, string> = this.state.previewData;\r\n        const imageNames: string[] = new String(defaultValue).split(\"~\");\r\n        const inputElements: number[] = new Array<number>();\r\n        for (let i = 0; i < imageNames.length; i++) {\r\n            const imageName: string = imageNames[i];\r\n            previewData.set(i, imageName);\r\n            inputElements.push(i);\r\n        }\r\n        this.setState({ previewData: previewData, inputElements: inputElements });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.inputElements.map(index => {\r\n                    const previewData: string | undefined = this.state.previewData.get(index);\r\n                    const isNull = previewData == undefined || new String(previewData).trim() == \"\";\r\n                    const isBase64 = !isNull && isBase64Image(previewData);\r\n                    return (\r\n                        <Fragment key={\"IMG\"+index+element.id}>\r\n                            {isNull ?\r\n                                <input onChange={(e) => this.setImageData(e, index)} type=\"file\" accept=\"image/*\"\r\n                                    name={element.id} className='form-control' /> : null}\r\n                            {isBase64 ?\r\n                                <div>\r\n                                    <input value={previewData} type=\"hidden\" name={element.id} />\r\n                                    <ImagePreview imageData={previewData} />\r\n                                </div>\r\n                                :\r\n                                !isNull ?\r\n                                    <div>\r\n                                        <input value={previewData} type=\"hidden\" name={element.id} className='form-control' />\r\n                                        <ImagePreview imageData={baseImageUrl() + previewData} />\r\n                                        <p className=\"badge badge-warning\">{previewData}</p>\r\n                                    </div> :\r\n                                    null\r\n                            }\r\n                            <AnchorButton show={this.state.previewData != undefined}\r\n                                onClick={(e: any) => this.removeInputElement(index)} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">\r\n                                remove {index}\r\n                            </AnchorButton>\r\n                        </Fragment>)\r\n                })}\r\n                <p></p>\r\n                <AnchorButton iconClassName=\"fas fa-plus\" onClick={this.addInputElement}>Add</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst isBase64Image = (string?: string) => {\r\n    return string && string.startsWith(\"data:image\");\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputImageMultiple))\r\n","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../../models/WebResponse';\r\nimport BaseComponent from '../../../../BaseComponent'; \r\nimport { uniqueId } from '../../../../../utils/StringUtil';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    inputList: any[],\r\n    singlePreviewData?: string, \r\n}\r\nclass FormInputDropDown extends BaseField {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        inputList: [],\r\n        singlePreviewData: undefined, \r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props );\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    \r\n    inputListLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        this.setState({ inputList: response.entities });\r\n        this.prepopulateForm();\r\n    }\r\n    loadInputList = () => {\r\n        const element = this.getEntityElement();\r\n        // if (element.jsonList &&  element.jsonList != \"\") {\r\n        //     const list = JSON.parse(element.jsonList);\r\n        //     this.inputListLoaded({entities:list})\r\n        //     return;\r\n        // }\r\n\r\n        const code = element.entityReferenceClass;\r\n        this.commonAjax(\r\n            this.masterDataService.loadAllEntities,\r\n            this.inputListLoaded,\r\n            this.showCommonErrorAlert,\r\n            code\r\n        )\r\n    }\r\n\r\n    isNotReady = () => {\r\n        return this.state.inputList.length == 0;\r\n    }\r\n    validateInputType = () => {\r\n        console.debug(\"validateInputType\");\r\n        if (this.isNotReady()) {\r\n            this.loadInputList();\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateInputType();\r\n    }\r\n    componentDidMount() {\r\n        this.validateInputType();\r\n        this.prepopulateForm();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n\r\n        let defaultInputValue = undefined;\r\n\r\n        if (this.state.inputList.length == 0) {\r\n            return;\r\n        }\r\n        const optionValueName = this.getEntityElement().optionValueName;\r\n        if (!optionValueName) return;\r\n        defaultInputValue = recordValue[optionValueName];\r\n\r\n        if (defaultInputValue) {\r\n            this.ref.current.value = defaultInputValue;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        \r\n        const element = this.getEntityElement();\r\n        if (this.isNotReady()) {\r\n            return <div className=\"form-group\">Loading...</div>\r\n        }\r\n\r\n        const options = this.state.inputList;\r\n        return (<select ref={this.ref} className=\"form-control\" name={element.id} >\r\n            {options.map(option => {\r\n                const optionItemValue = element.optionValueName;\r\n                const optionItemName = element.optionItemName;\r\n                if (!optionItemName || !optionItemValue) { return null; }\r\n                return (\r\n                    <option key={\"fid-\"+uniqueId()+\"-\"} value={option[optionItemValue]} >{option[optionItemName]}</option>\r\n                )\r\n            })}\r\n        </select>)\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputDropDown))","\r\n\r\nimport React, { Component, Fragment, MouseEventHandler } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport './TextEditor.css'\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport AnchorWithIcon from '../../../../navigation/AnchorWithIcon';\r\nimport BaseField from './BaseField';\r\nclass IState {\r\n    editMode: boolean = false;\r\n    fieldValue: string = \"\";\r\n    updated: boolean = false;\r\n}\r\nclass FormInputTextEditor extends BaseField {\r\n    masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    contentRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    } \r\n    formatDoc = (sCmd, sValue?) => {\r\n        const oDoc = this.contentRef.current;\r\n        if (!oDoc){\r\n            console.debug(\"oDOc is missing\");\r\n            return;\r\n        }\r\n        console.debug(\"commmand: \", sCmd);\r\n        if (this.validateMode()) { \r\n            const executed =  document.execCommand(sCmd, false, sValue); \r\n            console.debug(\"EXECUTED: \", executed, \" editable: \", oDoc.contentEditable);\r\n            oDoc.focus(); \r\n        }\r\n    }\r\n\r\n    validateMode = () => {\r\n        if (!this.state.editMode) { return true; }\r\n        alert(\"Uncheck \\\"Show HTML\\\".\");\r\n        if (this.contentRef.current) {\r\n            this.contentRef.current.focus();\r\n        }\r\n        return false;\r\n    }\r\n\r\n    setValue = (e) => {\r\n        if (this.contentRef.current) {\r\n            this.setState({fieldValue: this.contentRef.current.innerHTML, updated: true})\r\n        }\r\n       \r\n    }\r\n\r\n    setDocMode = (bToSource) => {\r\n        const oDoc = this.contentRef.current;\r\n        if (!oDoc) return;\r\n        var oContent;\r\n        if (bToSource) {\r\n            oContent = document.createTextNode(oDoc.innerHTML);\r\n            oDoc.innerHTML = \"\";\r\n            var oPre = document.createElement(\"pre\");\r\n            oDoc.contentEditable = \"false\";\r\n            oPre.id = \"sourceText\";\r\n            oPre.contentEditable = \"true\";\r\n            oPre.appendChild(oContent);\r\n            oDoc.appendChild(oPre);\r\n        } else {\r\n            if (document.all) {\r\n                oDoc.innerHTML = oDoc.innerText;\r\n            } else {\r\n                oContent = document.createRange();\r\n                oContent.selectNodeContents(oDoc.firstChild);\r\n                oDoc.innerHTML = oContent.toString();\r\n            }\r\n            oDoc.contentEditable = \"true\";\r\n        }\r\n        oDoc.focus();\r\n    }\r\n\r\n    printDoc = () => {\r\n        if (!this.validateMode()) { return; }\r\n        // var oPrntWin = window.open(\"\", \"_blank\", \"width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes\");\r\n        // oPrntWin.document.open();\r\n        // oPrntWin.document.write(\"<!doctype html><html><head><title>Print<\\/title><\\/head><body onload=\\\"print();\\\">\" + oDoc.innerHTML + \"<\\/body><\\/html>\");\r\n        // oPrntWin.document.close();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.contentRef.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n        this.contentRef.current.innerHTML = recordValue;\r\n        this.setState({fieldValue: recordValue, updated: true});\r\n    }\r\n         \r\n    componentDidUpdate(){\r\n        console.debug(\"component updated\");\r\n    }\r\n\r\n    setEditMode = (mode:boolean) => {\r\n        this.setDocMode(mode);\r\n        this.setState({ editMode: mode});\r\n    }\r\n    paleteCommand = (e:any ) => {\r\n        const anchor:HTMLAnchorElement = e.target as HTMLAnchorElement;\r\n        const commmand = anchor.dataset['command'];\r\n        const value = anchor.dataset['value'];\r\n        if (commmand == 'clean') {\r\n            this.clean();\r\n        } else {\r\n            this.formatDoc(commmand, value);\r\n        }\r\n    }\r\n    clean = () => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Clean content?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                if (app.contentRef.current) {\r\n                    app.contentRef.current.innerHTML = \"\";\r\n                }\r\n            }\r\n        })\r\n    }\r\n    contentOnChange = (e) => {\r\n       this.setState({updated: false});\r\n    } \r\n    render() {\r\n\r\n        const element = this.getEntityElement();\r\n        return (\r\n            <div>\r\n                <input type=\"hidden\" value={this.state.fieldValue} name={element.id} />\r\n                <div id=\"toolBar1\" className=\"input-group\">\r\n                    <FormattingList onChange={this.formatDoc} />\r\n                    <FontList onChange={this.formatDoc} />\r\n                    <FontSizeOption onChange={this.formatDoc} />\r\n                    <FontColorOption onChange={this.formatDoc} />\r\n                    <BackgroundColorOption onChange={this.formatDoc} />\r\n                </div>\r\n                <div id=\"toolBar2\">\r\n                    <i  onMouseDown={(e)=>e.preventDefault()} onClick={this.paleteCommand} data-command=\"clean\" className=\"palete fas fa-broom\"></i>\r\n                    {/* onClick=\"if(validateMode()&&confirm('Are you sure?')){oDoc.innerHTML=sDefTxt};\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQbAD04KTRLYzFRjlldZl9vj1dusY14WYODhpWIbbSVFY6O7IOXw5qbms+wUbCztca0ccS4kdDQjdTLtMrL1O3YitHa7OPcsd/f4PfvrvDv8Pv5xv///////////////////yH5BAEKAB8ALAAAAAAWABYAAAV84CeOZGmeaKqubMteyzK547QoBcFWTm/jgsHq4rhMLoxFIehQQSAWR+Z4IAyaJ0kEgtFoLIzLwRE4oCQWrxoTOTAIhMCZ0tVgMBQKZHAYyFEWEV14eQ8IflhnEHmFDQkAiSkQCI2PDC4QBg+OAJc0ewadNCOgo6anqKkoIQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  className=\"palete fas fa-print \"></i>\r\n                    {/* onClick=\"printDoc();\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oEBxcZFmGboiwAAAAIdEVYdENvbW1lbnQA9syWvwAAAuFJREFUOMvtlUtsjFEUx//n3nn0YdpBh1abRpt4LFqtqkc3jRKkNEIsiIRIBBEhJJpKlIVo4m1RRMKKjQiRMJRUqUdKPT71qpIpiRKPaqdF55tv5vvusZjQTjOlseUkd3Xu/3dPzusC/22wtu2wRn+jG5So/OCDh8ycMJDflehMlkJkVK7KUYN+ufzA/RttH76zaVocDptRxzQtNi3mRWuPc+6cKtlXZ/sddP2uu9uXlmYXZ6Qm8v4Tz8lhF1H+zDQXt7S8oLMXtbF4e8QaFHjj3kbP2MzkktHpiTjp9VH6iHiA+whtAsX5brpwueMGdONdf/2A4M7ukDs1JW662+XkqTkeUoqjKtOjm2h53YFL15pSJ04Zc94wdtibr26fXlC2mzRvBccEbz2kiRFD414tKMlEZbVGT33+qCoHgha81SWYsew0r1uzfNylmtpx80pngQQ91LwVk2JGvGnfvZG6YcYRAT16GFtW5kKKfo1EQLtfh5Q2etT0BIWF+aitq4fDbk+ImYo1OxvGF03waFJQvBCkvDffRyEtxQiFFYgAZTHS0zwAGD7fG5TNnYNTp8/FzvGwJOfmgG7GOx0SAKKgQgDMgKBI0NJGMEImpGDk5+WACEwEd0ywblhGUZ4Hw5OdUekRBLT7DTgdEgxACsIznx8zpmWh7k4rkpJcuHDxCul6MDsmmBXDlWCH2+XozSgBnzsNCEE4euYV4pwCpsWYPW0UHDYBKSWu1NYjENDReqtKjwn2+zvtTc1vMSTB/mvev/WEYSlASsLimcOhOBJxw+N3aP/SjefNL5GePZmpu4kG7OPr1+tOfPyUu3BecWYKcwQcDFmwFKAUo90fhKDInBCAmvqnyMgqUEagQwCoHBDc1rjv9pIlD8IbVkz6qYViIBQGTJPx4k0XpIgEZoRN1Da0cij4VfR0ta3WvBXH/rjdCufv6R2zPgPH/e4pxSBCpeatqPrjNiso203/5s/zA171Mv8+w1LOAAAAAElFTkSuQmCC\"> */}\r\n                    <i  onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"undo\" className=\"palete fas fa-undo\"></i>\r\n                    {/* onClick=\"formatDoc('undo');\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMKADljwliE33mOrpGjuYKl8aezxqPD+7/I19DV3NHa7P///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARR8MlJq7046807TkaYeJJBnES4EeUJvIGapWYAC0CsocQ7SDlWJkAkCA6ToMYWIARGQF3mRQVIEjkkSVLIbSfEwhdRIH4fh/DZMICe3/C4nBQBADs=\" /> */}\r\n                    <i  onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"redo\"  className=\"palete fas fa-redo\"></i>\r\n                    {/* onClick=\"formatDoc('redo');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIHAB1ChDljwl9vj1iE34Kl8aPD+7/I1////yH5BAEKAAcALAAAAAAWABYAAANKeLrc/jDKSesyphi7SiEgsVXZEATDICqBVJjpqWZt9NaEDNbQK1wCQsxlYnxMAImhyDoFAElJasRRvAZVRqqQXUy7Cgx4TC6bswkAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"removeFormat\" className=\"palete fas fa-times\"></i>\r\n                    {/* onClick=\"formatDoc('removeFormat')\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9oECQMCKPI8CIIAAAAIdEVYdENvbW1lbnQA9syWvwAAAuhJREFUOMtjYBgFxAB501ZWBvVaL2nHnlmk6mXCJbF69zU+Hz/9fB5O1lx+bg45qhl8/fYr5it3XrP/YWTUvvvk3VeqGXz70TvbJy8+Wv39+2/Hz19/mGwjZzuTYjALuoBv9jImaXHeyD3H7kU8fPj2ICML8z92dlbtMzdeiG3fco7J08foH1kurkm3E9iw54YvKwuTuom+LPt/BgbWf3//sf37/1/c02cCG1lB8f//f95DZx74MTMzshhoSm6szrQ/a6Ir/Z2RkfEjBxuLYFpDiDi6Af///2ckaHBp7+7wmavP5n76+P2ClrLIYl8H9W36auJCbCxM4szMTJac7Kza////R3H1w2cfWAgafPbqs5g7D95++/P1B4+ECK8tAwMDw/1H7159+/7r7ZcvPz4fOHbzEwMDwx8GBgaGnNatfHZx8zqrJ+4VJBh5CQEGOySEua/v3n7hXmqI8WUGBgYGL3vVG7fuPK3i5GD9/fja7ZsMDAzMG/Ze52mZeSj4yu1XEq/ff7W5dvfVAS1lsXc4Db7z8C3r8p7Qjf///2dnZGxlqJuyr3rPqQd/Hhyu7oSpYWScylDQsd3kzvnH738wMDzj5GBN1VIWW4c3KDon7VOvm7S3paB9u5qsU5/x5KUnlY+eexQbkLNsErK61+++VnAJcfkyMTIwffj0QwZbJDKjcETs1Y8evyd48toz8y/ffzv//vPP4veffxpX77z6l5JewHPu8MqTDAwMDLzyrjb/mZm0JcT5Lj+89+Ybm6zz95oMh7s4XbygN3Sluq4Mj5K8iKMgP4f0////fv77//8nLy+7MCcXmyYDAwODS9jM9tcvPypd35pne3ljdjvj26+H2dhYpuENikgfvQeXNmSl3tqepxXsqhXPyc666s+fv1fMdKR3TK72zpix8nTc7bdfhfkEeVbC9KhbK/9iYWHiErbu6MWbY/7//8/4//9/pgOnH6jGVazvFDRtq2VgiBIZrUTIBgCk+ivHvuEKwAAAAABJRU5ErkJggg==\"> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"bold\" className=\"palete fas fa-bold\"></i>\r\n                    {/* onClick=\"formatDoc('bold');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAInhI+pa+H9mJy0LhdgtrxzDG5WGFVk6aXqyk6Y9kXvKKNuLbb6zgMFADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"italic\" className=\"palete fas fa-italic\"></i>\r\n                    {/* onClick=\"formatDoc('italic');\" src=\"data:image/gif;base64,R0lGODlhFgAWAKEDAAAAAF9vj5WIbf///yH5BAEAAAMALAAAAAAWABYAAAIjnI+py+0Po5x0gXvruEKHrF2BB1YiCWgbMFIYpsbyTNd2UwAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"underline\" className=\"palete fas fa-underline\"></i>\r\n                    {/* onClick=\"formatDoc('underline');\" src=\"data:image/gif;base64,R0lGODlhFgAWAKECAAAAAF9vj////////yH5BAEAAAIALAAAAAAWABYAAAIrlI+py+0Po5zUgAsEzvEeL4Ea15EiJJ5PSqJmuwKBEKgxVuXWtun+DwxCCgA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifyleft\" className=\"palete fas fa-align-left\"></i>\r\n                    {/* onClick=\"formatDoc('justifyleft');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JMGELkGYxo+qzl4nKyXAAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifycenter\" className=\"palete fas fa-align-center\"></i>\r\n                    {/* onClick=\"formatDoc('justifycenter');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIfhI+py+0Po5y02ouz3jL4D4JOGI7kaZ5Bqn4sycVbAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifyright\" className=\"palete fas fa-align-right\"></i>\r\n                    {/* onClick=\"formatDoc('justifyright');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JQGDLkGYxouqzl43JyVgAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"insertorderedlist\" className=\"palete fas fa-list-ol\"></i>\r\n                    {/* onClick=\"formatDoc('insertorderedlist');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIGAAAAADljwliE35GjuaezxtHa7P///////yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKSespwjoRFvggCBUBoTFBeq6QIAysQnRHaEOzyaZ07Lu9lUBnC0UGQU1K52s6n5oEADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"insertonorderedlist\" className=\"palete fas fa-list-ul\"></i>\r\n                    {/* onClick=\"formatDoc('insertunorderedlist');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIGAAAAAB1ChF9vj1iE33mOrqezxv///////yH5BAEAAAcALAAAAAAWABYAAAMyeLrc/jDKSesppNhGRlBAKIZRERBbqm6YtnbfMY7lud64UwiuKnigGQliQuWOyKQykgAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"formatblock\" data-value=\"blockquote\" className=\"palete fas fa-quote-left\"></i>\r\n                    {/* onClick=\"formatDoc('formatblock','blockquote');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQXAC1NqjFRjkBgmT9nqUJnsk9xrFJ7u2R9qmKBt1iGzHmOrm6Sz4OXw3Odz4Cl2ZSnw6KxyqO306K63bG70bTB0rDI3bvI4P///////////////////////////////////yH5BAEKAB8ALAAAAAAWABYAAAVP4CeOZGmeaKqubEs2CekkErvEI1zZuOgYFlakECEZFi0GgTGKEBATFmJAVXweVOoKEQgABB9IQDCmrLpjETrQQlhHjINrTq/b7/i8fp8PAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"outdent\" className=\"palete\">+ Indentation</i>\r\n                    {/* onClick=\"formatDoc('outdent');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIHAAAAADljwliE35GjuaezxtDV3NHa7P///yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKCQG9F2i7u8agQgyK1z2EIBil+TWqEMxhMczsYVJ3e4ahk+sFnAgtxSQDqWw6n5cEADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"indent\" className=\"palete\">- Indentation</i>\r\n                    {/* onClick=\"formatDoc('indent');\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMIAAAAADljwl9vj1iE35GjuaezxtDV3NHa7P///////////////////////////////yH5BAEAAAgALAAAAAAWABYAAAQ7EMlJq704650B/x8gemMpgugwHJNZXodKsO5oqUOgo5KhBwWESyMQsCRDHu9VOyk5TM9zSpFSr9gsJwIAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  className=\"palete fas fa-link\"\r\n                    onClick={(e)=>{\r\n                        var sLnk=prompt('Write the URL here','http:\\/\\/');\r\n                        if(sLnk&&sLnk!=''&&sLnk!='http://'){\r\n                            this.formatDoc('createlink',sLnk);\r\n                        }\r\n                    }}\r\n                    ></i>\r\n                    {/* onClick=\"var sLnk=prompt('Write the URL here','http:\\/\\/');if(sLnk&&sLnk!=''&&sLnk!='http://'){formatDoc('createlink',sLnk)}\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMKAB1ChDRLY19vj3mOrpGjuaezxrCztb/I19Ha7Pv8/f///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARY8MlJq7046827/2BYIQVhHg9pEgVGIklyDEUBy/RlE4FQF4dCj2AQXAiJQDCWQCAEBwIioEMQBgSAFhDAGghGi9XgHAhMNoSZgJkJei33UESv2+/4vD4TAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"cut\" className=\"palete fas fa-cut\"></i>\r\n                    {/* onClick=\"formatDoc('cut');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQSAB1ChBFNsRJTySJYwjljwkxwl19vj1dusYODhl6MnHmOrpqbmpGjuaezxrCztcDCxL/I18rL1P///////////////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAVu4CeOZGmeaKqubDs6TNnEbGNApNG0kbGMi5trwcA9GArXh+FAfBAw5UexUDAQESkRsfhJPwaH4YsEGAAJGisRGAQY7UCC9ZAXBB+74LGCRxIEHwAHdWooDgGJcwpxDisQBQRjIgkDCVlfmZqbmiEAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"copy\" className=\"palete fas fa-copy\" ></i>\r\n                    {/* onClick=\"formatDoc('copy');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQcAB1ChBFNsTRLYyJYwjljwl9vj1iE31iGzF6MnHWX9HOdz5GjuYCl2YKl8ZOt4qezxqK63aK/9KPD+7DI3b/I17LM/MrL1MLY9NHa7OPs++bx/Pv8/f///////////////yH5BAEAAB8ALAAAAAAWABYAAAWG4CeOZGmeaKqubOum1SQ/kPVOW749BeVSus2CgrCxHptLBbOQxCSNCCaF1GUqwQbBd0JGJAyGJJiobE+LnCaDcXAaEoxhQACgNw0FQx9kP+wmaRgYFBQNeAoGihCAJQsCkJAKOhgXEw8BLQYciooHf5o7EA+kC40qBKkAAAGrpy+wsbKzIiEAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"paste\" className=\"palete fas fa-paste\"></i>\r\n                    {/* onClick=\"formatDoc('paste');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQUAD04KTRLY2tXQF9vj414WZWIbXmOrpqbmpGjudClFaezxsa0cb/I1+3YitHa7PrkIPHvbuPs+/fvrvv8/f///////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAWN4CeOZGmeaKqubGsusPvBSyFJjVDs6nJLB0khR4AkBCmfsCGBQAoCwjF5gwquVykSFbwZE+AwIBV0GhFog2EwIDchjwRiQo9E2Fx4XD5R+B0DDAEnBXBhBhN2DgwDAQFjJYVhCQYRfgoIDGiQJAWTCQMRiwwMfgicnVcAAAMOaK+bLAOrtLUyt7i5uiUhADs=\" /> */}\r\n                </div>\r\n                <div onInput={this.contentOnChange} className=\"container-fluid\" ref={this.contentRef} id=\"textBox\" contentEditable=\"true\"><p>Fill content</p></div>\r\n                <p/>\r\n                <AnchorWithIcon show={this.state.updated == false} style={{marginRight:'5px'}} iconClassName=\"fas fa-exclamation-circle\" className=\"btn btn-warning btn-sm\" onClick={this.setValue}>Update Content</AnchorWithIcon>\r\n                <AnchorWithIcon show={this.state.updated == true} style={{marginRight:'5px'}} iconClassName=\"fas fa-check\" className=\"btn btn-primary btn-sm\"  >Content Updated</AnchorWithIcon>\r\n\r\n                <AnchorWithIcon className=\"btn btn-secondary btn-sm\" attributes={{onMouseDown:(e)=>e.preventDefault()}} onClick={(e)=>this.setEditMode(false)} show={this.state.editMode == true} >Hide Html</AnchorWithIcon>\r\n                <AnchorWithIcon className=\"btn btn-secondary btn-sm\" attributes={{onMouseDown:(e)=>e.preventDefault()}} onClick={(e)=>this.setEditMode(true)} show={this.state.editMode == false} >Show Html</AnchorWithIcon>\r\n            </div>\r\n             \r\n        )\r\n    }\r\n}\r\nconst FontSizeOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\"\r\n            onChange={\r\n                (e) => {\r\n                    const t = e.target;\r\n                    props.onChange(\"fontsize\", t.value);\r\n                    t.value = \"-\";\r\n                }}>\r\n            {/* onChange=\"formatDoc('fontsize',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value =\"-\" className=\"heading\" selected>- size -</option>\r\n            <option value=\"1\">Very small</option>\r\n            <option value=\"2\">A bit small</option>\r\n            <option value=\"3\">Normal</option>\r\n            <option value=\"4\">Medium-large</option>\r\n            <option value=\"5\">Big</option>\r\n            <option value=\"6\">Very big</option>\r\n            <option value=\"7\">Maximum</option>\r\n        </select>\r\n    )\r\n}\r\nconst BackgroundColorOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\"\r\n            onChange={\r\n                (e) => {\r\n                    const t = e.target;\r\n                    props.onChange(\"backcolor\", t.value);\r\n                    t.value = \"-\";\r\n                }}>\r\n            {/* onChange=\"formatDoc('backcolor',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value=\"-\" className=\"heading\" selected>- background -</option>\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"black\">Black</option>\r\n        </select>\r\n    )\r\n}\r\nconst FontColorOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\" onChange={\r\n            (e) => {\r\n                const t = e.target;\r\n                props.onChange(\"forecolor\", t.value);\r\n                t.value = \"-\";\r\n            }\r\n        }>\r\n            {/* onChange=\"formatDoc('forecolor',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option className=\"heading\" value=\"-\" selected>- color -</option>\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"blue\">Blue</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"black\">Black</option>\r\n        </select>\r\n    )\r\n}\r\nconst FormattingList = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\" onChange={\r\n            (e) => {\r\n                const t = e.target;\r\n                props.onChange(\"formatblock\", t.value);\r\n                t.value = \"-\";\r\n            }\r\n        }>\r\n            {/* onChange=\"formatDoc('formatblock',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value=\"-\" selected>- formatting -</option>\r\n            <option value=\"h1\">Title 1 &lt;h1&gt;</option>\r\n            <option value=\"h2\">Title 2 &lt;h2&gt;</option>\r\n            <option value=\"h3\">Title 3 &lt;h3&gt;</option>\r\n            <option value=\"h4\">Title 4 &lt;h4&gt;</option>\r\n            <option value=\"h5\">Title 5 &lt;h5&gt;</option>\r\n            <option value=\"h6\">Subtitle &lt;h6&gt;</option>\r\n            <option value=\"p\">Paragraph &lt;p&gt;</option>\r\n            <option value=\"pre\">Preformatted &lt;pre&gt;</option>\r\n        </select>\r\n    )\r\n}\r\nconst FontList = (props: { onChange: Function }) => {\r\n    return (<select className=\"form-control\" onChange={\r\n        (e) => {\r\n            const t = e.target;\r\n            props.onChange(\"fontname\", t.value);\r\n            t.value = \"-\";\r\n        }\r\n    }>\r\n        {/* onChange=\"formatDoc('fontname',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n        <option value=\"-\" className=\"heading\" selected>- font -</option>\r\n        <option value=\"Arial\">Arial</option>\r\n        <option value=\"Arial Black\">Arial Black</option>\r\n        <option value=\"Courier New\">Courier New</option>\r\n        <option value=\"Times New Roman\">Times New Roman</option>\r\n    </select>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputTextEditor))","import React, { Component, Fragment }  from 'react';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport BaseField from './BaseField';\r\n\r\n\r\nexport default class FormInputCheckbox extends BaseField {\r\n    state = {\r\n        checked: false\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    prepopulateForm = () => {\r\n         \r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        \r\n        if (!recordValue) return;\r\n        \r\n        this.setState({ checked: recordValue == true })\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n        const checked: boolean = this.state.checked;\r\n        return (\r\n            <Fragment>\r\n                <input type=\"hidden\" name={element.id} value={checked ? 'true' : 'false'} />\r\n                <div className=\"btn-group\">\r\n                    <a className={checked?\"btn btn-dark\":\"btn btn-light\"} onClick={(e) => this.setState({ checked: true })} >Yes</a>\r\n                    <a className={!checked?\"btn btn-dark\":\"btn btn-light\"} onClick={(e) => this.setState({ checked: false })} >No</a>\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n}\r\n","import { join } from \"path\";\r\n\r\nexport const MONTHS = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\"\r\n]\r\n\r\nconst leapMonths = [ 31, (  29  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\nconst regularMonths = [ 31, (  28  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\n/**\r\n * \r\n * @param {Number} month starts at 0\r\n */\r\nexport const getMonthDays = (month:number) : number=> {\r\n    if(new Date().getFullYear() % 4 == 0){\r\n        return leapMonths[month];\r\n    }\r\n    return regularMonths[month];\r\n}\r\n \r\nexport const getCurrentMMYY = () => {\r\n    return [new Date().getMonth() + 1, new Date().getFullYear()];\r\n}\r\n\r\nexport const getInputReadableDate = (date:Date) :string => {\r\n    const year = date.getFullYear();\r\n\r\n    const arr = [year, twoDigits(date.getMonth()+1), twoDigits(date.getDate())];\r\n    return arr.join(\"-\");\r\n}\r\nexport function addDays(date:Date, days:number) :Date{\r\n    const result:Date = new Date(date);\r\n    result.setDate(result.getDate() + days);\r\n    return result;\r\n  }\r\n  export const getDiffDays = (a:Date, b:Date) : number => {\r\n    // Discard the time and time-zone information.\r\n\r\n    console.debug(\"DIFF DATE \",a,\" vs \", b);\r\n    const _MS_PER_DAY = 1000 * 60 * 60 * 24;\r\n    const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\r\n    const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate()); \r\n    return Math.floor((utc2 - utc1) / _MS_PER_DAY);\r\n}\r\nconst twoDigits = (value:number) :string => {\r\n    if (value >= 10) {\r\n        return   value.toString();\r\n    }\r\n    return \"0\"+value;\r\n}\r\n\r\nexport const timerString = (inputSeconds:number ) => {\r\n    let hour = 0;\r\n    let minutes:number = 0;\r\n    let seconds = 0;\r\n    let totalSeconds = inputSeconds;\r\n    if (totalSeconds >= 3600) {\r\n        hour = totalSeconds/ 3600;\r\n        totalSeconds = totalSeconds % 3600;\r\n    }\r\n    if (totalSeconds >= 60) {\r\n        minutes = totalSeconds/60;\r\n        totalSeconds = totalSeconds%60;\r\n    }\r\n    seconds = totalSeconds; \r\n\r\n    return  twoDigits(hour)+\":\"+twoDigits(Math.floor(minutes))+\":\"+twoDigits(seconds);\r\n}\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport { FieldType } from '../../../../../models/FieldType';\r\nimport { getInputReadableDate } from '../../../../../utils/DateUtil';\r\nimport BaseField from './BaseField';\r\n\r\nexport default class FormInputCommon extends BaseField {\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const element = this.getEntityElement();\r\n        const fieldName = element.id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (undefined == recordValue){\r\n            console.debug(fieldName, \" is undefined\", this.props.recordToEdit, this.props.recordToEdit[fieldName]);\r\n            return;\r\n        }\r\n\r\n        const fieldType: FieldType = element.fieldType;\r\n        let defaultInputValue: any = undefined;\r\n        switch (fieldType) {\r\n            case FieldType.FIELD_TYPE_DATE:\r\n                const dateObj = new Date(recordValue);\r\n                if (!dateObj) { break }\r\n                defaultInputValue = getInputReadableDate(dateObj);\r\n                break;\r\n            case FieldType.FIELD_TYPE_NUMBER:\r\n                defaultInputValue = new String(recordValue);\r\n                break;\r\n            default:\r\n                defaultInputValue = recordValue;\r\n                break;\r\n        }\r\n        if (defaultInputValue) {\r\n\r\n            if (element.optionItemName && element.optionItemName != \"\") {\r\n                const valueAsObj = defaultInputValue;\r\n                this.ref.current.value = valueAsObj[element.optionItemName ?? \"id\"];\r\n            } else {\r\n                this.ref.current.value = defaultInputValue;\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        const element = this.getEntityElement();\r\n        const requiredAttr = this.getRequiredAttr();\r\n        if (element.identity == true || element.editable == false) {\r\n            return (<input {...requiredAttr} value=\"Generated\" ref={this.ref} className=\"form-control\" name={element.id} disabled />\r\n            )\r\n        }\r\n        let input = <p>{element.fieldType}</p>;\r\n        switch (element.fieldType) {\r\n            case FieldType.FIELD_TYPE_PLAIN_LIST:\r\n                input = (\r\n                    <select  {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} >\r\n                        {element.plainListValues.map((value, i) => {\r\n                            return (\r\n                                <option key={\"s-\" + element.id + '-o-' + i} value={value}>{value}</option>\r\n                            )\r\n                        })}\r\n                    </select>\r\n                )\r\n                break;\r\n            case FieldType.FIELD_TYPE_TEXTAREA:\r\n                input = <textarea {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n                break;\r\n            default:\r\n                input = <input type={element.type} {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n\r\n        }\r\n        return input;\r\n\r\n    }\r\n}","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../../models/WebResponse';\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport { uniqueId } from '../../../../../utils/StringUtil';\r\nimport BaseField from './BaseField';\r\nimport AnchorWithIcon from './../../../../navigation/AnchorWithIcon';\r\nimport WebRequest from './../../../../../models/WebRequest';\r\nclass IState {\r\n    inputList: any[] = [];\r\n    searchValue: string = \"\"\r\n}\r\nclass FormInputDropDownDynamic extends BaseField {\r\n    masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    ref: React.RefObject<any> = React.createRef();\r\n    inputRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n\r\n    inputListLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            throw new Error(this.getEntityElement().labelName+\" Not found\");\r\n        }\r\n        this.setState({ inputList: response.entities }, ()=> {\r\n            if(this.inputRef.current) {\r\n                this.inputRef.current.focus();\r\n            }\r\n        });\r\n    }\r\n    loadInputList = () => {\r\n        const element = this.getEntityElement();\r\n\r\n        const code = element.entityReferenceClass;\r\n        const searchKey = element.optionItemName;\r\n        if (!searchKey)  { return; }\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                limit: 0, page: 0,\r\n                fieldsFilter: {\r\n                    [searchKey]:this.inputRef.current?.innerHTML\r\n                }\r\n            }\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntities,\r\n            this.inputListLoaded,\r\n            this.showCommonErrorAlert,\r\n            request\r\n        )\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n        this.setState({inputList:[recordValue], searchValue: \"\"} , ()=>{\r\n            let defaultInputValue = undefined;\r\n            const optionValueName = this.getEntityElement().optionValueName;\r\n            if (!optionValueName) return;\r\n            defaultInputValue = recordValue[optionValueName]; \r\n            if (defaultInputValue) {\r\n                this.ref.current.value = defaultInputValue;\r\n            }\r\n        });\r\n    }\r\n\r\n    search = (event) => {\r\n        if(event.keyCode == 13) {\r\n            if (this.inputRef.current) {\r\n                const div = this.inputRef.current;\r\n                div.innerHTML = new String(div.innerText).trim();\r\n            }\r\n            event.preventDefault();\r\n            this.loadInputList();\r\n            return false;\r\n          }\r\n    }\r\n\r\n    render() {\r\n        const element = this.getEntityElement();\r\n        const optionItemValue = element.optionValueName;\r\n        const optionItemName = element.optionItemName;\r\n        const options = this.state.inputList;\r\n        console.debug(\"options: \", options);\r\n        const placeholder:string =   element.entityReferenceClass + \" \"+ optionItemName;\r\n        return (\r\n            <div>\r\n                <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-append\">\r\n                        <span className=\"input-group-text\">{placeholder}</span>\r\n                    </div>\r\n                    <div onKeyDown={this.search} ref={this.inputRef} contentEditable={true} className=\"form-control\" ></div>\r\n                   \r\n                    <div className=\"input-group-append\">\r\n                        <AnchorWithIcon onClick={this.loadInputList} className=\"btn btn-secondary\" children=\"Search\"/>\r\n                        <AnchorWithIcon show={this.props.recordToEdit != undefined} onClick={this.prepopulateForm} iconClassName=\"fas fa-sync-alt\" className=\"btn btn-secondary\"/>\r\n          \r\n                    </div>\r\n                </div>\r\n                <select  {...this.getRequiredAttr()} ref={this.ref} className=\"form-control\" name={element.id} >\r\n                    {options.map(option => {\r\n                        if (!optionItemName || !optionItemValue) { return null; }\r\n                        return (\r\n                            <option key={\"fid-\" + uniqueId() + \"-\"} value={option[optionItemValue]} >{option[optionItemName]}</option>\r\n                        )\r\n                    })}\r\n                </select>\r\n                  </div>)\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputDropDownDynamic))","\r\nimport React, { Component } from 'react';\r\ninterface Props {\r\n    orientation?:string,\r\n    show?:boolean,\r\n    children:any,\r\n    label?:any,\r\n    className?:string,\r\n}\r\nexport default class FormGroup extends Component<Props, any>\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (false == this.props.show) return null;\r\n        const orientation = this.props.orientation == 'vertical' ? 'vertical' : 'horizontal';\r\n        return (\r\n            <div className={\"form-group \"+ this.props.className+ \" \" + (orientation == 'vertical' ? '' : 'row')}>\r\n                <label className={(orientation == 'vertical' ? '' : 'col-sm-3')}><strong>{this.props.label ? this.props.label : null}</strong></label>\r\n                <div className={(orientation == 'vertical' ? '' : 'col-sm-9')}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\nimport React, { Fragment, Component, ChangeEvent } from 'react';\r\nimport { getAttachmentInfo, toBase64v2 } from '../../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport { baseDocumentUrl } from '../../../../../constant/Url';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport BaseField from './BaseField';\r\nimport AttachmentInfo from './../../../../../models/AttachmentInfo';\r\nimport AnchorWithIcon from './../../../../navigation/AnchorWithIcon';\r\ninterface IState {\r\n    attachmentInfo?: AttachmentInfo,\r\n    showInputFile: boolean\r\n}\r\nclass FormInputDocument extends BaseField {\r\n    state: IState = {\r\n        attachmentInfo: undefined,\r\n        showInputFile: false\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    changeFile = (e: ChangeEvent) => {\r\n\r\n        getAttachmentInfo(e.target as HTMLInputElement).then((attachment: AttachmentInfo) => {\r\n            this.setState({ attachmentInfo: attachment });\r\n        })\r\n    }\r\n    remove = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Remove Document?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemove();\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemove = () => {\r\n        if (this.ref.current) {\r\n            this.ref.current.value = null;\r\n        }\r\n        this.setState({ singlePreviewData: undefined, showInputFile: false });\r\n    }\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue) {\r\n            return;\r\n        }\r\n        \r\n        const attachmentInfo = AttachmentInfo.instance(defaultValue, defaultValue);\r\n        this.setState({ attachmentInfo: attachmentInfo, showInputFile: true });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.showInputFile ?\r\n                    <input ref={this.ref}\r\n                        onChange={this.changeFile} type=\"file\" className='form-control' />\r\n\r\n                    :\r\n                    <Fragment>\r\n                        <p></p>\r\n                        <AnchorButton onClick={(e) => this.setState({ showInputFile: true })} iconClassName=\"fas fa-plus\" className=\"btn btn-info btn-sm\">\r\n                            Add Document\r\n                        </AnchorButton>\r\n                        <input type=\"hidden\" name={element.id} value=\"NULLED\" />\r\n                    </Fragment>\r\n                }\r\n                {this.state.attachmentInfo ?\r\n                    <Fragment>\r\n                        <input value={this.state.attachmentInfo.url} type=\"hidden\" name={element.id} />\r\n                        <input value={this.state.attachmentInfo.name} type=\"hidden\" name={element.id+\"-attachment-info\"} />\r\n                    </Fragment>\r\n                    : null}\r\n                <FilePreview data={this.state.attachmentInfo} />\r\n                <AnchorButton show={this.state.attachmentInfo != undefined} onClick={this.remove} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">remove</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst FilePreview = (props: { data?: AttachmentInfo }) => {\r\n    if (!props.data) return null;\r\n    const href = props.data.url ? props.data.url : baseDocumentUrl() + props.data.name;\r\n    return (\r\n        <a href={href} className=\"btn btn-outline-dark btn-sm\" target=\"_blank\" >\r\n            {props.data.name}\r\n        </a>\r\n    )\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputDocument))","\r\n\r\nimport React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport EntityElement from '../../../../models/settings/EntityElement';\r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport FormInputImage from './fields/FormInputImage';\r\nimport FormInputImageMultiple from './fields/FormInputImageMultiple';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport FormInputDropDown from './fields/FormInputDropDown';\r\nimport FormInputTextEditor from './fields/FormInputTextEditor';\r\nimport FormInputCheckbox from './fields/FormInputCheckBox';\r\nimport FormInputCommon from './fields/FormInputCoomon';\r\nimport FormInputDropDownDynamic from './fields/FormInputDropDownDynamic';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport FormInputDocument from './fields/FormInputDocument';\r\n\r\nclass FormInputField extends BaseComponent {\r\n\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    render() {\r\n        const element = this.getEntityElement();\r\n\r\n        let input:JSX.Element  = <p>{element.fieldType}</p>;\r\n        switch (element.fieldType) {\r\n            case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n                input = <FormInputDropDownDynamic recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                input = <FormInputDropDown recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_TEXTEDITOR:\r\n                input = <FormInputTextEditor recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n\r\n            case FieldType.FIELD_TYPE_IMAGE:\r\n                input = element.multiple ?\r\n                    <FormInputImageMultiple recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    :\r\n                    <FormInputImage recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_DOCUMENT:\r\n                input = <FormInputDocument recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_CHECKBOX:\r\n                input = <FormInputCheckbox recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_PLAIN_LIST:\r\n            case FieldType.FIELD_TYPE_TEXTAREA:\r\n            default:\r\n                input = <FormInputCommon recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n        }\r\n        const formLabel = <span>{element.labelName} \r\n        {element.editable && element.required?<i className=\"text-danger\">*</i>:null}</span>\r\n       return  <FormGroup orientation='vertical' label={formLabel}>\r\n                { input}\r\n            </FormGroup>\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputField))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Modal from '../../../container/Modal';\r\nimport EntityProperty from '../../../../models/settings/EntityProperty';\r\nimport EntityElement from '../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport FormInputField from './FormInputField';\r\nimport AttachmentInfo from './../../../../models/AttachmentInfo';\r\n\r\nclass MasterDataForm extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    editMode: boolean = false;\r\n    recordToEdit?: {} = undefined;\r\n    formRef: React.RefObject<HTMLFormElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        if (props.recordToEdit) {\r\n            this.editMode = true;\r\n            this.recordToEdit = props.recordToEdit;\r\n        }\r\n    }\r\n\r\n    getEntityProperty(): EntityProperty {\r\n        return this.props.entityProperty;\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.getEntityProperty().editable == false || this.getEntityProperty().creatable == false) {\r\n            this.props.onClose();\r\n        }\r\n    }\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        if (!this.formRef.current) return;\r\n\r\n        const form = this.formRef.current, app = this;\r\n        this.showConfirmation(\"Save data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.submit(form) }\r\n            });\r\n    }\r\n    getEntityElement(key: string): EntityElement | undefined {\r\n        return EntityProperty.getEntityElement(this.getEntityProperty(), key);\r\n    }\r\n    submit = (form: HTMLFormElement) => {\r\n        const formData: FormData = new FormData(form);\r\n        const object: {} = {};\r\n        const promises: Promise<any>[] = new Array();\r\n        const nulledFields: any[] = [];\r\n        let withRealtimeProgress: boolean = false;\r\n\r\n        formData.forEach((value, key) => {\r\n            console.debug(\"Form data \", key);\r\n            if (!object[key]) {\r\n                object[key] = new Array();\r\n            }\r\n            const element: EntityElement | undefined = this.getEntityElement(key);\r\n            if (!element) return false;\r\n            switch (element.fieldType) {\r\n                case FieldType.FIELD_TYPE_CHECKBOX:\r\n                    object[key].push(value == \"true\");\r\n                    break;\r\n                case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n                case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                    const valueAttr = element.optionValueName;\r\n                    if (valueAttr) {\r\n                        object[key].push({ [valueAttr]: value })\r\n                    }\r\n                    break;\r\n                case FieldType.FIELD_TYPE_DOCUMENT:\r\n                    console.debug(key, \" is DOCUMENT\");\r\n                    if (value == \"NULLED\") {\r\n                        console.debug(\"NULLED VALUE ADDED: \", key);\r\n                        nulledFields.push(key);\r\n                    } else {\r\n                        const fileName = formData.get(key+'-attachment-info');\r\n                        if (fileName && new String(value).startsWith(\"data:\")) {\r\n                            withRealtimeProgress = true;\r\n                            const attachmentInfo:AttachmentInfo =   AttachmentInfo.instance(fileName, new String(value).toString());\r\n                            object[\"attachmentInfo\"] = [(attachmentInfo)];\r\n                            object[key].push(fileName);\r\n                        }else {\r\n                            object[key].push(value);\r\n                        }\r\n                    }\r\n                    break;\r\n                case FieldType.FIELD_TYPE_IMAGE:\r\n                    console.debug(key, \" is IMAGE\");\r\n                    if (value == \"NULLED\") {\r\n                        nulledFields.push(key);\r\n                    } else {\r\n                        if (new String(value).startsWith(\"data:image\")) {\r\n                            withRealtimeProgress = true;\r\n                        }\r\n                        object[key].push(value);\r\n                    }\r\n                    break;\r\n                default:\r\n                    object[key].push(value);\r\n                    break;\r\n            }\r\n            return true;\r\n\r\n        });\r\n        Promise.all(promises).then((val) => {\r\n            const objectPayload = this.generateRequestPayload(object, nulledFields);\r\n            console.debug(\"Record object to save: \", objectPayload, \"realtimeProgress: \", withRealtimeProgress);\r\n            this.ajaxSubmit(objectPayload, withRealtimeProgress == true);\r\n        });\r\n\r\n    }\r\n\r\n    generateRequestPayload = (rawObject: {}, nulledFields: any[]): {} => {\r\n        const result: { nulledFields: Array<any> } = this.editMode && this.recordToEdit ?\r\n            { ...this.recordToEdit, nulledFields: nulledFields } :\r\n            { nulledFields: new Array() };\r\n        for (const key in rawObject) {\r\n            const element: any[] = rawObject[key];\r\n            console.debug(key, \" length: \", element.length);\r\n            if (element.length == 1) {\r\n                result[key] = element[0];\r\n            } else if (element.length > 1) {\r\n                result[key] = element.join(\"~\");\r\n            }\r\n        }\r\n        result.nulledFields = nulledFields;\r\n        return result;\r\n    }\r\n\r\n    ajaxSubmit = (object: any, realtimeProgress: boolean) => {\r\n        // console.debug(\"object: \",object);\r\n        // return;\r\n        if (this.getEntityProperty().withProgressWhenUpdated == true || realtimeProgress) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.save, this.recordSaved, this.showCommonErrorAlert,\r\n                this.getEntityProperty().entityName, object, this.editMode\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.masterDataService.save, this.recordSaved, this.showCommonErrorAlert,\r\n                this.getEntityProperty().entityName, object, this.editMode\r\n            )\r\n        }\r\n    }\r\n    recordSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Record saved\");\r\n    }\r\n    render() {\r\n        const entityProperty: EntityProperty = this.getEntityProperty();\r\n\r\n        const editModeStr = this.editMode ? <span className=\"badge badge-warning\">Edit Mode</span> : \"\"\r\n        return (\r\n            <div id=\"MasterDataForm\" >\r\n                <AnchorButton style={{ marginBottom: '5px' }} onClick={this.props.onClose} iconClassName=\"fas fa-angle-left\">Back</AnchorButton>\r\n                <form ref={this.formRef} onSubmit={this.onSubmit} id=\"record-form\">\r\n                    <Modal title={<span>{entityProperty.alias} Record Form {editModeStr}</span>} footerContent={<SubmitReset />}>\r\n                        <InputFields app={this.parentApp} recordToEdit={this.recordToEdit} entityProperty={entityProperty} />\r\n                    </Modal>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst SubmitReset = (props) => {\r\n    return (\r\n        <div className=\"btn-group\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n            <input type=\"reset\" className=\"btn btn-warning\" />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst InputFields = (props: { app: any, entityProperty: EntityProperty, recordToEdit: {} | undefined }) => {\r\n    const elements: EntityElement[] = props.entityProperty.elements;\r\n    const groupedElements: Array<Array<EntityElement>> = new Array();\r\n    let counter: number = 0;\r\n    const hasTextEditor = EntityProperty.hasTextEditorField(elements);\r\n    groupedElements.push(new Array());\r\n    for (let i = 0; i < elements.length; i++) {\r\n        const element = elements[i];\r\n        if (!hasTextEditor && i > 0 && i % 5 == 0) {\r\n            counter++;\r\n            groupedElements.push(new Array());\r\n        }\r\n        groupedElements[counter].push(element);\r\n    }\r\n    return (\r\n        <div className=\"row\">\r\n            {groupedElements.map((elements, ei) => {\r\n                return (\r\n                    <div key={\"GROUPED_ELEMENT_\" + ei} className={hasTextEditor ? \"col-lg-12\" : \"col-lg-6\"}>\r\n                        {elements.map(element => {\r\n                            const key = \"form-input-for-\" + props.entityProperty.entityName + \"-\" + element.id;\r\n                            return <FormInputField key={key} recordToEdit={props.recordToEdit} entityElement={element} />\r\n                        })}\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(connect(mapCommonUserStateToProps)(MasterDataForm))","import React, { Component } from 'react'\r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\n\r\nclass ExternalEditForm extends Component<{delete(e):any, record: any, entityProperty: EntityProperty, show?: boolean }, any>{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const props = this.props;\r\n        if (props.show == false) return null;\r\n        let link = \"\";\r\n        let btnClassName = \"btn btn-dark btn-sm\";\r\n        let iconClassName = \"fas fa-edit\";\r\n        const entityName = props.entityProperty.entityName;\r\n        if (entityName == 'quiz') {\r\n            link = \"/quizmanagement/detail/\" + props.record.id;\r\n        } else if (entityName == \"quizhistory\") {\r\n            link = \"/quiz/history/\" + props.record.id;\r\n            return (\r\n                <div style={{width:'150px'}}>\r\n                <AnchorWithIcon className={btnClassName} iconClassName={iconClassName} to={link} attributes={{ target: \"_blank\" }} />\r\n                <AnchorButton onClick={props.delete} className=\"btn btn-danger btn-sm\" iconClassName=\"fas fa-times\"></AnchorButton>\r\n                </div>\r\n            )\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n\r\n        return <AnchorWithIcon className={btnClassName} iconClassName={iconClassName} to={link} attributes={{ target: \"_blank\" }} />\r\n    }\r\n}\r\nexport default ExternalEditForm;","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport ExternalEditForm from './ExternalEditForm';\r\n\r\nclass EditDeleteAction extends BaseComponent {\r\n    masterDataService:MasterDataService;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    delete = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete record?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                app.doDelete();\r\n            }\r\n        });\r\n    }\r\n    doDelete = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n        if (entityProperty.withProgressWhenUpdated) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.delete,\r\n                this.recordDeleted,\r\n                this.showCommonErrorAlert,\r\n                entityProperty.entityName, recordId\r\n            )\r\n        } else { \r\n            this.commonAjax(\r\n                this.masterDataService.delete,\r\n                this.recordDeleted,\r\n                this.showCommonErrorAlert,\r\n                entityProperty.entityName, recordId\r\n            )\r\n        }\r\n    }\r\n    getRecordById = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n     \r\n        this.commonAjax(\r\n            this.masterDataService.getById,\r\n            this.recordLoaded,\r\n            this.showCommonErrorAlert,\r\n            entityProperty.entityName,\r\n            recordId\r\n        );\r\n    }\r\n    recordLoaded = (response:WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0){\r\n            throw new Error(\"Record not found\");\r\n        }\r\n        if(this.props.showEditForm) {\r\n            this.props.showEditForm(response);\r\n        }\r\n    }\r\n    recordDeleted = (response:WebResponse) => {\r\n        this.showInfo(\"Record deleted\");\r\n        this.props.reload();\r\n    }\r\n    render() {\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        \r\n        if (this.props.show == false) return null;\r\n        let additionalButton:JSX.Element =  (\r\n        <ExternalEditForm delete={this.delete} record={this.props.record} entityProperty={entityProperty}  />\r\n        ) \r\n        if (entityProperty.editable == false) {\r\n            return  additionalButton;\r\n        }\r\n        return (\r\n            <div className=\"btn-group\">\r\n                {additionalButton}\r\n                <AnchorButton onClick={this.getRecordById} iconClassName=\"fas fa-edit\" className=\"btn btn-warning btn-sm\"></AnchorButton>\r\n                <AnchorButton onClick={this.delete} className=\"btn btn-danger btn-sm\" iconClassName=\"fas fa-times\"></AnchorButton>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditDeleteAction))","\r\nimport React, { Component, Fragment } from 'react';\r\nimport HeaderProps from './../../../models/HeaderProps';\r\nexport default class DataTableHeader extends Component<{fieldsFilter:any, orderButtonOnClick(e:any):void, headerProps: HeaderProps[], filterOnChange(e:any):void}, any>\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render(){\r\n       \r\n        const props = this.props;\r\n        const headerProps: HeaderProps[] = props.headerProps;\r\n        const fieldsFilter = props.fieldsFilter;\r\n        return (<thead>\r\n            <tr>\r\n                <th>No</th>\r\n                {headerProps.map((headerProp, i) => {\r\n                    const isDate = headerProp.isDate;\r\n                    const headerName = headerProp.value;\r\n                    if (!headerProp.filterable) {\r\n                        return <th key={\"dth-\"+i+\"-\"+headerName} >\r\n                            <p>{headerProp.label}</p>\r\n                        </th>\r\n                    }\r\n                    const filterClass = \"form-control input-filter\";\r\n                    return (\r\n                        <th key={\"dth-\"+i+\"-\"+headerName} >\r\n                            <p>{headerProp.label}</p>\r\n                            <div style={{minWidth:'200px'}} className=\"input-group\">\r\n                                {isDate ?\r\n                                    <Fragment>\r\n                                        <input key={\"filter-day-\"+headerName} autoComplete=\"off\" value={fieldsFilter[headerName+\"-day\"]??\"\"} onChange={props.filterOnChange} name={headerName + \"-day\"}\r\n                                            className={filterClass} placeholder={\"day\"} />\r\n                                        <input key={\"filter-month-\"+headerName} autoComplete=\"off\" value={fieldsFilter[headerName+\"-month\"]??\"\"} onChange={props.filterOnChange} name={headerName + \"-month\"}\r\n                                            className={filterClass} placeholder={\"month\"} />\r\n                                        <input key={\"filter-year-\"+headerName} autoComplete=\"off\" value={fieldsFilter[headerName+\"-year\"]??\"\"} onChange={props.filterOnChange} name={headerName + \"-year\"}\r\n                                            className={filterClass} placeholder={\"year\"} />\r\n                                    </Fragment>\r\n                                    :\r\n                                    <input key={\"filter-common-\"+headerName}  autoComplete=\"off\" value={fieldsFilter[headerName]??\"\"} onChange={props.filterOnChange} placeholder={headerProp.label}\r\n                                        className={filterClass} name={headerName} />\r\n                                }\r\n                            <div className=\"input-group-append btn-group\">\r\n                                <button data-ordertype=\"asc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"btn btn-outline-secondary btn-sm\">\r\n                                    <i data-ordertype=\"asc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"fas fa-angle-up\" /></button>\r\n                                <button data-ordertype=\"desc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"btn btn-outline-secondary btn-sm\">\r\n                                    <i data-ordertype=\"desc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"fas fa-angle-down\" /></button>\r\n                            </div>\r\n                            </div>\r\n                        </th>\r\n                    )\r\n                })}\r\n                <th>Action</th>\r\n            </tr>\r\n        </thead>)\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class SimpleError extends Component<any, any>\r\n{\r\n\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div style={ this.props.style} className=\"alert alert-danger\">\r\n                {this.props.children??\"Error Occured\"}\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport AnchorButton from './AnchorButton';\r\ninterface Props {\r\n    onClick(val:boolean):void,\r\n    active:boolean,\r\n    yesLabel?:string,\r\n    noLabel?:string\r\n}\r\nexport default class ToggleButton extends Component<Props, any>{\r\n    \r\n    render() {\r\n        const props = this.props;\r\n        const active = this.props.active;\r\n        return (\r\n            <div className=\"btn-group\">\r\n                <AnchorButton className={\"btn  btn-sm \" + (active ? \"btn-dark\" : \"btn-outline-dark\")} onClick={(e) => this.props.onClick(true)} >\r\n                    {props.yesLabel??\"Yes\"}</AnchorButton>\r\n                <AnchorButton className={\"btn  btn-sm \" + (active == false ? \"btn-dark\" : \"btn-outline-dark\")} onClick={(e) => this.props.onClick(false)}  >\r\n                    {props.noLabel??\"No\"}</AnchorButton>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\n\r\nimport React, { ChangeEvent, Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport Modal from '../../container/Modal';\r\nimport Filter from './../../../models/Filter';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport WebRequest from './../../../models/WebRequest';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport HeaderProps from './../../../models/HeaderProps';\r\nimport './DataTable.css'\r\nimport EntityValues from './../../../utils/EntityValues';\r\nimport NavigationButtons from './../../navigation/NavigationButtons';\r\nimport MasterDataForm from './form/MasterDataForm';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport EditDeleteAction from './EditDeleteAction';\r\nimport DataTableHeader from './DataTableHeader';\r\nimport SimpleError from './../../alert/SimpleError';\r\nimport Spinner from './../../loader/Spinner';\r\nimport ExternalEditForm from './ExternalEditForm';\r\nimport { uniqueId } from './../../../utils/StringUtil';\r\nimport ToggleButton from '../../navigation/ToggleButton';\r\ninterface IState { recordData?: WebResponse, showForm: boolean, filter: Filter, loading: boolean }\r\nclass MasterDataList extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    state: IState;\r\n    recordToEdit?: {} = undefined;\r\n    entityProperty: EntityProperty;\r\n     headerProps: HeaderProps[] ;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        this.entityProperty = this.props.entityProperty;\r\n        this.headerProps = EntityProperty.getHeaderLabels(this.props.entityProperty);\r\n       \r\n        this.state  = {\r\n            showForm: false, loading: false,\r\n            filter: { limit: 5, page: 0, fieldsFilter: {}}\r\n        }; \r\n    }\r\n    /**\r\n     * remove fieldsfilter empty values\";\r\n     */\r\n    adjustFilter = (filter: Filter): Filter => {\r\n         \r\n        const fieldsFilter = filter.fieldsFilter;\r\n        for (const key in fieldsFilter) {\r\n            const element = fieldsFilter[key];\r\n            if (element == undefined || element == null || new String(element).length == 0) {\r\n                if (filter.fieldsFilter != undefined) {\r\n                    delete filter.fieldsFilter[key];\r\n                }\r\n            }\r\n        }\r\n        return filter;\r\n    }\r\n    loadEntities = (page: number | undefined) => {\r\n        const filter =  Object.assign( new Filter(), this.state.filter);\r\n        const entityName = this.entityProperty.entityName;\r\n        filter.page = page ?? filter.page;\r\n        const request: WebRequest = {\r\n            entity: entityName,\r\n            filter: this.adjustFilter(filter)\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntities,\r\n            this.entitiesLoaded,\r\n            this.showCommonErrorAlert,\r\n            request\r\n        );\r\n\r\n    }\r\n    entitiesLoaded = (response: WebResponse) => {\r\n        this.setState({ recordData: response, filter: response.filter });\r\n    }\r\n    checkDefaultData = () => {\r\n        if (this.state.loading) {\r\n            return;\r\n        }\r\n        if (this.entityProperty.entityName == this.props.entityProperty.entityName && this.state.recordData != undefined) {\r\n            return;\r\n        }\r\n        this.entityProperty = this.props.entityProperty;\r\n        this.headerProps = EntityProperty.getHeaderLabels(this.props.entityProperty);\r\n        this.loadEntities(0);\r\n    }\r\n    startLoading() { this.setState({ loading: true }) }\r\n    endLoading() { this.setState({ loading: false }) }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n        this.checkDefaultData();\r\n    }\r\n    componentDidMount() {\r\n        this.checkDefaultData();\r\n    }\r\n    getRecordNumber = (i: number): number => {\r\n        let res = (this.state.filter.page ?? 0) * (this.state.filter.limit ?? 5) + i + 1;\r\n        return res;\r\n    }\r\n    filterFormSubmit = (e) => {\r\n        let page = this.state.filter.useExistingFilterPage ? this.state.filter.page : 0;\r\n        this.loadEntities(page);\r\n    }\r\n    filterOnChange = (e:ChangeEvent) => {\r\n        e.preventDefault();\r\n        const input  = e.target as any;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        const filter = this.state.filter;\r\n        if (filter.fieldsFilter == undefined) {\r\n            filter.fieldsFilter = {};\r\n        } \r\n        filter.fieldsFilter[name] = value;\r\n        this.setState({ filter: filter });\r\n    }\r\n    setExactSearch = (exacts: boolean) => {\r\n        const filter = this.state.filter;\r\n        filter.exacts = exacts;\r\n        this.setState({ filter: filter });\r\n    }\r\n    filterReset = (e) => {\r\n        const filter = this.state.filter;\r\n        filter.fieldsFilter = {};\r\n        filter.limit = 5;\r\n        this.setState({ filter: filter });\r\n    }\r\n    orderButtonOnClick = (e) => {\r\n        const dataset: DOMStringMap = e.target.dataset;\r\n        const filter = this.state.filter;\r\n        filter.orderBy = dataset['orderby'];\r\n        filter.orderType = dataset['ordertype'];\r\n        this.setState({ filter: filter });\r\n        this.loadEntities(0);\r\n    }\r\n    showEditForm = (response: WebResponse) => {\r\n        if (!response.entities) {\r\n            return;\r\n        }\r\n        this.recordToEdit = response.entities[0];\r\n        this.setState({ showForm: true });\r\n    }\r\n    showCreateForm = (e) => {\r\n        this.recordToEdit = undefined;\r\n        this.setState({ showForm: true });\r\n    }\r\n    updateFilterPage = (page: any) => {\r\n        const filter = this.state.filter;\r\n        filter.useExistingFilterPage = true;\r\n        filter.page = parseInt(page) - 1;\r\n        this.setState({ filter: filter });\r\n    }\r\n    updateFilterLimit = (limit: any) => {\r\n        const filter = this.state.filter;\r\n        filter.limit = parseInt(limit);\r\n        this.setState({ filter: filter });\r\n    }\r\n    printRecord = () => {\r\n        this.props.printRecord(this.state.filter);\r\n    }\r\n    render() {\r\n        if (undefined == this.state.recordData) {\r\n            return <Spinner/>\r\n        }\r\n        const headerProps: HeaderProps[] = this.headerProps;\r\n        const exactsSearch:boolean = this.state.filter.exacts == true;\r\n        const resultList: any[] = this.state.recordData.entities ? this.state.recordData.entities : [];\r\n        if (headerProps == undefined || resultList == undefined) {\r\n            return <SimpleError />\r\n        }\r\n\r\n        if (this.state.showForm == true) {\r\n            return <MasterDataForm recordToEdit={this.recordToEdit} entityProperty={this.entityProperty} onClose={(e) => { this.setState({ showForm: false }) }}  />\r\n        }\r\n\r\n        return (\r\n            <div id=\"MasterDataList\">\r\n                 <div className=\"btn-group\" style={{ marginBottom: '5px' }}>\r\n                    <AnchorButton show={this.entityProperty.creatable == true && this.entityProperty.editable == true} onClick={this.showCreateForm}\r\n                        iconClassName=\"fas fa-plus\">Add Record</AnchorButton>\r\n                    <AnchorButton onClick={this.printRecord} iconClassName=\"fas fa-file\">Print Record</AnchorButton>\r\n                </div><form id=\"filter-form\" onSubmit={(e) => { e.preventDefault() }}>\r\n                    <Modal title=\"Filter\" toggleable={true}>\r\n                        <div>\r\n                            <div className=\"form-group row\">\r\n                                <div className=\"col-6\">\r\n                                    <input value={(this.state.filter.page ?? 0) + 1} onChange={(e) => { this.updateFilterPage(e.target.value) }} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"go to page\" />\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                    <input value={this.state.filter.limit} onChange={(e) => this.updateFilterLimit(e.target.value)} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"record per page\" />\r\n                                </div>\r\n                                <div className=\"col-12\"><p/></div>\r\n                                <div className=\"col-3\">\r\n                                    <ToggleButton \r\n                                    yesLabel=\"exact\"\r\n                                    noLabel=\"not exact\"\r\n                                    active={exactsSearch}\r\n                                    onClick={(val:boolean) => this.setExactSearch(val)}\r\n                                    />\r\n                                    {/* <div className=\"btn-group\">\r\n                                        <a className={exactsSearch?\"btn-sm btn btn-dark\":\"btn-sm btn btn-outline-dark\"} onClick={(e) => this.setExactSearch(true)} >Exact</a>\r\n                                        <a className={!exactsSearch?\"btn-sm btn btn-dark\":\"btn-sm btn btn-outline-dark\"} onClick={(e) => this.setExactSearch(false)} >Not Exact</a>\r\n                                    </div> */}\r\n                                </div>\r\n                                <div className=\"col-3\">\r\n                                <SubmitResetButton onSubmit={this.filterFormSubmit} onReset={this.filterReset} />\r\n                                </div>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                    </Modal>\r\n                    <NavigationButtons limit={this.state.filter.limit ?? 5} totalData={this.state.recordData.totalData ?? 0}\r\n                        activePage={this.state.filter.page ?? 0} onClick={this.loadEntities} />\r\n                    <Modal title=\"Data List\" >\r\n                        {this.state.loading ?\r\n                            <Loading loading={this.state.loading} /> : null}\r\n                        <div className=\"container-fluid\" style={{ overflow: 'scroll' }}>\r\n                            <table className=\"table\" >\r\n                                <DataTableHeader fieldsFilter={this.state.filter.fieldsFilter} orderButtonOnClick={this.orderButtonOnClick} filterOnChange={this.filterOnChange} headerProps={headerProps} />\r\n                                <tbody>\r\n                                    {\r\n                                        resultList.map((result, i) => {\r\n                                            const number = this.getRecordNumber(i);\r\n                                            const values: Array<any> = EntityValues.parseValues(result, this.props.entityProperty);\r\n                                            return (<tr key={\"tr-result-\"+i}>\r\n                                                <td>{number}</td>\r\n                                                {values.map(value => {\r\n                                                    try {\r\n                                                        return (<td key={\"td-u-\"+uniqueId()}>{value}</td>)\r\n                                                    } catch (error) {\r\n                                                        return (<td key={\"td-u-\"+uniqueId()}>-</td>)\r\n                                                    }\r\n                                                })}\r\n                                                <td>\r\n                                                    <EditDeleteAction showEditForm={this.showEditForm} record={result} entityProperty={this.entityProperty} reload={() => this.loadEntities(undefined)}  />\r\n                                                </td>\r\n                                            </tr>)\r\n                                        })}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </Modal>\r\n                </form>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst Loading = ({loading}) => {\r\n    return (\r\n        <div style={{ width: '100%', height: '100%', paddingTop: '2rem', backgroundColor: 'rgb(240,240,240,0.5)', marginLeft: '-1rem', marginTop: '-1rem', position: 'absolute' }}>\r\n            <Spinner show={loading} />\r\n        </div>\r\n    )\r\n}\r\nconst SubmitResetButton = (props: any) => {\r\n    return (<div className=\"btn-group\">\r\n        <button onClick={props.onSubmit} className=\"btn btn-dark btn-sm\"><span className=\"icon\"><i className=\"fas fa-play-circle\" /></span>Apply Filter</button>\r\n        <button onClick={props.onReset} type=\"reset\" className=\"btn btn-dark btn-sm\"><span className=\"icon\"><i className=\"fas fa-sync-alt\" /></span>Reset</button>\r\n    </div>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(MasterDataList))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport MasterDataList from './MasterDataList';\r\nimport Filter from './../../../models/Filter';\r\nimport WebRequest from './../../../models/WebRequest';\r\nimport AttachmentInfo from './../../../models/AttachmentInfo';\r\n\r\nclass MasterDataManagement extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    code: string = \"\";\r\n    loadingEntityProperty: boolean = false;\r\n    entityProperty: undefined\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    entityPropertyLoaded = (response: WebResponse) => {\r\n        this.loadingEntityProperty = false;\r\n        if (response.entityProperty == undefined) {\r\n            return;\r\n        }\r\n        this.masterDataService.setEntityProperty(this.props.code, response.entityProperty);\r\n        this.setState({ entityProperty: response.entityProperty });\r\n        this.setTitle(response.entityProperty);\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n        }\r\n        console.debug(\"updated this.props.code: \", this.props.code);\r\n    }\r\n    setTitle = (entityProp: EntityProperty) => {\r\n        document.title = new String(entityProp?.alias).toString();\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n        }\r\n    }\r\n    startLoading(raltime:boolean) {\r\n        if (raltime==true) {\r\n            super.startLoading(raltime);\r\n        }\r\n    }\r\n    loadEntityProperty() {\r\n\r\n        if (undefined == this.code && this.loadingEntityProperty == true) {\r\n            return;\r\n        }\r\n        const existingEntityProperty = this.masterDataService.getEntityProperty(this.code);\r\n        if (existingEntityProperty != undefined) {\r\n            this.loadingEntityProperty = false;\r\n            this.setState({ entityProperty: existingEntityProperty });\r\n            this.setTitle(existingEntityProperty);\r\n\r\n            return;\r\n        }\r\n        this.loadingEntityProperty = true;\r\n        this.setState({ entityProperty: undefined });\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntityProperty,\r\n            this.entityPropertyLoaded,\r\n            (e: any) => { this.loadingEntityProperty = false; this.showCommonErrorAlert(e) },\r\n            this.code\r\n        )\r\n\r\n    }\r\n    printRecord = (filter: Filter) => {\r\n        const property = this.state.entityProperty;\r\n        if (!property) return;\r\n        this.showConfirmation(\"Print record? \")\r\n            .then(ok => {\r\n                if (!ok) return;\r\n                const req:WebRequest = {\r\n                    entity: property.entityName,\r\n                    filter: filter\r\n                }\r\n                this.commonAjaxWithProgress(\r\n                    this.masterDataService.generateReport,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    req); \r\n            })\r\n    }\r\n    reportCreated = (attachment: AttachmentInfo) => {\r\n        this.showConfirmation(\"Save File \" + attachment.name + \" ?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                Object.assign(document.createElement('a'), {\r\n                    target: '_blank',\r\n                    download: attachment.name,\r\n                    style: { display: 'none' },\r\n                    href: attachment.url,\r\n                }).click();\r\n            })\r\n\r\n    }\r\n    render() {\r\n        if (this.state.entityProperty == undefined) {\r\n            return (\r\n                <div className=\" container-fluid section-body\" style={{ paddingTop: '20px' }}>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-3 text-right\"><div className=\"spinner-border\" role=\"status\" />\r\n                        </div>\r\n                        <div className=\"col-8\"><h4>Loading configuration</h4></div>\r\n                    </div>\r\n                </div>)\r\n        }\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>{this.state.entityProperty.alias}</h2>\r\n                <MasterDataList printRecord={this.printRecord} entityProperty={this.state.entityProperty} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(MasterDataManagement))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport Menu from '../../../models/settings/Menu';\r\nimport ManagementProperty from '../../../models/ManagementProperty';\r\nimport MasterDataManagement from './MasterDataManagement';\r\nimport { AuthorityType } from '../../../models/AuthorityType';\r\n\r\ninterface IState {\r\n    code?: string\r\n    // managementProperties:ManagementProperty[]\r\n}\r\nclass MasterDataMain extends BaseMainMenus {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        code: undefined\r\n    };\r\n    constructor(props: any) {\r\n        super(props, \"Master Data\", true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n       \r\n    }\r\n\r\n    managementPropertiesLoaded = (response: WebResponse) => {\r\n        this.masterDataService.managementProperties = response.generalList ? response.generalList : [];\r\n        this.setSidebarMenus();\r\n        this.refresh();\r\n    }\r\n    setSidebarMenus = () => {\r\n        const sidebarMenus: Menu[] = [];\r\n        const managementProperties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        for (let i = 0; i < managementProperties.length; i++) {\r\n            const element = managementProperties[i];\r\n            sidebarMenus.push({\r\n                role:[AuthorityType.ROLE_ADMIN],\r\n                name: element.label,\r\n                url: element.entityName,\r\n                code: element.entityName,\r\n                menuClass: element.iconClassName\r\n            });\r\n        }\r\n        console.debug(\"this.props.setSidebarMenus: \", this.props.setSidebarMenus);\r\n        if (this.props.setSidebarMenus) {\r\n            this.props.setSidebarMenus(sidebarMenus);\r\n        }\r\n    }\r\n    loadManagamenetPages = () => {\r\n        if (this.masterDataService.managementProperties.length > 0) {\r\n            this.setSidebarMenus();\r\n            this.refresh();\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadManagementProperties,\r\n            this.managementPropertiesLoaded,\r\n            this.showCommonErrorAlert\r\n        );\r\n    }\r\n    getCode = (): string => {\r\n        return this.props.match.params.code;\r\n    }\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        this.loadManagamenetPages();\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n        this.setSidebarMenus();\r\n        // console.debug(\"this.getCode(): \", this.getCode());\r\n        if (this.state.code != this.getCode()) {\r\n            this.setState({ code: this.getCode() });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        console.debug(\"Render master data main\")\r\n        if (this.getCode() != undefined && this.getCode() != null && this.getCode() != \"\") {\r\n            return <MasterDataManagement  code={this.getCode()} />\r\n        }\r\n        if (this.masterDataService.managementProperties.length == 0) {\r\n            return <div className=\"section-body container-fluid\"><h3>Loading</h3></div>\r\n        }\r\n        const properties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Master Data Page</h2>\r\n                <div className=\"row\">\r\n                    {properties.map(property => {\r\n\r\n                        return (\r\n                            <div key={\"mngmnt-page-item-\"+property.entityName} className=\"col-md-2 text-center\" style={{ marginBottom: '10px' }}>\r\n                                <h2 ><Link className=\"btn btn-warning btn-lg\" to={\"/management/\" + property.entityName} ><i className={property.iconClassName} /></Link></h2>\r\n                                <p>{property.label}</p>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(MasterDataMain))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport ApplicationProfile from '../../../models/ApplicationProfile';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\n\r\nclass HomeMain extends BaseComponent {\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.title = \"Home\";\r\n    }\r\n    render() {\r\n        const applicationProfile: ApplicationProfile = this.getApplicationProfile();\r\n        const imageUrl: string = baseImageUrl() + applicationProfile.backgroundUrl;\r\n        return (\r\n            <div className=\"section-body container-fluid\" style={{padding:0}}>\r\n                <div className=\"jumbotron\"\r\n                    style={{\r\n                        margin:'0px',\r\n                        marginTop: '20px',\r\n                        backgroundImage: 'url(\"' + imageUrl + '\")',\r\n                        backgroundSize: 'cover',\r\n                        color: applicationProfile.fontColor\r\n                    }}\r\n                >\r\n                    <h1 className=\"display-4\">{applicationProfile.name}</h1>\r\n                    <p className=\"lead\">{applicationProfile.shortDescription}</p>\r\n                    <hr className=\"my-4\" />\r\n                    <p>{applicationProfile.welcomingMessage}</p>\r\n                    <Link className=\"btn btn-primary btn-lg\" to=\"/about\" role=\"button\">About Us</Link>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n} \r\n\r\nexport default withRouter(connect(\r\n    // mapCommonUserStateToProps, \r\n)(HomeMain))","\r\n\r\nimport  React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux'; \r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\n\r\nclass SettingsMain extends BaseMainMenus \r\n{\r\n    constructor(props:any){\r\n        super(props, \"Settings\", true);\r\n    }\r\n    render(){\r\n        return (\r\n            <div id=\"SettingsMain\" className=\"section-body container-fluid\">\r\n                <h2>Settings</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n  })\r\n  \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n  )(SettingsMain))","\r\nimport React, { Component } from 'react';\r\nexport default class Card extends Component<any, any> {\r\n    constructor(props: any) {\r\n        super(props)\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div {...this.props.attributes} className={\"card \" + this.props.className}>\r\n                {this.props.title ? <div className=\"card-header\">\r\n                    {this.props.title}\r\n                </div> : null}\r\n                <div className=\"card-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent != undefined ?\r\n                    <div className=\"card-footer\">\r\n                        {this.props.footerContent}\r\n                    </div>\r\n                    : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","import React, { Fragment } from 'react'\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nexport const EditField = ({ edit, name, toggleInput, value, updateProperty, ...props }) => {\r\n    return (edit == true ?\r\n        <PropertyInput updateProperty={updateProperty} name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n        :\r\n        <PropertyLabel name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n    )\r\n}\r\nconst PropertyInput = ({ name, toggleInput, value, updateProperty, type }) => {\r\n    return (<div className=\"row\">\r\n        <p className=\"col-md-10\"><input type={type ?? 'text'} name={name} onChange={updateProperty} value={value} className=\"form-control\" /></p>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'false'\r\n            }}\r\n                onClick={toggleInput} className=\"btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nconst PropertyLabel = ({ name, toggleInput, value, type }) => {\r\n\r\n    return (<div className=\"row\" >\r\n        <div className=\"col-md-10\">\r\n            <p style={{ backgroundColor: type == 'color' ? value : '#fff' }} >{type == 'color' ? 'Sample Color' : value}</p>\r\n            {type == 'color' ? <p>{value}</p> : null}\r\n        </div>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\n\r\nexport const EditImage = ({ name, edit, toggleInput, updateProperty }) => {\r\n    if (edit) {\r\n        return (\r\n            <Fragment>\r\n                <div>\r\n                    <AnchorButton attributes={{\r\n                        'data-name': name, 'data-enabled': 'false'\r\n                    }} onClick={toggleInput} className=\" btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n                </div>\r\n                <input onChange={updateProperty} className=\"form control\" accept=\"image/*\" type=\"file\" name={name} />\r\n            </Fragment>);\r\n    }\r\n    return (\r\n        <div>\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit image</AnchorButton>\r\n        </div>\r\n    )\r\n}","import React, { ChangeEvent, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport User from './../../../models/User';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport { setLoggedUser } from './../../../redux/actionCreators';\r\nimport UserService from './../../../services/UserService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper'; \r\ninterface EditField { username: boolean, displayName: boolean, editPassword: boolean, profileImage: boolean }\r\nclass IState {\r\n    user?: User = undefined;\r\n    editFields: EditField = {\r\n        username: false,\r\n        displayName: false,\r\n        editPassword: false,\r\n        profileImage: false\r\n    };\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass UserProfile extends BaseComponent {\r\n\r\n    userService: UserService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.userService = this.getServices().userService;\r\n        this.state.user = Object.assign(new User(), this.getLoggedUser());\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        document.title = \"User Profile\";\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return;\r\n\r\n        user[target.name] = target.value;\r\n        this.setState({ user: user });\r\n    }\r\n    updateProfleImage = (e:ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const app = this;\r\n        const fileName:string|undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function(imageData) {\r\n           app.setProfileImage(imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setProfileImage = (imageData:string) => {\r\n        const user:User|undefined = this.state.user;\r\n        if (!user) return;\r\n        user.profileImage = imageData;\r\n        this.setState({user:user});\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const user: User | undefined = this.state.user;\r\n        const actualLoggedUser: User | undefined = this.getLoggedUser();\r\n        if (null == target || !user || !actualLoggedUser) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            user[propertyName] = actualLoggedUser[propertyName];\r\n        }\r\n        this.setState({ user: user, editFields: editFields });\r\n    }\r\n    saveRecord = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (this.state.fieldChanged() == false) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        this.showConfirmation(\"Save Data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.doSaveRecord(); }\r\n            })\r\n    }\r\n    doSaveRecord = () => {\r\n        const user: User | undefined = this.getUserEditedData();\r\n        if (!user) return;\r\n        if (user.profileImage) {\r\n            this.commonAjaxWithProgress(\r\n                this.userService.updateProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.userService.updateProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        }\r\n    }\r\n    getUserEditedData = (): User | undefined => {\r\n        const user: User | undefined = this.state.user;\r\n        const editFields: EditField = this.state.editFields;\r\n        if (!user) return undefined;\r\n        const editedUser: User = new User();\r\n        for (const key in editFields) {\r\n            const element:boolean = editFields[key];\r\n            if (element && key != 'profileImage') {\r\n                editedUser[key] = user[key];\r\n            }\r\n        }\r\n        if (editFields.profileImage && user.profileImage?.startsWith(\"data:image\")) {\r\n            editedUser.profileImage = user.profileImage;\r\n        }\r\n        return editedUser;\r\n    }\r\n    profileSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Success\");\r\n        this.props.setLoggedUser(response.user);\r\n        const editFields = this.state.editFields;\r\n        for (const key in editFields) {\r\n            editFields[key] = false;\r\n        }\r\n        this.setState({editFields:editFields});\r\n    }\r\n\r\n    render() {\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return null;\r\n        const editFields: EditField = this.state.editFields;\r\n        return (\r\n            <div  className=\"section-body container-fluid\">\r\n                <h2>User Profile</h2>\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center\" style={{marginBottom:'10px'}}>\r\n                            <img style={{marginBottom:'10px'}} width=\"100\" height=\"100\" className=\"rounded-circle border border-primary\" src={user.profileImage?.startsWith(\"data:image\")?user.profileImage:baseImageUrl() + user.profileImage} />\r\n                            <EditImage name=\"profileImage\" edit={editFields.profileImage} updateProperty={this.updateProfleImage} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"User Name\">\r\n                            <EditField edit={editFields.username} updateProperty={this.updateProfileProperty} name=\"username\" toggleInput={this.toggleInput} value={user.username} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.displayName} updateProperty={this.updateProfileProperty} name=\"displayName\" toggleInput={this.toggleInput} value={user.displayName} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Password\">\r\n                            <EditField edit={editFields.editPassword} updateProperty={this.updateProfileProperty} name=\"editPassword\" toggleInput={this.toggleInput} value={user.editPassword} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                           {this.state.fieldChanged()? <input type=\"submit\" className=\"btn btn-primary\" value=\"Save\" />:null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n} \r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setLoggedUser: (user: User) => dispatch(setLoggedUser(user)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(UserProfile))","import React, { ChangeEvent, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport ApplicationProfile from '../../../models/ApplicationProfile';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport { setApplicationProfile } from '../../../redux/actionCreators';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nclass EditFields {\r\n    name: boolean = false; pageIcon: boolean = false;\r\n    welcomingMessage: boolean = false;\r\n    contact: boolean = false; shortDescription: boolean = false;\r\n    backgroundUrl: boolean = false; address: boolean = false;\r\n    about: boolean = false; color: boolean = false; fontColor: boolean = false\r\n}\r\nclass IState {\r\n    applicationProfile?: ApplicationProfile = undefined;\r\n    editFields: EditFields = new EditFields()\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass EditApplicationProfile extends BaseComponent {\r\n\r\n    masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        this.state.applicationProfile = Object.assign(new ApplicationProfile(), this.getApplicationProfile());\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        document.title = \"ApplicationProfile Profile\";\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n\r\n        applicationProfile[target.name] = target.value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n\r\n    updateImageField = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const fieldName: string | null = e.target.getAttribute(\"name\");\r\n        if (null == fieldName) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        const fileName: string | undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function (imageData) {\r\n            app.setAppProfileField(fieldName, imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setAppProfileField = (fieldName: string, value: any) => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n        applicationProfile[fieldName] = value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const appProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        const actualAppProfile: ApplicationProfile | undefined = this.getApplicationProfile();\r\n        if (null == target || !appProfile || !actualAppProfile) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            appProfile[propertyName] = actualAppProfile[propertyName];\r\n        }\r\n        this.setState({ applicationProfile: appProfile, editFields: editFields });\r\n    }\r\n    saveRecord = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (this.state.fieldChanged() == false) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        this.showConfirmation(\"Save Data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.doSaveRecord(); }\r\n            })\r\n    }\r\n    doSaveRecord = () => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.getApplicationEditedData();\r\n        if (!applicationProfile) return;\r\n        if (applicationProfile.backgroundUrl || applicationProfile.pageIcon) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        }\r\n    }\r\n    getApplicationEditedData = (): ApplicationProfile | undefined => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        const editFields: EditFields = this.state.editFields;\r\n        if (!applicationProfile) return undefined;\r\n        const editedApplication: ApplicationProfile = new ApplicationProfile();\r\n        for (const key in editFields) {\r\n            const element: boolean = editFields[key];\r\n            if (element && key != 'backgroundUrl' && key != 'pageIcon') {\r\n                editedApplication[key] = applicationProfile[key];\r\n            }\r\n        }\r\n        if (editFields.backgroundUrl && applicationProfile.backgroundUrl?.startsWith(\"data:image\")) {\r\n            editedApplication.backgroundUrl = applicationProfile.backgroundUrl;\r\n        }\r\n        if (editFields.pageIcon && applicationProfile.pageIcon?.startsWith(\"data:image\")) {\r\n            editedApplication.pageIcon = applicationProfile.pageIcon;\r\n        }\r\n        return editedApplication;\r\n    }\r\n    profileSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Success\");\r\n        this.props.setApplicationProfile(response.applicationProfile);\r\n        const editFields = this.state.editFields;\r\n        for (const key in editFields) {\r\n            editFields[key] = false;\r\n        }\r\n        this.setState({ editFields: editFields });\r\n    }\r\n\r\n    render() {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return null;\r\n        const editFields: EditFields = this.state.editFields;\r\n        const bgUrl: string = applicationProfile.backgroundUrl ?? \"\";\r\n        const pageIcon: string = applicationProfile.pageIcon ?? \"\";\r\n        return (\r\n            <div  className=\"section-body container-fluid\">\r\n                <h2>Application Profile</h2>\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center\" style={{ marginBottom: '10px' }}>\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={bgUrl.startsWith(\"data:image\") ? bgUrl : baseImageUrl() + bgUrl} />\r\n                            <EditImage name=\"backgroundUrl\" edit={editFields.backgroundUrl} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.name} updateProperty={this.updateProfileProperty} name=\"name\" toggleInput={this.toggleInput} value={applicationProfile.name} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Welcoming Message\">\r\n                            <EditField edit={editFields.welcomingMessage} updateProperty={this.updateProfileProperty} name=\"welcomingMessage\" toggleInput={this.toggleInput} value={applicationProfile.welcomingMessage} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Short Description\">\r\n                            <EditField edit={editFields.shortDescription} updateProperty={this.updateProfileProperty} name=\"shortDescription\" toggleInput={this.toggleInput} value={applicationProfile.shortDescription} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Address\">\r\n                            <EditField edit={editFields.address} updateProperty={this.updateProfileProperty} name=\"address\" toggleInput={this.toggleInput} value={applicationProfile.address} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"About\">\r\n                            <EditField edit={editFields.about} updateProperty={this.updateProfileProperty} name=\"about\" toggleInput={this.toggleInput} value={applicationProfile.about} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Contact\">\r\n                            <EditField edit={editFields.contact} updateProperty={this.updateProfileProperty} name=\"contact\" toggleInput={this.toggleInput} value={applicationProfile.contact} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Background Color\">\r\n                            <EditField type=\"color\" edit={editFields.color} updateProperty={this.updateProfileProperty} name=\"color\" toggleInput={this.toggleInput} value={applicationProfile.color} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Font Color\">\r\n                            <EditField type=\"color\" edit={editFields.fontColor} updateProperty={this.updateProfileProperty} name=\"fontColor\" toggleInput={this.toggleInput} value={applicationProfile.fontColor} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Page Icon\">\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={pageIcon.startsWith(\"data:image\") ? pageIcon : baseImageUrl() + pageIcon} />\r\n                            <EditImage name=\"pageIcon\" edit={editFields.pageIcon} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                            {this.state.fieldChanged() ? <input type=\"submit\" className=\"btn btn-primary\" value=\"Save\" /> : null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setApplicationProfile: (applicationProfile: ApplicationProfile) => dispatch(setApplicationProfile(applicationProfile)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditApplicationProfile))","import React from 'react';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport Card from './../../container/Card';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport ApplicationProfile from './../../../models/ApplicationProfile';\r\nimport FormGroup from '../../form/FormGroup';\r\nclass AboutUs extends BaseComponent {\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"About Us\";\r\n    }\r\n    render() {\r\n        const appProfile:ApplicationProfile = this.getApplicationProfile();\r\n        return (<div className=\"section-body container-fluid\" style={{marginTop:'20px'}}>\r\n            <h2>About Us</h2>\r\n            <Card title=\"Application\">\r\n                <FormGroup label=\"Name\">{appProfile.name}</FormGroup>\r\n                <FormGroup  ><i>{appProfile.shortDescription}</i></FormGroup>\r\n                <FormGroup label=\"Contact\">{appProfile.contact}</FormGroup>\r\n                <FormGroup label=\"Address\">{appProfile.address}</FormGroup>\r\n            </Card>\r\n            <p/>\r\n            <Card title=\"Development Mode\">\r\n                {/* <FormGroup label=\"Repository\"><a target=\"_blank\" href=\"https://github.com/fajaralmu\">https://github.com/fajaralmu</a></FormGroup>\r\n                <FormGroup label=\"Front End\">React Js</FormGroup>\r\n                <FormGroup><a target=\"_blank\" href=\"https://github.com/fajaralmu/front-end-shopping-mart-v2\">https://github.com/fajaralmu/front-end-shopping-mart-v2</a></FormGroup>\r\n                <FormGroup label=\"Back End\">Java, Spring MVC</FormGroup>\r\n                <FormGroup><a target=\"_blank\" href=\"https://github.com/fajaralmu/universal-good-shop-v2\">https://github.com/fajaralmu/universal-good-shop-v2</a></FormGroup> */}\r\n            </Card>\r\n            <p/>\r\n        </div>);\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(AboutUs))","import User from './User';\nimport BaseEntity from './BaseEntity';\nimport LessonCategory from './LessonCategory';\nimport { baseImageUrl } from './../constant/Url';\n\nexport default class Lesson extends BaseEntity{\n\ttitle?:string;\n\tcontent?:string;\n\tdescription?:string;\n\tbannerImages?:string;\n\tcategory?:LessonCategory;\n\tuser?:User;\n\n\tstatic getImageUrs = (lesson:Lesson) : string[] => {\n\t\tconst urls:string[] = [];\n\t\tif (lesson.bannerImages == undefined) return urls;\n\t\tconst splitted = lesson.bannerImages.split(\"~\");\n\t\tfor (let i = 0; i < splitted.length; i++) {\n\t\t\tconst element = splitted[i];\n\t\t\turls.push(baseImageUrl()+\"/\"+element);\n\t\t}\n\t\treturn urls;\n\t}\n\n}\n","\r\nimport React, { Component } from 'react';\r\nimport AnchorButton from '../navigation/AnchorButton';\r\nimport Card from './Card';\r\nclass IProps {\r\n    imageUrls: string[] = [];\r\n}\r\nclass IState {\r\n    active: number = 0\r\n}\r\nexport default class Carousel extends Component<IProps, IState>\r\n{\r\n    state: IState = new IState();\r\n    imageLength: number = 0;\r\n    constructor(props: IProps) {\r\n        super(props);\r\n        this.imageLength = props.imageUrls.length;\r\n    }\r\n\r\n    getCurrentImage = (): string => {\r\n        return this.props.imageUrls[this.state.active];\r\n    }\r\n    prev = (e) => {\r\n        let currentActive = this.state.active;\r\n        if (currentActive == 0){\r\n            currentActive = this.imageLength-1;\r\n        } else {\r\n            currentActive--;\r\n        }\r\n        this.setState({active:currentActive});\r\n\r\n    }\r\n    next = (e) => {\r\n        let currentActive = this.state.active;\r\n        if (currentActive == this.imageLength-1){\r\n            currentActive = 0;\r\n        } else {\r\n            currentActive++;\r\n        }\r\n        this.setState({active:currentActive});\r\n\r\n    }\r\n    render() {\r\n        return (\r\n            <Card className=\"container-fluid   text-center\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <AnchorButton className=\"btn btn-light\" iconClassName=\"fas fa-arrow-left\" onClick={this.prev} />\r\n                    </div>\r\n                    <div className=\"col-md-8\" style={{overflowX:'scroll'}}>\r\n                        <img height=\"200\" src={this.getCurrentImage()} />\r\n                    </div>\r\n                    <div className=\"col-md-2\">\r\n                        <AnchorButton className=\"btn btn-light\" iconClassName=\"fas fa-arrow-right\" onClick={this.next} />\r\n                    </div>\r\n                </div>\r\n\r\n            </Card>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from '../../layout/BaseMainMenus';\r\nimport Lesson from './../../../models/Lesson';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport Card from './../../container/Card';\r\nimport Carousel from '../../container/Carousel';\r\n\r\nclass LessonDetail extends BaseMainMenus {\r\n\r\n    constructor(props: any) {\r\n        super(props, \"Lessons\", false);\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.title = this.props.lesson.title;\r\n    }\r\n\r\n\r\n    render() {\r\n        const lesson: Lesson | undefined = this.props.lesson;\r\n        if (!lesson) return <></>;\r\n\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>{lesson.title}</h2>\r\n                <p className=\"text-dark\"><i className=\"fas fa-edit\" />{lesson.user?.displayName}, {lesson.createdDate ? new Date(lesson.createdDate).toLocaleString() : \"\"}</p>\r\n                <AnchorWithIcon iconClassName=\"fas fa-angle-left\" onClick={this.props.back}>Back</AnchorWithIcon>\r\n                \r\n                {lesson.bannerImages?\r\n                    <><p/><Carousel imageUrls={Lesson.getImageUrs(lesson)} /><p/></>:<p/>}\r\n               \r\n                <Card>\r\n                    \r\n                    <div dangerouslySetInnerHTML={{\r\n                    __html: lesson.content ? lesson.content.toString() : \"\"\r\n                }} />\r\n                </Card>\r\n                <p/>\r\n                <p><i className=\"fas fa-tags\"></i>&nbsp;{lesson.category?.name}</p>\r\n                <AnchorWithIcon iconClassName=\"fas fa-angle-left\" onClick={this.props.back}>Back</AnchorWithIcon>\r\n                <p/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(LessonDetail))","import React, { ChangeEvent } from 'react'\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport LessonService from './../../../services/LessonService';\r\nimport Lesson from './../../../models/Lesson';\r\nimport Filter from './../../../models/Filter';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport LessonCategory from '../../../models/LessonCategory';\r\nimport Spinner from '../../loader/Spinner';\r\nimport SimpleError from '../../alert/SimpleError';\r\nimport Card from './../../container/Card';\r\nimport { uniqueId } from './../../../utils/StringUtil';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport NavigationButtons from '../../navigation/NavigationButtons';\r\nimport LessonDetail from './LessonDetail';\r\nimport WebRequest from './../../../models/WebRequest';\r\nclass IState {\r\n    lessons: Lesson[] | undefined = undefined;\r\n    loading: boolean = false;\r\n    filter: Filter = {\r\n        limit: 5,\r\n        page: 0\r\n    }\r\n    selectedLesson: Lesson | undefined;\r\n    totalData: number = 0;\r\n    category: LessonCategory | undefined = undefined;\r\n    filterValue?: string\r\n}\r\nclass LessonContent extends BaseComponent {\r\n    lessonService: LessonService;\r\n    state: IState = new IState();\r\n    categoryCode: string = \"\";\r\n    constructor(props) {\r\n        super(props, false);\r\n        this.lessonService = this.getServices().lessonService;\r\n    }\r\n    startLoading = () => {\r\n        if (this.categoryCode != this.props.categoryCode) {\r\n            this.categoryCode = this.props.categoryCode;\r\n            this.setState({ loading: true, selectedLesson: undefined })\r\n        } else {\r\n            super.startLoading(false);\r\n        }\r\n    }\r\n    endLoading = () => {\r\n        if (this.categoryCode == this.props.categoryCode && this.state.loading) {\r\n            this.setState({ loading: false });\r\n        } else {\r\n            super.endLoading();\r\n        }\r\n\r\n    }\r\n    dataLoaded = (response: WebResponse) => {\r\n        const lessons = response.entities;\r\n        this.categoryCode = this.props.categoryCode;\r\n        this.setState({ lessons: lessons, totalData: response.totalData, category: response.entity });\r\n    }\r\n    loadLessons = () => {\r\n        const request: WebRequest = {\r\n            filter: {\r\n                ...this.state.filter,\r\n                fieldsFilter: {\r\n                    'value': this.state.filterValue\r\n                }\r\n            },\r\n        }\r\n        this.commonAjax(\r\n            this.lessonService.getLessons,\r\n            this.dataLoaded,\r\n            this.showCommonErrorAlert,\r\n            this.props.categoryCode,\r\n            request\r\n        );\r\n    }\r\n    componentDidMount() {\r\n        this.loadLessons();\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.categoryCode != this.props.categoryCode) {\r\n            this.loadLessonsInPage(0);\r\n        }\r\n    }\r\n    loadLessonsInPage = (page) => {\r\n        this.updateFilter('page', page);\r\n        this.loadLessons();\r\n    }\r\n    updateFilter = (key: string, value: any) => {\r\n        const filter = this.state.filter;\r\n        filter[key] = value;\r\n        this.setState({ filter: filter });\r\n        // this.loadLessons();\r\n    }\r\n    updateLimit = (e) => {\r\n        if (!e.target.value || e.target.value < 1) return;\r\n        this.updateFilter('limit', e.target.value);\r\n    }\r\n    setSelectedLesson = (lesson: Lesson | undefined) => {\r\n        this.setState({ selectedLesson: lesson });\r\n    }\r\n    setSelectedLessonUndefined = () => {\r\n        document.title = \"Lessons\"\r\n        this.setSelectedLesson(undefined);\r\n    }\r\n    setFilterValue = (e) => {\r\n        this.setState({ filterValue: e.target.value });\r\n    }\r\n    clearFilter = (e) => {\r\n        this.setState({ filterValue: undefined });\r\n        this.updateFilter('limit', 5);\r\n    }\r\n    render() {\r\n        if (this.state.loading) {\r\n            return (<div className=\"section-body  container-fluid\">\r\n                <h2>Lessons</h2>\r\n                <Spinner />\r\n            </div>)\r\n        }\r\n        if (this.state.lessons == undefined || this.state.category == undefined) {\r\n            return (<div className=\"section-body  container-fluid\">\r\n                <h2>Lessons</h2>\r\n                <SimpleError>Data not found</SimpleError>\r\n            </div>)\r\n        }\r\n        if (this.state.selectedLesson) {\r\n            return <LessonDetail lesson={this.state.selectedLesson} back={this.setSelectedLessonUndefined} />\r\n        }\r\n        const lessons: Lesson[] = this.state.lessons;\r\n        const category: LessonCategory = this.state.category;\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Lessons - {category.name}</h2>\r\n                <form className=\"row\" onSubmit={(e) => { e.preventDefault(); this.loadLessons() }}>\r\n\r\n                    <div className=\"input-group col-md-6\">\r\n                        <input value=\"Per Page\" className=\"form-control\" disabled />\r\n                        <input min={0} type=\"number\" onChange={this.updateLimit} value={this.state.filter.limit} className=\"form-control\" />\r\n                    </div>\r\n                    <div className=\"input-group col-md-6\">\r\n                        <input autoComplete=\"off\" type=\"search\" placeholder=\"Search...\" onChange={this.setFilterValue} value={this.state.filterValue} className=\"form-control\" />\r\n                        <input type=\"submit\" value=\"Reload\" className=\"btn btn-info\" />\r\n                        <button type=\"reset\" className=\"btn btn-warning\" onClick={this.clearFilter} >Clear Filter</button>\r\n                    </div>\r\n                </form>\r\n                <p />\r\n                <NavigationButtons activePage={this.state.filter.page ?? 0}\r\n                    limit={this.state.filter.limit ?? 5}\r\n                    totalData={this.state.totalData}\r\n                    onClick={this.loadLessonsInPage} />\r\n                {lessons.length == 0? <SimpleError>No Data</SimpleError>:null}\r\n                {lessons.map((lesson, id) => {\r\n\r\n                    return (\r\n                        <LessonItem setSelectedLesson={this.setSelectedLesson} key={uniqueId() + \"-lesson\"} lesson={lesson} />\r\n                    )\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst LessonItem = (props: { lesson: Lesson, setSelectedLesson: Function }) => {\r\n    const lesson: Lesson = props.lesson;\r\n    const content: String = new String(lesson.content).length > 150 ? new String(lesson.content).substring(0, 150) + \"...\" :\r\n        new String(lesson.content);\r\n    return (<Card attributes={{ style: { marginBottom: '5px' } }}>\r\n        <h3>{lesson.title}</h3>\r\n        {/* <p className=\"text-dark\"><i className=\"fas fa-edit\" />&nbsp;{lesson.user?.displayName}</p> */}\r\n        <p><i className=\"fas fa-clock\"/>&nbsp;{lesson.createdDate ? new Date(lesson.createdDate).toLocaleString() : \"\"}</p>\r\n        <div dangerouslySetInnerHTML={{\r\n            __html: content.toString()\r\n        }} />\r\n        <p />\r\n        <AnchorWithIcon onClick={(e) => props.setSelectedLesson(lesson)} className=\"btn btn-outline-dark btn-sm\" iconClassName=\"fas fa-angle-right\">Read More</AnchorWithIcon>\r\n    </Card>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(LessonContent))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from '../../layout/BaseMainMenus'; \r\nimport WebResponse from '../../../models/WebResponse';\r\nimport Menu from '../../../models/settings/Menu'; \r\nimport CategoriesService from './../../../services/CategoriesService';\r\nimport LessonCategory from './../../../models/LessonCategory';\r\nimport { uniqueId } from './../../../utils/StringUtil';\r\nimport Spinner from './../../loader/Spinner';\r\nimport SimpleError from '../../alert/SimpleError';\r\nimport LessonContent from './LessonContent';\r\n\r\ninterface IState {\r\n    code?: string,\r\n    loading: boolean\r\n}\r\nclass LessonMain extends BaseMainMenus {\r\n    categoriesService: CategoriesService;\r\n     \r\n    state: IState = {\r\n        code: undefined, loading: false\r\n    };\r\n    constructor(props: any) {\r\n        super(props, \"Lessons\", false);\r\n        this.categoriesService = this.getServices().categoriesService;\r\n    }\r\n    startLoading = () => { this.setState({loading:true}) }\r\n    endLoading = () => { this.setState({loading:false}) }\r\n\r\n    lessonCategoriesLoaded = (response: WebResponse) => {\r\n        this.categoriesService.setLoadedCategories('lesson', response.entities ? response.entities : []);\r\n        this.setSidebarMenus();\r\n        this.refresh();\r\n    }\r\n    setSidebarMenus = () => {\r\n        const sidebarMenus: Menu[] = [];\r\n        const lessonCategories: LessonCategory[] = this.categoriesService.getLoadedCategories('lesson');\r\n        for (let i = 0; i < lessonCategories.length; i++) {\r\n            const element = lessonCategories[i];\r\n            sidebarMenus.push({\r\n                name: element.name,\r\n                url: element.code,\r\n                code: element.code??uniqueId(),\r\n                menuClass: element.iconClassName,\r\n                role:[]\r\n            });\r\n        }\r\n        if (this.props.setSidebarMenus) {\r\n            this.props.setSidebarMenus(sidebarMenus);\r\n        } \r\n    }\r\n    loadManagamenetPages = () => {\r\n        if (this.categoriesService.getLoadedCategories('lesson').length > 0) {\r\n            this.setSidebarMenus();\r\n            this.refresh();\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.categoriesService.getCategories,\r\n            this.lessonCategoriesLoaded,\r\n            this.showCommonErrorAlert,\r\n            'lesson'\r\n        );\r\n    }\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        this.loadManagamenetPages();\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n        this.setSidebarMenus();\r\n         \r\n    }\r\n    getCode = (): string => {\r\n        return this.props.match.params.categoryCode;\r\n    }\r\n    render() {\r\n        if (this.getCode()) { \r\n            return <LessonContent  categoryCode={this.getCode()} />\r\n        }\r\n        const categories: LessonCategory[] = this.categoriesService.getLoadedCategories('lesson');\r\n        if (this.state.loading) {\r\n            return <div className=\"section-body container-fluid\"><Spinner/></div>\r\n        }\r\n        if (categories.length == 0) {\r\n            return <div className=\"section-body container-fluid\">\r\n                <SimpleError>No Categories Yet</SimpleError>\r\n            </div>\r\n        }\r\n        \r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Lessons</h2>\r\n                <div className=\"row\">\r\n                    {categories.map(category => {\r\n                        return (\r\n                            <div key={\"lesson-cat-\"+category.id} className=\"col-md-2 text-center\" style={{ marginBottom: '10px' }}>\r\n                                <h2 ><Link className=\"btn btn-warning btn-lg\" to={\"/lessons/\" + category.code} ><i className={category.iconClassName&&category.iconClassName!=\"\"?category.iconClassName:\"fas fa-folder\"} /></Link></h2>\r\n                                <p>{category.name}</p>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        ) \r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(LessonMain))","import React, { Component } from 'react'\r\n\r\nexport default class ScrollDiv extends Component<any, any> {\r\n\r\n    render = () => {\r\n        return (\r\n            <div className=\"div-auto-scroll\">\r\n                {this.props.children}\r\n            </div>\r\n        )\r\n    }\r\n}","\r\nimport React, { ChangeEvent, Component } from 'react';\r\nimport Quiz from './../../../models/Quiz';\r\nimport Card from './../../container/Card';\r\nimport { timerString } from './../../../utils/DateUtil';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport Spinner from '../../loader/Spinner';\r\nimport ScrollDiv from '../../container/ScrollDiv';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { tableHeader } from './../../../utils/CollectionUtil';\r\nimport PublicQuizService from './../../../services/PublicQuizService';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\ninterface IProps { \r\n    skipAccessCode:boolean,\r\n    loading:boolean, \r\n    onFilter(fieldsFilter:any):any|undefined, \r\n    quizList: Quiz[], \r\n    startingNumber: number,\r\n    quizOnClick(quiz: Quiz): void };\r\nclass State {\r\n    fieldsFilter:any = {}\r\n}\r\nclass QuizList extends BaseComponent {\r\n    state:State = new State();\r\n    publicQuizService:PublicQuizService;\r\n    constructor(props:IProps) {\r\n        super(props);\r\n        this.publicQuizService = this.getServices().publicQuizService;\r\n    }\r\n    updateFilter = (e:ChangeEvent) => {\r\n        const fieldsFilter = this.state.fieldsFilter;\r\n        const target = e.target as HTMLInputElement;\r\n        fieldsFilter[target.name] = target.value;\r\n        this.setState({fieldsFilter: fieldsFilter});\r\n    }\r\n    resetFilter = (e) => {\r\n        this.setState({fieldsFilter: {}});\r\n    }\r\n    quizOnClick = (quiz:Quiz) => {\r\n        if (quiz.protectedByCode && this.props.skipAccessCode != true) {\r\n            this.validateAccessCode(quiz);\r\n            return;\r\n        }\r\n        this.props.quizOnClick(quiz);\r\n    }\r\n    accessCodeValidated = (quiz:Quiz) => {\r\n        this.props.quizOnClick(quiz);\r\n    }\r\n    validateAccessCode = (q:Quiz) => {\r\n        const code = prompt(\"Enter access code\");\r\n        if (code == null) return;\r\n        this.commonAjax(\r\n            this.publicQuizService.validateAccessCode,\r\n            ()=> this.accessCodeValidated(q),\r\n            this.showCommonErrorAlert,\r\n            q, code);\r\n    }\r\n    render() {\r\n        const props = this.props;\r\n        \r\n        return (\r\n            <Card>\r\n                <form className=\"row\" onSubmit={e=>{\r\n                    e.preventDefault();\r\n                    if ( this.props.onFilter) {\r\n                        this.props.onFilter(this.state.fieldsFilter)\r\n                    }\r\n                }} >\r\n                    <FormGroup className=\"col-6\" label=\"Title\">\r\n                        <div className=\"input-group\">\r\n                            <input onChange={this.updateFilter} name=\"title\" value={this.state.fieldsFilter['title']??\"\"} type=\"text\" placeholder=\"Search Title\" className=\"form-control\"/>\r\n                            <div className=\"input-group-append\">\r\n                                <button type=\"submit\" className=\"btn btn-dark\">\r\n                                    Search\r\n                                </button>\r\n                                <button onClick={this.resetFilter} type=\"reset\" className=\"btn btn-warning\">\r\n                                    <i className=\"fas fa-redo\"/>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </FormGroup>\r\n                </form>\r\n                <ScrollDiv>\r\n                <table className=\"table table-striped\">\r\n                    {tableHeader(\"No\", \"Title\", \"Question\",\"Duration\",\"Status\",\"Action\")}\r\n                    <tbody>\r\n                        {props.loading?\r\n                        <tr>\r\n                            <td colSpan={6}>\r\n                                <Spinner/>\r\n                            </td>\r\n                        </tr>\r\n                        :\r\n                        props.quizList.map((quiz:Quiz, i: number) => {\r\n                            quiz = Object.assign(new Quiz(), quiz);\r\n                            return (\r\n                                <tr key={\"quiz-public-list-\" + i}>\r\n                                    <td>{i + props.startingNumber + 1}</td>\r\n                                    <td>{quiz.title}\r\n                                    &nbsp;{quiz.questionsTimered?<i className=\"fas fa-stopwatch\"/>:null}\r\n                                   \r\n                                    </td>\r\n                                    <td>{quiz.getQuestionCount()}</td>\r\n                                    <td>{timerString(quiz.duration)}</td>\r\n                                    <td>\r\n                                        {quiz.active?\"Active\":\"Not active\"}\r\n                                        -\r\n                                        {quiz.repeatable?\"Repeatable\":\"Not repeatable\"}\r\n                                    </td> \r\n                                    <td>\r\n                                        \r\n                                        {quiz.available?<a onClick={(e) => this.quizOnClick(quiz)}\r\n                                            className=\"btn btn-dark\" >\r\n                                            {quiz.protectedByCode?<i className=\"fas fa-lock\"/>:<i className=\"fas fa-folder-open\"/>}\r\n                                            </a> :\"Not available\"}\r\n                                    </td>\r\n                                </tr>\r\n                            )\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n                </ScrollDiv>\r\n            </Card >\r\n        )\r\n    }\r\n}\r\n\r\nexport default  withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(QuizList))","import React from 'react'\r\nimport { uniqueId } from './StringUtil';\r\nexport const tableHeader = (...values:string[]) => {\r\n   \r\n    return (<thead>\r\n        <tr>\r\n            {values.map((value)=>{\r\n\r\n                return <th key={uniqueId()}>{value}</th>\r\n            })}\r\n        </tr>\r\n    </thead>)\r\n}\r\nexport const groupArray = function (array, division) {\r\n    if (null == array || array.length == 0) { return [] }\r\n    const groupedArray = new Array();\r\n    const itemPerDivision = Math.ceil(array.length / division)\r\n\r\n    if (itemPerDivision == 1) {\r\n        groupedArray.push(array);\r\n        return groupedArray;\r\n    }\r\n\r\n    for (let i = 0; i < division; i++) {\r\n        groupedArray.push(new Array());\r\n    }\r\n\r\n    let index = 1;\r\n    let divisionIndex = 0;\r\n    for (let i = 0; i < array.length; i++) {\r\n        const element = array[i];\r\n        groupedArray[divisionIndex].push(element);\r\n\r\n        index++;\r\n        if (index > itemPerDivision) {\r\n            divisionIndex++;\r\n            index = 1;\r\n        }\r\n    }\r\n\r\n    return groupedArray;\r\n}\r\n","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseMainMenus from '../../layout/BaseMainMenus';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport PublicQuizService from './../../../services/PublicQuizService';\r\nimport Quiz from './../../../models/Quiz';\r\nimport Filter from './../../../models/Filter';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport NavigationButtons from './../../navigation/NavigationButtons';\r\nimport QuizList from './../quizshared/QuizList';\r\nclass IState {\r\n    quizList: Quiz[] = new Array();\r\n    loading: boolean = false;\r\n    filter: Filter = new Filter();\r\n    totalData: number = 0;\r\n}\r\n\r\nclass QuizManagementMain extends BaseMainMenus {\r\n    quizService: PublicQuizService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Quiz Management\", true);\r\n        this.quizService = this.getServices().publicQuizService;\r\n    }\r\n    startLoading = (realtime: boolean) => { this.setState({ loading: true }); }\r\n    endLoading = () => { this.setState({ loading: false }); }\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        this.loadRecords();\r\n    }\r\n    dataLoaded = (response: WebResponse) => {\r\n        this.setState({ quizList: response.entities ?? [], totalData: response.totalData });\r\n    }\r\n\r\n    loadRecords = () => {\r\n        if (this.state.loading) return;\r\n        const filter = this.state.filter;\r\n        filter.availabilityCheck = false;\r\n        this.commonAjax(\r\n            this.quizService.getQuizList,\r\n            this.dataLoaded,\r\n            this.showCommonErrorAlert,\r\n            filter\r\n        )\r\n    }\r\n    loadRecordsAtPage = (page: number) => {\r\n        if (this.state.loading) return;\r\n        const filter = this.state.filter;\r\n        filter.page = page;\r\n        this.setState({ filter: filter });\r\n        this.loadRecords();\r\n    }\r\n    loadRecordsWithFilter = (fieldsFilter: any) => {\r\n        const filter = this.state.filter;\r\n        filter.page = 0;\r\n        filter.fieldsFilter = fieldsFilter;\r\n        this.setState({ filter: filter });\r\n        this.loadRecords();\r\n    }\r\n    editQuiz = (quiz: Quiz) => {\r\n        this.showConfirmation(\"See Detail Quiz: \" + quiz.title + \"?\")\r\n            .then((ok) => {\r\n                if (ok) {\r\n                    this.props.history.push({ pathname: \"/quizmanagement/detail/\" + quiz.id })\r\n                }\r\n            })\r\n    }\r\n    render() {\r\n        const filter = this.state.filter;\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Quiz Management</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                </div>\r\n                <NavigationButtons\r\n                    activePage={filter.page ?? 0}\r\n                    limit={filter.limit ?? 5} totalData={this.state.totalData}\r\n                    onClick={this.loadRecordsAtPage}\r\n                />\r\n                <QuizList onFilter={this.loadRecordsWithFilter}\r\n                    loading={this.state.loading}\r\n                    skipAccessCode={true}\r\n                    quizOnClick={this.editQuiz}\r\n                    startingNumber={(filter.limit ?? 0) * (filter.page ?? 0)}\r\n                    quizList={this.state.quizList} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(QuizManagementMain))","import Quiz from './Quiz';\nimport BaseEntity from './BaseEntity';\nimport QuizChoice from './QuizChoice';\n\nexport default class QuizQuestion extends BaseEntity {\n\tstatic public_choices: Array<string> = [\"A\", \"B\", \"C\", \"D\"];\n\tanswerCode?: string;\n\tcorrectChoice?: string;\n\tstatement?: string;\n\tanswerEssay?:string;\n\tessay?:boolean;\n\n\tquiz?: Quiz;\n\timage?: string;\n\tchoices?: QuizChoice[];\n\tduration:number = 5;\n\tnumber:number = 1;\n\n\t\n\tentered:boolean = false;\n\n\tstatic publicQuizQuestion = (essay:boolean = false): QuizQuestion => {\n\t\tconst question: QuizQuestion = new QuizQuestion();\n\t\t\n\t\tconst choices: QuizChoice[] = [];\n\t\tif (essay == false) {\n\t\t\tquestion.answerCode = \"A\";\n\t\t\tfor (let i = 0; i < QuizQuestion.public_choices.length; i++) {\n\t\t\t\tconst code = QuizQuestion.public_choices[i];\n\t\t\t\tchoices.push({ answerCode: code, statement:\"Answer \"+ code});\n\n\t\t\t}\n\t\t} else {\n\t\t\tquestion.answerEssay = \"ANSWER ESSAY\";\n\t\t}\n\t\tquestion.essay = essay\n\t\tquestion.choices = choices;\n\t\treturn question;\n\t}\n}\n","import React, { Fragment } from 'react';\r\nimport Quiz from '../../../models/Quiz';\r\nimport QuizChoice from './../../../models/QuizChoice';\r\nimport QuizQuestion from './../../../models/QuizQuestion';\r\nimport FormGroup from './../../form/FormGroup';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport { baseImageUrl } from './../../../constant/Url';\r\nimport ToggleButton from '../../navigation/ToggleButton';\r\n\r\n\r\nexport const ChoiceForm = (props: { answerCode: string, choice: QuizChoice, updateField(e:any):void, setAnswer (code:string, index:number):void, removeImage:any, index: number, questionIndex: number }) => {\r\n    return (\r\n        <div>\r\n            <div className={\"input-group \" + (props.answerCode == props.choice.answerCode ? \"border border-primary\" : \"\")}>\r\n                <div className=\"input-group-prepend\">\r\n                    <span\r\n                    onClick={(e)=>{\r\n                        props.setAnswer(props.choice.answerCode??\"\", props.questionIndex)\r\n                    }}\r\n                    className={\"clickable input-group-text \"+(props.answerCode == props.choice.answerCode ? \"bg-primary text-white\":\"\")} ><b>{props.choice.answerCode}</b></span>\r\n                </div>\r\n                <input name='statement' onChange={props.updateField} className=\"form-control\" data-questionindex={props.questionIndex} data-index={props.index} value={props.choice.statement} required />\r\n            </div>\r\n            <input type=\"file\" name=\"image\" accept=\"image/*\" onChange={props.updateField}  data-questionindex={props.questionIndex} data-index={props.index} className=\"form-control\" />\r\n            <ImagePreview name={props.choice.image} index={props.index} remove={props.removeImage} />\r\n            {props.choice.id? <label>Record Id: {props.choice.id}</label>:null}\r\n        </div>\r\n    )\r\n}\r\nexport const QuestionForm = (props: {questionsTimered:boolean, \r\n    showChoices:boolean, question: QuizQuestion, \r\n    index: number, updateField: any, updateChoiceField: any, remove: any, removeImage:any, removeChoiceImage:any, setAnswer(code:string, index:number):void }) => {\r\n    const i = props.index;\r\n    const question = props.question;\r\n    const choices: QuizChoice[] = props.question.choices ?? [];\r\n    return (\r\n        <div className=\"alert alert-info\" key={\"quiz-quest-form-\" + i}>\r\n            <FormGroup label={\"Question #\" + (i + 1)}>\r\n                <textarea required onChange={props.updateField} value={question.statement} className=\"form-control\" name=\"statement\" data-index={i} />\r\n            </FormGroup>\r\n            <FormGroup show={props.questionsTimered} label={\"Duration\"}>\r\n                <input min={5} type=\"number\" required onChange={props.updateField} value={question.duration} className=\"form-control\" name=\"duration\" data-index={i} />\r\n            </FormGroup>\r\n            <FormGroup label=\"Image\">\r\n                <input type=\"file\"  accept=\"image/*\" onChange={props.updateField} name=\"image\" className=\"form-control\" data-index={i}  />\r\n               \r\n                <ImagePreview name={question.image} index={i} remove={props.removeImage} />\r\n            </FormGroup>\r\n            {question.essay==false?\r\n            <FormGroup label=\"Choices\">\r\n                {props.showChoices?choices.map((choice, c) => {\r\n                    return <ChoiceForm answerCode={question.answerCode ?? \"A\"} key={\"qst-choice-\" + c +\"-\" + i}\r\n                     updateField={props.updateChoiceField}\r\n                     setAnswer={props.setAnswer}\r\n                     removeImage={(choiceIndex)=>{props.removeChoiceImage(choiceIndex, i)}}\r\n                     questionIndex={i} index={c} choice={choice} />\r\n                }):<label>Hidden</label>}\r\n            </FormGroup>:null}\r\n             \r\n            <FormGroup label=\"Answer\">\r\n               {question.essay?\r\n                <textarea required onChange={props.updateField} value={question.answerEssay} className=\"form-control\" name=\"answerEssay\" data-index={i} />\r\n                : <select required className=\"form-control\" value={question.answerCode} onChange={(e)=>{\r\n                    props.setAnswer(e.target.value, i);\r\n                }} name=\"answerCode\" data-index={i} >\r\n                    {QuizQuestion.public_choices.map((code, c) => {\r\n                        return <option key={\"opt-ch-ans-\" + c + i} value={code} >{code}</option>\r\n                    })}\r\n                </select>\r\n                }\r\n            </FormGroup>\r\n            {props.question.id?\r\n            <FormGroup label=\"Record ID\">\r\n                {props.question.id}\r\n            </FormGroup>:null\r\n            }\r\n            <FormGroup>\r\n                <AnchorButton iconClassName=\"fas fa-times\" className=\"btn btn-danger\" onClick={(e) => { props.remove(props.index) }} ></AnchorButton>\r\n            </FormGroup>\r\n        </div>\r\n    )\r\n}\r\nexport const QuizInformationForm = (props: { quiz: Quiz, updateField(e): void, updateQuizBooleanField(name:string, value:boolean):void }) => {\r\n    const quiz = props.quiz;\r\n    return (\r\n        //afterCompletionMessage\r\n        <Fragment>\r\n            <FormGroup label=\"Title\">\r\n                <input required onChange={props.updateField} className=\"form-control\" name=\"title\" value={quiz.title} />\r\n            </FormGroup>\r\n            <FormGroup label=\"Access Code\">\r\n                <input onChange={props.updateField} className=\"form-control\" name=\"accessCode\" value={quiz.accessCode} />\r\n            </FormGroup>\r\n            <FormGroup label=\"Description\">\r\n                <textarea  onChange={props.updateField} className=\"form-control\" name=\"description\" value={quiz.description} />\r\n            </FormGroup>\r\n            <FormGroup label=\"On Finished Message\">\r\n                <input onChange={props.updateField} className=\"form-control\" name=\"afterCompletionMessage\" value={quiz.afterCompletionMessage} />\r\n            </FormGroup>\r\n            <FormGroup label=\"Duration (Second)\">\r\n                <input type=\"number\" min={5} required onChange={props.updateField} className=\"form-control\" name=\"duration\" value={quiz.duration} />\r\n            </FormGroup>\r\n            <FormGroup label=\"Active\">\r\n                <ToggleButton active={quiz.active==true} onClick={(val)=>props.updateQuizBooleanField('active', val)} />\r\n            </FormGroup>\r\n            <FormGroup label=\"Repeatable\">\r\n                <ToggleButton active={quiz.repeatable==true} onClick={(val)=>props.updateQuizBooleanField('repeatable', val)} />\r\n            </FormGroup>\r\n            <FormGroup label=\"Show All Question\">\r\n                <ToggleButton active={quiz.showAllQuestion==true} onClick={(val)=>props.updateQuizBooleanField('showAllQuestion', val)} />\r\n            </FormGroup>\r\n            <FormGroup label=\"Question With Timer\">\r\n                <ToggleButton active={quiz.questionsTimered==true} onClick={(val)=>props.updateQuizBooleanField('questionsTimered', val)} />\r\n            </FormGroup>\r\n            <FormGroup label=\"Image\">\r\n                <input type=\"file\"   onChange={props.updateField} \r\n                className=\"form-control\" name=\"image\"   />\r\n                {quiz.image != undefined && quiz.image.trim()!=\"\"?\r\n                 quiz.image.startsWith(\"data:image\")?\r\n                    <img width=\"100\" height=\"100\" src={quiz.image} />:\r\n                    <img width=\"100\" height=\"100\" src={baseImageUrl()+quiz.image} />\r\n                    :null\r\n                }\r\n          \r\n            </FormGroup>\r\n            {quiz.id?\r\n            <FormGroup label=\"Record ID\">\r\n                {quiz.id}\r\n            </FormGroup>:null\r\n            }\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nconst ImagePreview = (props:{name:string|undefined, index:number, remove:any}) => {\r\n    if (!props.name ) return null;\r\n    const link = props.name.includes(\"data:image\")?props.name:baseImageUrl()+props.name;\r\n    return <div  >\r\n        <img width=\"100\" src={link} />\r\n        <a style={{marginLeft:'5px' }} onClick={(e)=>props.remove(props.index)} className=\"btn btn-danger btn-sm\"  ><i className=\"fas fa-times\"/></a>\r\n    </div>\r\n}\r\n","import React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport Quiz from './../../../models/Quiz';\r\nimport Card from '../../container/Card';\r\nimport QuizQuestion from './../../../models/QuizQuestion';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport QuizService from './../../../services/QuizService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport { QuestionForm, QuizInformationForm } from './QuizFormCompontnes';\r\nimport { toBase64v2 } from './../../../utils/ComponentUtil';\r\n\r\nclass IState {\r\n    quiz: Quiz = new Quiz();\r\n    saved: boolean = false;\r\n    showChoices: boolean = true;\r\n}\r\n\r\nclass QuizManagementForm extends BaseComponent {\r\n    quizService: QuizService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.quizService = this.getServices().quizService;\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.validateQuizFromProps();\r\n        document.title = \"Quiz Form\";\r\n    }\r\n    validateQuizFromProps = () => {\r\n        if (!this.props.location.state) return;\r\n        const quiz = this.props.location.state.quiz;\r\n\r\n        if (quiz) {\r\n            this.setState({ quiz: Object.assign(new Quiz(), quiz) });\r\n        }\r\n    }\r\n    reset = () => {\r\n        this.showConfirmationDanger(\"Reset Quiz?\").then((ok) => {\r\n            if (!ok ) return;\r\n            this.setState({ quiz: new Quiz() });\r\n        })\r\n\r\n    }\r\n    updateQuizBooleanField = (name :string, value:boolean) => {\r\n        const quiz: Quiz = this.state.quiz;\r\n        quiz[name] = value;\r\n        this.setState({ quiz: quiz });\r\n    }\r\n    updateQuizField = (e) => {\r\n        const name = e.target.name;\r\n        let value = e.target.value;\r\n        const quiz: Quiz = this.state.quiz;\r\n        if (e.target.type == 'file') {\r\n           const filePromise:Promise<String> =  toBase64v2(e.target);\r\n           filePromise.then((data:String)=>{\r\n               \r\n                quiz[name] = data;\r\n                this.setState({ quiz: quiz });\r\n           })\r\n        }\r\n        quiz[name] = value;\r\n        this.setState({ quiz: quiz });\r\n    }\r\n    addQuestion = (e) => {\r\n        this.doAddQUestion(false);\r\n    }\r\n    addQuestionEssay = (e) => {\r\n        this.doAddQUestion(true);\r\n    }\r\n    doAddQUestion = (essay:boolean) => {\r\n        const quiz: Quiz = this.state.quiz;\r\n        if (quiz.questions == undefined) {\r\n            quiz.questions = [];\r\n        }\r\n        const question: QuizQuestion = QuizQuestion.publicQuizQuestion(essay);\r\n        question.statement = \"Question \" +(essay?\"- ESSAY \":\"\") + (quiz.questions.length + 1);\r\n        quiz.questions.push(question);\r\n        this.setState({ quiz: quiz });\r\n    }\r\n    setAnswer = (code: string, questionIndex: number) => {\r\n        const quiz: Quiz = this.state.quiz;\r\n        if (quiz.questions == undefined) return;\r\n        quiz.questions[questionIndex].answerCode = code;\r\n        this.setState({ quiz: quiz });\r\n    }\r\n    updateQuestionField = (e: ChangeEvent) => {\r\n        const target = e.target as any;\r\n        if (!target) return;\r\n\r\n        const index = parseInt(target.dataset['index'] ?? \"0\");\r\n        const quiz: Quiz = this.state.quiz;\r\n        if (quiz.questions == undefined) return;\r\n\r\n        if (target.name == 'image') {\r\n            toBase64v2(target).then(\r\n                (imageString) => {\r\n                    if (!quiz.questions || !imageString.startsWith(\"data:image\")) return;\r\n                    quiz.questions[index][target.name] = imageString;\r\n                    this.setState({ quiz: quiz });\r\n                }\r\n            )\r\n        } else {\r\n            quiz.questions[index][target.name] = target.value;\r\n            this.setState({ quiz: quiz });\r\n        }\r\n    }\r\n    updateChoiceField = (e: ChangeEvent) => {\r\n        const target = e.target as any;\r\n        if (!target) return;\r\n\r\n        const questionIndex = parseInt(target.dataset['questionindex'] ?? \"0\");\r\n        const choiceIndex = parseInt(target.dataset['index'] ?? \"0\");\r\n        const quiz: Quiz = this.state.quiz;\r\n        const questions: QuizQuestion[] = quiz.questions ?? [];\r\n        const question: QuizQuestion = questions[questionIndex];\r\n        if (0 == questions.length || !question.choices) {\r\n            return;\r\n        }\r\n        //update selected choice\r\n        if (target.name == 'image') {\r\n            toBase64v2(target).then(\r\n                (imageString) => {\r\n                    if (!question.choices || !imageString.startsWith(\"data:image\")) return;\r\n                    question.choices[choiceIndex][target.name] = imageString;\r\n                    this.setState({ quiz: quiz });\r\n                }\r\n            )\r\n        } else {\r\n            question.choices[choiceIndex][target.name] = target.value;\r\n            this.setState({ quiz: quiz });\r\n        }\r\n    }\r\n    removeQuestion = (index: number) => {\r\n        const quiz: Quiz = this.state.quiz;\r\n        if (quiz.questions == undefined) return;\r\n        quiz.questions.splice(index, 1);\r\n        this.showConfirmationDanger(\"Remove Question?\")\r\n            .then((ok) => {\r\n                if (ok) { this.setState({ quiz: quiz }); }\r\n            });\r\n    }\r\n    removeQuestionImage = (index: number) => {\r\n        const quiz: Quiz = this.state.quiz;\r\n        if (!quiz.questions) return;\r\n        if (quiz.questions[index]) {\r\n            quiz.questions[index].nulledFields = [\"image\"];\r\n            quiz.questions[index].image = undefined;\r\n        }\r\n        this.showConfirmationDanger(\"Remove Question Image?\")\r\n            .then((ok) => {\r\n                if (ok) { this.setState({ quiz: quiz }); }\r\n            });\r\n    }\r\n    removeChoiceImage = (index: number, questionIndex: number) => {\r\n        const quiz: Quiz = this.state.quiz;\r\n        const questions: QuizQuestion[] = quiz.questions ?? []\r\n        const question: QuizQuestion = questions[questionIndex];\r\n        if (0 == questions.length || !question.choices || !question.choices[index]) {\r\n            return;\r\n        }\r\n        question.choices[index].image = undefined;\r\n        question.choices[index].nulledFields = [\"image\"];\r\n        this.showConfirmationDanger(\"Remove Choice Image?\")\r\n            .then((ok) => {\r\n                if (ok) { this.setState({ quiz: quiz }); }\r\n            });\r\n\r\n    }\r\n    removeAllQuestion = (e) => {\r\n        const quiz: Quiz = this.state.quiz;\r\n        this.showConfirmationDanger(\"Remove All Question?\")\r\n            .then((ok) => {\r\n                quiz.questions = [];\r\n                if (ok) { this.setState({ quiz: quiz }); }\r\n            });\r\n    }\r\n    submitQuiz = (e) => {\r\n        e.preventDefault();\r\n        console.debug(\"QUIZ: \", this.state.quiz);\r\n\r\n        this.showConfirmation(this.state.quiz.id ? \"Update Quiz?\" : \"Create Quiz?\").then((ok) => {\r\n            if (ok) {\r\n                this.doSubmitQuiz();\r\n            }\r\n        })\r\n    }\r\n    doSubmitQuiz = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.quizService.submit, this.dataSaved,\r\n            this.showCommonErrorAlert, this.state.quiz\r\n        )\r\n    }\r\n    dataSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Success\");\r\n        if (response.quiz) {\r\n            this.props.history.push(\"/quizmanagement/detail/\" + response.quiz?.id);\r\n        }\r\n    }\r\n    showChoices = () => { this.setState({showChoices:true}); }\r\n    hideChoices = () => { this.setState({showChoices:false});  }\r\n    render() {\r\n        const quiz: Quiz = this.state.quiz;\r\n        const questions: QuizQuestion[] = quiz.questions ?? [];\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Quiz Form</h2>\r\n\r\n                <form onSubmit={this.submitQuiz} >\r\n                    <Card title=\"Quiz Form\"> <QuizInformationForm quiz={quiz} updateQuizBooleanField={this.updateQuizBooleanField} updateField={this.updateQuizField} />\r\n                    </Card>\r\n                    <div className=\"btn-group\" style={{ marginBottom: '5px', marginTop: '5px' }}>\r\n                        <AnchorButton className=\"btn btn-secondary\" iconClassName=\"fas fa-plus\" onClick={this.addQuestion} >Question</AnchorButton>\r\n                        <AnchorButton className=\"btn btn-secondary\"  onClick={this.addQuestionEssay} >Question Essay</AnchorButton>\r\n                        <AnchorButton className=\"btn btn-danger\" iconClassName=\"fas fa-times\" onClick={this.removeAllQuestion} >Remove All Question</AnchorButton>\r\n                        <AnchorButton className=\"btn btn-warning\" onClick={this.reset}>Reset</AnchorButton>\r\n                    </div>\r\n                    <Card title={\"Quiz Questions :\" + (questions.length)}\r\n                        footerContent={quiz.questions && quiz.questions.length > 0 ? <input type=\"submit\" className=\"btn btn-success\" value={quiz.id ? \"Update\" : \"Create\"} /> : null}\r\n                    >\r\n                        <AnchorButton show={this.state.showChoices == true} onClick={this.hideChoices} iconClassName=\"fas fa-angle-up\">Hide Choices</AnchorButton>\r\n                        <AnchorButton show={this.state.showChoices == false} onClick={this.showChoices} iconClassName=\"fas fa-angle-down\">Show Choices</AnchorButton>\r\n                        <p/>\r\n                        { questions.map((question, i) => {\r\n                            return (\r\n                                <QuestionForm key={\"quest-form-\" + i}\r\n                                    questionsTimered={quiz.questionsTimered}\r\n                                    showChoices={this.state.showChoices}\r\n                                    setAnswer={this.setAnswer}\r\n                                    question={question} index={i}\r\n                                    updateField={this.updateQuestionField} updateChoiceField={this.updateChoiceField}\r\n                                    remove={this.removeQuestion}\r\n                                    removeImage={this.removeQuestionImage} removeChoiceImage={this.removeChoiceImage}\r\n                                />\r\n                            )\r\n                        }) }\r\n                    </Card>\r\n                    <p />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(QuizManagementForm))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport Quiz from './../../../models/Quiz';\r\nimport SimpleError from '../../alert/SimpleError';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport QuizQuestion from './../../../models/QuizQuestion';\r\nimport Card from '../../container/Card';\r\nimport QuizChoice from './../../../models/QuizChoice';\r\nimport QuizService from './../../../services/QuizService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport { baseImageUrl } from './../../../constant/Url';\r\nimport Spinner from '../../loader/Spinner';\r\nimport { timerString } from './../../../utils/DateUtil';\r\n\r\nclass IState {\r\n    quiz: Quiz | undefined = undefined;\r\n    loading: boolean = false;\r\n}\r\nclass QuizDetail extends BaseComponent {\r\n    quizService: QuizService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.quizService = this.getServices().quizService;\r\n    }\r\n    startLoading = (withProgress: boolean) => {\r\n        super.startLoading(withProgress);\r\n        this.setState({ loading: true });\r\n    }\r\n    endLoading = () => {\r\n        super.endLoading();\r\n        this.setState({ loading: false });\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.loadQuiz();\r\n        document.title = \"Quiz Detail\";\r\n    }\r\n    loadQuiz = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.quizService.getQuiz,\r\n            this.dataLoaded,\r\n            this.showCommonErrorAlert,\r\n            parseInt(this.getId())\r\n        )\r\n    }\r\n    dataLoaded = (response: WebResponse) => {\r\n        this.setState({ quiz: response.quiz });\r\n    }\r\n    getId = () => {\r\n        return this.props.match.params.id;\r\n    }\r\n    editRecord = (e) => {\r\n        const app = this;\r\n        this.showConfirmation(\"Edit Quiz?\")\r\n            .then(function (ok) {\r\n                if (!ok) return;\r\n                app.props.history.push({\r\n                    pathname: \"/quizmanagement/form\",\r\n                    state: { quiz: app.state.quiz }\r\n                })\r\n            });\r\n    }\r\n    deleteRecord = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete Quiz?\")\r\n            .then(function (ok) {\r\n                if (!ok) return;\r\n                app.doDeleteQuiz();\r\n            });\r\n    }\r\n    doDeleteQuiz = () => {\r\n        if (!this.state.quiz) return;\r\n        this.commonAjaxWithProgress(\r\n            this.quizService.deleteQuiz,\r\n            this.dataDeleted,\r\n            this.showCommonErrorAlert,\r\n            this.state.quiz.id\r\n        )\r\n    }\r\n    dataDeleted = (response: WebResponse) => {\r\n        this.showInfo(\"Record Deleted\");\r\n        this.setState({ quiz: undefined });\r\n    }\r\n\r\n    render() {\r\n\r\n        if (!this.state.quiz) {\r\n            return (\r\n                <div id=\"QuizDetail\" className=\"container-fluid section-body\">\r\n                    <h2>Quiz Detail</h2>\r\n                    {this.state.loading ? <Spinner /> : <SimpleError children=\"No Data\" />}\r\n                </div>\r\n            )\r\n        }\r\n        const quiz: Quiz = Object.assign(new Quiz, this.state.quiz);\r\n        const questions: QuizQuestion[] = quiz.questions ?? new Array<QuizQuestion>();\r\n        const questionTimered: boolean = quiz.questionsTimered;\r\n        return (\r\n            <div  className=\"section-body container-fluid\">\r\n                <h2>Quiz Detail</h2>\r\n                <div >\r\n                    <div className=\"alert alert-info\">\r\n                        <FormGroup label=\"Title\">{quiz.title}</FormGroup>\r\n                        <FormGroup label=\"Access Code\"><i>{quiz.accessCode}</i></FormGroup>\r\n                        <FormGroup label=\"Description\">{quiz.description}</FormGroup>\r\n                        <FormGroup label=\"On Finished Message\">{quiz.afterCompletionMessage}</FormGroup>\r\n                        <FormGroup label=\"Duration \">{timerString(quiz.duration)}</FormGroup>\r\n                        <FormGroup label=\"Active\">{quiz.active ? \"YES\" : \"NO\"}</FormGroup>\r\n                        <FormGroup label=\"Repeatable\">{quiz.repeatable ? \"YES\" : \"NO\"}</FormGroup>\r\n                        <FormGroup label=\"Show All Question\">{quiz.showAllQuestion ? \"YES\" : \"NO\"}</FormGroup>\r\n                        <FormGroup label=\"Qestions Timered\">{quiz.questionsTimered ? \"YES\" : \"NO\"}</FormGroup>\r\n                        <FormGroup>\r\n\r\n                            <AnchorButton style={{ marginRight: '5px' }} iconClassName=\"fas fa-edit\" className=\"btn btn-warning\" onClick={this.editRecord}>Edit</AnchorButton>\r\n                            <AnchorButton className=\"btn btn-danger\" iconClassName=\"fas fa-times\" onClick={this.deleteRecord}>Delete</AnchorButton>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Image\">\r\n                            {quiz.image?\r\n                            <img height=\"100\" width=\"100\" src={baseImageUrl()+quiz.image} />:\"No Image\"}\r\n                        </FormGroup>\r\n                    </div>\r\n                    {questions.map((question, i) => {\r\n                        return (\r\n                            <Question questionTimered={questionTimered} number={i+1} key={\"qdl-\" + i} question={question} />\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst Question = (props: {questionTimered:boolean, number:number, question: QuizQuestion }) => {\r\n    const question = props.question;\r\n    const choices: QuizChoice[] = question.choices ?? [];\r\n    return (\r\n        <Card attributes={{ style: { marginBottom: '5px' } }}>\r\n            <h4>{props.number}. {question.statement}</h4>\r\n            <FormGroup show={props.questionTimered}>\r\n                <i className=\"fas fa-clock\"/>&nbsp;{timerString(question.duration)}\r\n            </FormGroup>\r\n            {question.image ? <img src={baseImageUrl() + question.image} height=\"100\" /> : null}\r\n            {question.essay? <p>\r\n                <u  >Answer:</u>\r\n                <p>{question.answerEssay}</p>\r\n            </p>:null}\r\n            {choices.map((choice, c) => {\r\n                const rightAnswer = choice.answerCode == question.answerCode;\r\n                return (\r\n                    <div key={\"qdc-\" + question.id + c}>\r\n                        <b className={rightAnswer ? \"border rounded border-success text-success\" : \"text-dark\"}>{choice.answerCode}</b>\r\n                        <span style={{ marginLeft: '5px' }}>{choice.statement}</span>\r\n                        <p />\r\n                        {choice.image ? <img src={baseImageUrl() + choice.image} height=\"100\" /> : null}\r\n                    </div>\r\n                )\r\n            })}\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(QuizDetail))","\r\n\r\nimport React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseMainMenus from '../../layout/BaseMainMenus';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport PublicQuizService from '../../../services/PublicQuizService';\r\nimport Quiz from '../../../models/Quiz';\r\nimport Filter from '../../../models/Filter';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport NavigationButtons from '../../navigation/NavigationButtons';\r\nimport QuizList from '../quizshared/QuizList';\r\n\r\nclass IState {\r\n    quizList: Quiz[] = new Array();\r\n    loading: boolean = false;\r\n    filter: Filter = new Filter();\r\n    totalData: number = 0;\r\n}\r\nclass PublicQuizMain extends BaseMainMenus {\r\n    publicQuizService: PublicQuizService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Take Quiz\", true);\r\n        this.publicQuizService = this.getServices().publicQuizService;\r\n    }\r\n    startLoading = (realtime:boolean) => { this.setState({ loading: true }); super.startLoading(realtime) }\r\n    endLoading = () => { this.setState({ loading: false }); super.endLoading() }\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        this.loadRecords();\r\n    }\r\n\r\n    dataLoaded = (response: WebResponse) => {\r\n        this.setState({ quizList: response.entities ?? [], totalData: response.totalData });\r\n    }\r\n\r\n    loadRecords = () => {\r\n        if (this.state.loading) return;\r\n        const filter = this.state.filter;\r\n        filter.availabilityCheck = true;\r\n        this.commonAjaxWithProgress(\r\n            this.publicQuizService.getQuizList,\r\n            this.dataLoaded,\r\n            this.showCommonErrorAlert,\r\n            filter\r\n        )\r\n    }\r\n    loadRecordsWithFilter = (fieldsFilter: any) => {\r\n        if (this.state.loading) return;\r\n        const filter = this.state.filter;\r\n        filter.page = 0;\r\n        filter.fieldsFilter = fieldsFilter;\r\n        this.setState({ filter: filter });\r\n        this.loadRecords();\r\n    }\r\n    loadRecordsAtPage = (page: number) => {\r\n        if (this.state.loading) return;\r\n        const filter = this.state.filter;\r\n        filter.page = page;\r\n        this.setState({ filter: filter });\r\n        this.loadRecords();\r\n    }\r\n    takeQuiz = (quiz: Quiz) => {\r\n        this.showConfirmation(\"Take Quiz: \" + quiz.title + \"?\")\r\n            .then((ok) => {\r\n                if (ok) {\r\n                    this.props.history.push({ pathname: \"/quiz/challenge/\" + quiz.id })\r\n                }\r\n            })\r\n    }\r\n    render() {\r\n        const filter: Filter = this.state.filter;\r\n        const startNumber = (filter.limit ?? 0) * (filter.page ?? 0);\r\n        return (\r\n            <div style={{ marginTop: '20px', }} className=\"section-body container-fluid\">\r\n                <h2>Take Quiz</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Challenge your self\r\n                </div>\r\n                <NavigationButtons\r\n                    activePage={filter.page ?? 0}\r\n                    limit={filter.limit ?? 5} totalData={this.state.totalData}\r\n                    onClick={this.loadRecordsAtPage}\r\n                />\r\n                <QuizList \r\n                    loading={this.state.loading}\r\n                    onFilter = {this.loadRecordsWithFilter}\r\n                    quizOnClick={this.takeQuiz} \r\n                    startingNumber={startNumber} quizList={this.state.quizList} /> \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(PublicQuizMain))","import React, { Component } from 'react'\r\nimport { timerString } from '../../../../utils/DateUtil';\r\n\r\ninterface Props {\r\n    onTimeout(): any;\r\n    duration: number;\r\n    display?: string;\r\n    latestUpdate?: Date;\r\n}\r\nclass State {\r\n\r\n\r\n}\r\nexport default class QuizTimer extends Component<Props, State> {\r\n    private  tick: number = 0;\r\n    state: State = new State();\r\n    private  timeout: any = undefined;\r\n    private progressRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n    private timerStringRef: React.RefObject<HTMLSpanElement> = React.createRef();\r\n    private stop:boolean = false;\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    updateTick = () => {\r\n\r\n        this.resetTimeout();\r\n        const duration = this.props.duration;\r\n        let tick = this.tick;\r\n        if (tick >= duration) {\r\n            this.updateTickWithCallback(tick, this.props.onTimeout);\r\n            return;\r\n        };\r\n        tick += 0.1;\r\n        this.updateTickWithCallback(tick, this.updateTimerLoop);\r\n    }\r\n\r\n    updateTickWithCallback = (tick: number, callback: () => any) => {\r\n        this.tick = tick;\r\n        const width = (100 - this.tick * 100 / this.props.duration) + '%';\r\n        if (this.progressRef.current) {\r\n            this.progressRef.current.style.width = width;\r\n        }\r\n        if (this.timerStringRef.current) {\r\n            const string = timerString(this.props.duration - Math.ceil(this.tick));\r\n            this.timerStringRef.current.innerHTML = '<strong>'+string+'</strong>';\r\n\r\n        }\r\n        callback();\r\n    }\r\n\r\n    stopTimer = () => {\r\n        console.debug(\"STOP TIMER\");\r\n        this.stop  = true;\r\n    }\r\n\r\n    resetTick = () => {\r\n        this.updateTickWithCallback(0, this.updateTimerLoop);\r\n    }\r\n\r\n    resetTimeout = () => {\r\n        if (this.timeout) {\r\n            clearTimeout(this.timeout);\r\n        }\r\n    }\r\n    updateTimerLoop = () => {\r\n        if (this.stop == true) {\r\n            console.debug(\"WILL update timer but it has been stopped..\");\r\n            return;\r\n        }\r\n        // console.debug(\"updateTimerLoop: this.stop: \", this.stop);\r\n        this.timeout = setTimeout(this.updateTick, 100);\r\n    }\r\n    render() {\r\n          \r\n        return (\r\n            <div className=\"container-fluid text-center\">\r\n                <p><i className=\"fas fa-stopwatch\"/>&nbsp;<span ref={this.timerStringRef}></span></p>\r\n                <div className=\"progress\" style={{ height: '5px' }}>\r\n                    <div ref={this.progressRef} style={{ transitionDuration: '500ms', width:'0%' }} \r\n                    className=\"bg-dark\"    ></div>\r\n                </div>\r\n                \r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\n","import React, { Component, Fragment } from 'react'\r\nimport Quiz from './../../../../models/Quiz';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport QuizQuestion from './../../../../models/QuizQuestion';\r\nimport QuizChoice from './../../../../models/QuizChoice';\r\nimport Modal from './../../../container/Modal';\r\nimport AnchorButton from './../../../navigation/AnchorButton';\r\nimport Card from './../../../container/Card';\r\nimport { baseImageUrl } from './../../../../constant/Url';\r\nimport ToggleButton from '../../../navigation/ToggleButton';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport { timerString } from './../../../../utils/DateUtil';\r\nimport QuizTimerProgress from './QuizTimerProgress';\r\nimport QuizResult from './../../../../models/QuizResult';\r\ninterface Props {\r\n    result?: QuizResult,\r\n    questionTimered: boolean, quiz: Quiz,\r\n    setChoice(code: string | undefined, questionIndex: number): any,\r\n    onTimeout(): any, submit(): any\r\n}\r\nclass State {\r\n    questionIndex: number = 0;\r\n    showAllQuestion: boolean = true;\r\n}\r\nexport default class QuizBody extends Component<Props, State> {\r\n\r\n    questionTimerRef: React.RefObject<QuizTimerProgress> = React.createRef();\r\n    state: State = new State();\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    updateQuestionIndex = (index: number) => {\r\n        // if (this.props.questionTimered) return;\r\n        console.debug(\"updateQuestionIndex: \", index);\r\n        this.setQuestionIndex(index);\r\n    }\r\n    getCurrentQuestion = () => {\r\n        if (this.props.quiz.questions && this.props.quiz.questions.length > this.state.questionIndex) {\r\n            return this.props.quiz.questions[this.state.questionIndex];\r\n        }\r\n        this.setState({ questionIndex: 0 });\r\n        return this.props.quiz.questions[0];\r\n    }\r\n    toggleQuestionView = (showAll: boolean) => {\r\n        this.setState({ showAllQuestion: showAll, questionIndex: 0 });\r\n    }\r\n    nextQuestion = () => {\r\n        if (this.props.quiz.questions.length - 1 == this.state.questionIndex) {\r\n            this.props.onTimeout();\r\n            return;\r\n        }\r\n        const nextIndex = this.state.questionIndex + 1;\r\n        this.setQuestionIndex(nextIndex);\r\n    }\r\n    setQuestionIndex = (index: number) => {\r\n        this.setState({ questionIndex: index }, () => {\r\n            this.resetTimer();\r\n            try {\r\n                this.props.setChoice(this.props.quiz.questions[index].answerCode, index);\r\n            } catch (e) { }\r\n        });\r\n    }\r\n    updateTimer = () => {\r\n        if (this.questionTimerRef.current) {\r\n            this.questionTimerRef.current.updateTimerLoop();\r\n        }\r\n    }\r\n    resetTimer = () => {\r\n        if (this.questionTimerRef.current) {\r\n            this.questionTimerRef.current.resetTick();\r\n        }\r\n    }\r\n    setChoice = (code: string | undefined, index: number) => {\r\n        this.props.setChoice(code, index);\r\n        if (this.props.questionTimered) {\r\n            if (this.props.quiz.questions.length > index + 1) {\r\n                const nextIndex = index + 1;\r\n                this.setQuestionIndex(nextIndex);\r\n            } else {\r\n                this.onSubmit();\r\n            }\r\n        } else if (!this.props.quiz.showAllQuestion) {\r\n            if (this.props.quiz.questions.length > index + 1) {\r\n                const nextIndex = index + 1;\r\n                this.setQuestionIndex(nextIndex);\r\n            } else {\r\n                this.onSubmit();\r\n            }\r\n        }\r\n    }\r\n    onSubmit = () => {\r\n        if (this.questionTimerRef.current ) {\r\n            this.questionTimerRef.current.stopTimer();\r\n        }\r\n        this.props.submit();\r\n    }\r\n    componentDidMount() {\r\n        this.updateTimer();\r\n    }\r\n    \r\n    render() {\r\n\r\n        const props = this.props;\r\n        const quiz = props.quiz;\r\n        const questions: QuizQuestion[] = quiz.questions ?? [];\r\n        const showAllQuestion: boolean = quiz.showAllQuestion == false ? quiz.showAllQuestion : this.state.showAllQuestion;\r\n        return (\r\n            <div>\r\n                <h1><i className=\"fas fa-feather-alt\" />&nbsp;{quiz.title}</h1>\r\n                <div className='alert alert-info'>\r\n                    <FormGroup label=\"Started at\">\r\n                        {quiz.startedDate ? new Date(quiz.startedDate).toLocaleString() : \"-\"}\r\n                    </FormGroup>\r\n                    <FormGroup show={!this.props.result} label=\"Duration\">\r\n                        <p>{timerString(quiz.duration)}</p>\r\n                    </FormGroup>\r\n                    {/* <FormGroup label=\"Description\">\r\n                        <p>{quiz.description}</p>\r\n                    </FormGroup> */}\r\n                    <FormGroup label=\"Show All Question\">\r\n                        {/* <ToggleButton onClick={this.toggleQuestionView}\r\n                            active={this.state.showAllQuestion}\r\n                        /> */}\r\n                        {!quiz.showAllQuestion ? \"No\" : <ToggleButton onClick={this.toggleQuestionView}\r\n                            active={this.state.showAllQuestion}\r\n                        />}\r\n                    </FormGroup>\r\n                </div>\r\n                {showAllQuestion ? questions.map((question, i) => {\r\n                    return (<QuestionBody setChoice={this.setChoice} index={i} question={question} key={\"pqqs-\" + i} />)\r\n                }) :\r\n                    <Fragment>\r\n                        {props.questionTimered  ?\r\n                            <QuizTimerProgress display=\"progress\" onTimeout={this.nextQuestion} ref={this.questionTimerRef} duration={this.getCurrentQuestion().duration} />\r\n                            : null\r\n                        }\r\n                        <QuestionNavigation enabled={quiz.questionsTimered == false} updateQuestionIndex={this.updateQuestionIndex} questionCount={props.quiz.questions.length} index={this.state.questionIndex} />\r\n                        <QuestionBody setChoice={this.setChoice} index={this.state.questionIndex} question={this.getCurrentQuestion()} />\r\n                        <QuestionNavigation enabled={quiz.questionsTimered == false} updateQuestionIndex={this.updateQuestionIndex} questionCount={props.quiz.questions.length} index={this.state.questionIndex} />\r\n                    </Fragment>\r\n                }\r\n                <Modal title=\"Option\">\r\n                    <AnchorButton onClick={this.onSubmit} className=\"btn btn-primary\" >Submit</AnchorButton>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst QuestionNavigation = (props: { enabled: boolean, index: number, updateQuestionIndex(index: number): any, questionCount: number }) => {\r\n    const enabled = props.enabled;\r\n    return (\r\n        <div >\r\n            <p />\r\n            <div className=\"row container-fluid\">\r\n                <div className=\"col-5 text-center\">\r\n                    <AnchorWithIcon className=\"btn btn-secondary\" children=\"Previous\"\r\n                        onClick={(e) => props.updateQuestionIndex(props.index - 1)} show={enabled && props.index > 0} iconClassName=\"fas fa-angle-left\" />\r\n                </div>\r\n                <div className=\"col-2 text-center\">\r\n                    <p>Question: {props.index + 1} of {props.questionCount}</p>\r\n                </div>\r\n                <div className=\"col-5 text-center\">\r\n                    <AnchorWithIcon className=\"btn btn-secondary\" children=\"Next\"\r\n                        onClick={(e) => props.updateQuestionIndex(props.index + 1)} show={enabled && props.index < props.questionCount - 1} iconClassName=\"fas fa-angle-right\" />\r\n                </div>\r\n            </div>\r\n            <p />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst QuestionBody = (props: { index: number, question: QuizQuestion, setChoice(code: string | undefined, index: number): any }) => {\r\n    const question = props.question;\r\n    const choices: QuizChoice[] = question.choices ?? []\r\n    return (\r\n        <Card className=\"bg-light\" attributes={{ style: { marginBottom: '5px' } }} >\r\n            <div className=\"row\">\r\n                <h2 className=\"col-1 text-dark\">{props.index + 1}</h2>\r\n                <div className=\"col-11\"><h4 className=\"text-dark\">{question.statement}</h4>\r\n\r\n                    {question.image ? <img height=\"150\" src={baseImageUrl() + question.image} /> : null}\r\n                    <hr />\r\n                    {question.essay?\r\n                    <textarea value={question.answerEssay} onChange={(e)=>{\r\n                        props.setChoice(e.target.value, props.index);\r\n\r\n                    }\r\n                    } className=\"form-control\" />\r\n                    :null}\r\n                    {choices.map((choice, i) => {\r\n                        return <ChoiceItem\r\n                            correctChoice={question.correctChoice}\r\n                            answered={choice.answerCode == question.answerCode} setChoice={(code) => props.setChoice(code, props.index)} key={\"pqci-\" + i + \"-of-\" + props.index} choice={choice} index={i} />\r\n                    })}\r\n                </div>\r\n            </div>\r\n        </Card>\r\n    )\r\n}\r\nconst ChoiceItem = (props: { choice: QuizChoice, index: number, setChoice(code?: string): any, correctChoice: string | undefined, answered: boolean }) => {\r\n    const choice: QuizChoice = props.choice;\r\n    let choiceClass = props.answered ? \"btn btn-secondary\" : \"btn btn-outline-secondary\";\r\n    //after submission\r\n    if (props.correctChoice != undefined) {\r\n        if (choice.answerCode == props.correctChoice) {\r\n            if (props.answered) {\r\n                choiceClass = \"btn btn-primary\";\r\n            } else {\r\n                choiceClass = \"btn btn-success\";\r\n            }\r\n        } else if (props.answered) {\r\n            choiceClass = \"btn btn-danger\";\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"row\" >\r\n            <div className=\"col-1 text-left\">\r\n                <a onClick={(e) => { props.setChoice(choice.answerCode) }}\r\n                    className={choiceClass}> <strong>{choice.answerCode}</strong></a>\r\n            </div>\r\n            <div className=\"col-11 \">\r\n                <p>{choice.statement}</p>\r\n                {choice.image ? <img height=\"150\" src={baseImageUrl() + choice.image} /> : null}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { timerString } from './../../../../utils/DateUtil';\r\n\r\ninterface Props {\r\n    onTimeout(): any;\r\n    duration: number; \r\n    latestUpdate?: Date;\r\n}\r\nclass State {\r\n\r\n    tick: number = 0;\r\n}\r\nexport default class QuizTimer extends Component<Props, State> {\r\n\r\n    state: State = new State();\r\n    timeout: any = undefined;\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    updateTick = () => {\r\n\r\n        this.resetTimeout();\r\n        const duration = this.props.duration;\r\n        let tick = this.state.tick;\r\n        if (tick >= duration) {\r\n            this.setState({ tick: 0 }, this.props.onTimeout);\r\n            return;\r\n        };\r\n        tick++;\r\n        this.setState({ tick: tick }, this.updateTimerLoop);\r\n    }\r\n\r\n    resetTick = () => {\r\n        this.setState({ tick: 0 }, this.updateTimerLoop);\r\n    }\r\n\r\n    resetTimeout = () => {\r\n        if (this.timeout) {\r\n            clearTimeout(this.timeout);\r\n        }\r\n    }\r\n    updateTimerLoop = () => {\r\n        this.timeout = setTimeout(this.updateTick, 1000);\r\n    }\r\n    render() {\r\n        const props = this.props;\r\n         \r\n        return (\r\n            <Timer latestUpdate={this.props.latestUpdate} duration={props.duration} tick={this.state.tick} />\r\n        )\r\n    }\r\n}\r\n \r\n\r\n\r\nconst Timer = (props: { latestUpdate?:Date,duration: number, tick: number }) => {\r\n\r\n    const seconds: number = props.duration - props.tick;\r\n    let className;\r\n    let iconClassName = seconds % 2 == 0 ? \"fas fa-hourglass-end\" : \"fas fa-hourglass-start\";\r\n    if (seconds <= 15) {\r\n        className = \"bg-danger text-warning\";\r\n\r\n    } else {\r\n        className = \"bg-warning \"\r\n    }\r\n    return <div className={className} style={{ fontSize: '1.7em', right: '10px', padding: '10px', position: 'fixed', zIndex: 1000 }}>\r\n        <span style={{ marginRight: '10px' }}>\r\n            <i className={iconClassName}></i>\r\n        </span>\r\n        <span>\r\n            <b>{timerString(seconds)}</b>\r\n        \r\n        </span>\r\n        {props.latestUpdate? \r\n        <p style={{fontSize:'0.5em'}}>Last Update: {props.latestUpdate.toLocaleString()}</p>:null}\r\n    </div>\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport SimpleError from './../../../alert/SimpleError';\r\nimport AnchorWithIcon from './../../../navigation/AnchorWithIcon';\r\nimport Quiz from './../../../../models/Quiz';\r\nimport { baseImageUrl } from './../../../../constant/Url';\r\nimport { timerString } from './../../../../utils/DateUtil';\r\nimport Modal from './../../../container/Modal';\r\nimport QuizResult from './../../../../models/QuizResult';\r\nimport AnchorButton from './../../../navigation/AnchorButton';\r\n\r\n\r\nexport const RertyPage = (props:{retrySubmit:Function}) => {\r\n    return (\r\n        <SimpleError style={{ marginTop: '20px' }} >\r\n                <h3>Error While Submitting Answer</h3>\r\n                <AnchorWithIcon onClick={props.retrySubmit} iconClassName=\"fas fa-redo\">Retry</AnchorWithIcon>\r\n            </SimpleError>\r\n    )\r\n}\r\n\r\nexport const StatusTImeout = (props) => {\r\n    return (\r\n         <div style={{ marginTop: '20px', }} className=\"container-fluid\">\r\n                <SimpleError  ><i style={{ marginRight: '5px' }} className=\"fas fa-exclamation-circle\" /> Timeout</SimpleError>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport const QuizLanding = (props:{quiz:Quiz, start:Function}) => {\r\n    const quiz = props.quiz;\r\n    return (\r\n        <div style={{ marginTop: '20px', paddingTop: '20px' }} className=\"text-center container-fluid\">\r\n        <img height=\"250\" src={quiz.image ? baseImageUrl() + quiz.image : \"/logo192.png\"} className=\"rounded-circle\" />\r\n        <h3><strong>{quiz.title}</strong></h3>\r\n        <p>Duration: {timerString(quiz.duration)}</p>\r\n        <p>Question: {quiz.getQuestionCount()}</p>\r\n        <p />\r\n        <AnchorWithIcon className=\"btn btn-dark\" onClick={props.start} iconClassName=\"fas fa-play\">Start</AnchorWithIcon>\r\n    </div>\r\n    )\r\n}\r\n\r\n\r\nexport  const QuizResultInfo = (props: {quiz:Quiz, quizResult: QuizResult }) => {\r\n    const quizResult = props.quizResult;\r\n    return (<Modal title=\"Result\">\r\n        {quizResult.displayScore == true?\r\n        <>\r\n        <h2 className=\"text-center\">Your Score <strong className=\"text-primary\">{quizResult.score.toFixed(2)}</strong></h2>\r\n        <h4 className=\"text-center text-success\">Correct Answer {quizResult.correctAnswer}</h4>\r\n        <h4 className=\"text-center text-danger\">Wrong Answer {quizResult.wrongAnswer}</h4>\r\n        </>\r\n        :<h2 className=\"text-center text-primary\">Your Response Has Been Submitted</h2>\r\n        }\r\n        <div className=\"text-center\">\r\n            {props.quiz.repeatable?\r\n            <AnchorButton onClick={()=>{\r\n                window.location.reload()\r\n            }} iconClassName=\"fas fa-redo\">Reload | Try Again</AnchorButton>\r\n            :\r\n            <h4>Thanks for Participating</h4>\r\n        }\r\n        </div>\r\n        <hr/>\r\n        <p>{quizResult.message}</p>\r\n    </Modal>\r\n    )\r\n}","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport PublicQuizService from '../../../../services/PublicQuizService';\r\nimport Quiz from '../../../../models/Quiz';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport SimpleError from '../../../alert/SimpleError';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport QuizResult from '../../../../models/QuizResult';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport QuizBody from './QuizBody';\r\nimport QuizTimer from './QuizTimer';\r\nimport { RertyPage, QuizResultInfo, StatusTImeout, QuizLanding } from './quizChallengeHalper';\r\nimport QuizHistoryModel from './../../../../models/QuizHistory';\r\nimport { doItLater } from './../../../../utils/EventUtil';\r\n\r\nclass IState {\r\n    quiz: Quiz | undefined = undefined;\r\n    loading: boolean = false;\r\n    quizResult: QuizResult | undefined\r\n    timeout: boolean = false;\r\n    running: boolean = false;\r\n    errorSubmit: boolean = false;\r\n    latestUpdate: Date | undefined;\r\n}\r\n\r\nclass PublicQuizChallenge extends BaseComponent {\r\n    quizTemp?: Quiz = undefined;\r\n    publicQuizService: PublicQuizService;\r\n    state: IState = new IState();\r\n    timerRef: React.RefObject<QuizTimer> = React.createRef();\r\n    quizBodyRef: React.RefObject<QuizBody> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.publicQuizService = this.getServices().publicQuizService;\r\n    }\r\n    startLoading = (withProgress: boolean) => {\r\n        super.startLoading(withProgress);\r\n        this.setState({ loading: true });\r\n    }\r\n    endLoading = () => {\r\n        super.endLoading();\r\n        this.setState({ loading: false });\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"Quiz Challenge\";\r\n        this.loadQuiz();\r\n        this.setWsUpdateHandlerOnQuestionChange();\r\n    }\r\n    setWsUpdateHandlerOnQuestionChange = () => {\r\n        this.setWsUpdateHandler((response: WebResponse) => {\r\n            if (response.type != 'QUIZ_ANSWER_UPDATE' || !response.date) {\r\n                return;\r\n            }\r\n            this.setState({ latestUpdate: new Date(response.date) })\r\n            // console.debug(\"QUIZ_ANSWER_UPDATE UPDATE:\", new Date(response.date??0).toLocaleString());\r\n        })\r\n    }\r\n    start = (updateStartedDate: boolean = true) => {\r\n        const quiz: Quiz | undefined = this.state.quiz;\r\n        if (!quiz) return;\r\n        if (updateStartedDate) {\r\n            quiz.startedDate = new Date();\r\n        }\r\n        this.setState({ running: true, quiz: quiz }, () => {\r\n            this.beginTimer();\r\n            this.sendStartUpdate();\r\n        });\r\n    }\r\n    beginTimer = () => {\r\n      doItLater(() => {\r\n            if (this.timerRef.current) {\r\n                this.timerRef.current.updateTimerLoop();\r\n            } else {\r\n                console.debug(\"TIME NOT READY\");\r\n            }\r\n        }, 500);\r\n    }\r\n    componentWillUnmount() {\r\n        this.setWsUpdateHandler(undefined);\r\n    }\r\n    setFailedTimeout = () => {\r\n        this.doSubmitAnswer();\r\n        this.setState({ quiz: undefined, timeout: true });\r\n    }\r\n    dataLoaded = (response: WebResponse) => {\r\n        const history: QuizHistoryModel | undefined = response.quizHistory;\r\n        if (history && response.quiz) {\r\n            const quiz: Quiz = response.quiz;\r\n            const synchronizedQuiz = this.synchronizeLatestHistory(quiz, history);\r\n            if (synchronizedQuiz) {\r\n                this.setState({ quiz: synchronizedQuiz, quizResult: undefined },\r\n                    () => {\r\n                        this.start(false);\r\n                        this.updateQuestionIndex(synchronizedQuiz.maxQuestionNumber??1);\r\n                    });\r\n            }\r\n            return;\r\n        }\r\n        this.setState({ quiz: Object.assign(new Quiz(), response.quiz), quizResult: undefined });\r\n    }\r\n    synchronizeLatestHistory = (quiz: Quiz, history: QuizHistoryModel): Quiz | undefined => {\r\n        quiz.duration = history.remainingDuration ?? quiz.duration;\r\n        quiz.startedDate = history.started;\r\n        let questionNumber: number = history.maxQuestionNumber ?? 1;\r\n        if (history.updated && quiz.questionsTimered) {\r\n            const questionIndex = questionNumber - 1;\r\n            const elapsedSecond = Math.ceil((new Date().getTime() - new Date(history.updated).getTime()) / 1000);\r\n            const duration = quiz.questions[questionIndex].duration;\r\n            const remainingSecond = duration - elapsedSecond;\r\n            console.debug(\"actual duration: \", duration, \"-  \", elapsedSecond, \" = \", remainingSecond);\r\n            if (remainingSecond > 0) {\r\n                quiz.questions[questionIndex].duration = remainingSecond;\r\n                console.debug(\"SET question number \", questionNumber, \" remaining second: \", remainingSecond);\r\n            } else {\r\n                if (questionNumber >= quiz.questions.length) {\r\n                    this.setFailedTimeout();\r\n                    return undefined;\r\n                } else {\r\n                    \r\n                }\r\n                questionNumber++;\r\n            }\r\n        }\r\n        quiz.maxQuestionNumber = questionNumber;\r\n        return Object.assign(new Quiz(), quiz);\r\n\r\n    }\r\n    updateQuestionIndex = (questionNumber: number) => {\r\n        const quiz: Quiz | undefined = this.state.quiz;\r\n        if (!quiz) return;\r\n        if (quiz.questions.length < questionNumber) return;\r\n        const timeout = setTimeout(() => {\r\n            if (this.quizBodyRef.current) {\r\n                this.quizBodyRef.current.updateQuestionIndex(questionNumber - 1);\r\n            } else {\r\n                console.debug(\"Question Index Not Updated\");\r\n            }\r\n            clearTimeout(timeout);\r\n        }, 500);\r\n    }\r\n    loadQuiz = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.publicQuizService.getQuiz, this.dataLoaded,\r\n            this.showCommonErrorAlert, this.props.match.params.id\r\n        )\r\n    }\r\n    goBack = (e) => {\r\n        this.showConfirmation(\"Leave Page?\")\r\n            .then((ok) => {\r\n                if (ok) this.props.history.push(\"/quiz\");\r\n            });\r\n    }\r\n\r\n    setChoice = (answer: string, questionIndex: number) => {\r\n        // console.debug(\"setChoice.............\");\r\n        const quiz: Quiz | undefined = this.state.quiz;\r\n        if (!quiz || this.state.quizResult) return;\r\n        if (!quiz || quiz.questions.length == 0) return;\r\n        try {\r\n            if ( quiz.questions[questionIndex].essay) {\r\n                quiz.questions[questionIndex].answerEssay = answer;\r\n            } else {\r\n                quiz.questions[questionIndex].answerCode = answer;\r\n            }\r\n            quiz.questions[questionIndex].entered = true;\r\n            this.setState({ quiz:Quiz.clone(quiz) },\r\n                () => this.sendUpdateQuizHistory(Object.assign(new Quiz(), quiz))\r\n            );\r\n        } catch (error) { }\r\n    }\r\n    sendUpdateQuizHistory = (quiz: Quiz) => {\r\n        this.publicQuizService.sendUpdateAnswer(quiz, this.props.requestId);\r\n    }\r\n    sendStartUpdate = () => {\r\n        if (this.state.quiz) {\r\n            this.publicQuizService.sendUpdateStart(this.state.quiz, this.props.requestId);\r\n        }\r\n    }\r\n    quizSubmitted = (response: WebResponse) => {\r\n        this.setState({\r\n            errorSubmit: false, timeout: false,\r\n            quizResult: response.quizResult,\r\n            quiz: Object.assign(new Quiz(), response.quizResult?.submittedQuiz)\r\n        } \r\n        );\r\n    }\r\n    \r\n    resetQuiz = () => {\r\n        const quiz: Quiz | undefined = this.state.quiz;\r\n        if (!quiz) return;\r\n        quiz.resetCorrectChoices();\r\n        this.setState({ quizResult: undefined, tick: 0, quiz: Object.assign(new Quiz(), quiz), running: false });\r\n    }\r\n    submitAnwser = () => {\r\n        const quiz: Quiz | undefined = this.state.quiz;\r\n        if (!quiz || this.state.quizResult) return;\r\n        if (quiz.questionsTimered) {\r\n            this.doSubmitAnswer();\r\n            return;\r\n        }\r\n        if (!Object.assign(new Quiz(), quiz).allQuestionHasBeenAnswered()) {\r\n            this.showConfirmationDanger(\"Answers are not complete. Continue to submit answers?\")\r\n                .then((ok) => {\r\n                    if (!ok) return;\r\n                    this.doSubmitAnswer();\r\n                })\r\n            return;\r\n        }\r\n        this.showConfirmation(\"Submit answers?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.doSubmitAnswer();\r\n            })\r\n    }\r\n\r\n    doSubmitAnswer = () => {\r\n        const quiz = this.state.quiz;\r\n        if (!quiz) return;\r\n        quiz.submittedDate = new Date();\r\n        this.commonAjaxWithProgress(\r\n            this.publicQuizService.submitAnswers,\r\n            this.quizSubmitted,\r\n            () => this.quizNotSubmitted(Object.assign(new Quiz, quiz)),\r\n            quiz\r\n        )\r\n        this.setState({ quiz: undefined });\r\n    }\r\n\r\n    quizNotSubmitted = (quiz: Quiz) => {\r\n        this.quizTemp = quiz;\r\n        this.showCommonErrorAlert(\"Error submitting quiz\");\r\n        this.setState({ errorSubmit: true });\r\n    }\r\n    retrySubmit = () => {\r\n        if (this.state.errorSubmit == false) return;\r\n        this.setState({ quiz: this.quizTemp }, this.doSubmitAnswer);\r\n        this.quizTemp = undefined;\r\n    }\r\n    render() {\r\n\r\n        if (this.state.errorSubmit) return (<RertyPage retrySubmit={this.retrySubmit} />)\r\n        const style = { marginTop: '30px', }\r\n        const quiz = Object.assign(new Quiz, this.state.quiz);\r\n\r\n        if (!this.state.loading && quiz.getQuestionCount() == 0) return <SimpleError style={style} children=\"Quiz in currently unavailable\" />\r\n        if (this.state.timeout) return (<StatusTImeout />)\r\n        if (this.state.loading) return (<div style={style} className=\"container-fluid\"><Spinner /></div>)\r\n        if (quiz && !this.state.running) return (<QuizLanding quiz={quiz} start={this.start} />)\r\n\r\n        quiz.showAllQuestion = quiz.showAllQuestion || undefined != this.state.quizResult;\r\n\r\n        const questionTimered = quiz?.questionsTimered == true && this.state.quizResult == undefined;\r\n        return (\r\n            <div style={style} className=\"section-body container-fluid\">\r\n                {!this.state.quizResult && quiz && quiz.questionsTimered == false ?\r\n                    <QuizTimer latestUpdate={this.state.latestUpdate} ref={this.timerRef} onTimeout={this.setFailedTimeout} duration={quiz.duration ?? 0} />\r\n                    : null}\r\n\r\n                <AnchorButton className=\"btn btn-outline-dark btn-sm\" onClick={this.goBack} iconClassName=\"fas fa-angle-left\">Back</AnchorButton>\r\n                <p />\r\n\r\n                {this.state.quizResult ?\r\n                    <QuizResultInfo quiz={quiz} quizResult={this.state.quizResult}  /> :\r\n                    null}\r\n                {quiz ?\r\n                    <QuizBody\r\n                       result={this.state.quizResult} ref={this.quizBodyRef} questionTimered={questionTimered} onTimeout={this.setFailedTimeout} submit={this.submitAnwser} \r\n                       setChoice={this.setChoice} quiz={quiz} /> :\r\n                    <SimpleError>No Data</SimpleError>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(PublicQuizChallenge))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux'; \r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\n\r\n\r\nclass GalleryMain extends BaseMainMenus {\r\n    constructor(props: any) {\r\n        super(props, \"Gallery\");\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Gallery</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome to gallery page\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(GalleryMain))","import BaseEntity from './BaseEntity';\nimport ImageCategory from './ImageCategory';\nimport { baseImageUrl } from './../constant/Url';\n\nexport default class Images extends BaseEntity {\n\ttitle?: string;\n\tdescription?: string;\n\tcategory?: ImageCategory;\n\timages?: string;\n\n\timageCount() {\n\t\treturn this.images ? this.images.split(\"~\").length : 0;\n\t}\n\n\tgetFirstImage(): string {\n\t\ttry {\n\t\t\treturn new String(this.images).split(\"~\")[0];\n\t\t} catch (error) {\n\t\t\treturn \"default.bmp\";\n\t\t}\n\t}\n\n\tgetFullUrls(): string[] {\n\t\tconst result: string[] = new Array();\n\t\tif (!this.images) {\n\t\t\treturn [\"default.bmp\"];\n\t\t}\n\t\tconst rawImages = this.images.split(\"~\");\n\t\tfor (let i = 0; i < rawImages.length; i++) {\n\t\t\tconst element = rawImages[i];\n\t\t\tresult.push(baseImageUrl() + element);\n\t\t}\n\t\treturn result;\n\t}\n\n}\n","import React, { Component } from 'react';\r\nimport Carousel from '../../../container/Carousel';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport Images from './../../../../models/Images';\r\n\r\nclass IState {\r\n\r\n}\r\n\r\nclass IProps {\r\n    image: Images = new Images();\r\n    back: any = () => {}\r\n}\r\n\r\nexport default class GalleryPictureDetail extends Component<IProps, IState> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const image: Images = this.props.image;\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Gallery</h2>\r\n                <AnchorButton onClick={this.props.back} iconClassName=\"fas fa-angle-left\" children=\"Back\" />\r\n                <p/>\r\n                <Carousel imageUrls={image.getFullUrls()} />\r\n                <h4>{image.title}</h4>\r\n                <div className=\"alert alert-success\">\r\n                    <h5>Description</h5>\r\n                    {image.description}\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport GalleryService from './../../../../services/GalleryService';\r\nimport Filter from './../../../../models/Filter';\r\nimport Images from './../../../../models/Images';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport NavigationButtons from './../../../navigation/NavigationButtons';\r\nimport Spinner from './../../../loader/Spinner';\r\nimport { baseImageUrl } from './../../../../constant/Url';\r\nimport GalleryPictureDetail from './GalleryPictureDetail';\r\nclass IState {\r\n    imageList: Images[] = new Array();\r\n    loading: boolean = false;\r\n    filter: Filter = new Filter();\r\n    totalData: number = 0;\r\n    selectedImage?: Images\r\n}\r\nclass GalleryPicture extends BaseComponent {\r\n    state: IState = new IState();;\r\n    galleryService: GalleryService;\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.galleryService = this.getServices().galleryService;\r\n    }\r\n    startLoading = () => { this.setState({ loading: true }); }\r\n    endLoading = () => { this.setState({ loading: false }); }\r\n    componentDidMount() {\r\n        document.title = \"Picture Gallery\";\r\n        this.loadPictures();\r\n    }\r\n    dataLoaded = (response: WebResponse) => {\r\n        this.setState({ imageList: response.entities ?? [], totalData: response.totalData });\r\n    }\r\n\r\n    loadPictures = () => {\r\n        if (this.state.loading) return;\r\n        this.commonAjax(\r\n            this.galleryService.getPictures,\r\n            this.dataLoaded,\r\n            this.showCommonErrorAlert,\r\n            this.state.filter\r\n        )\r\n    }\r\n    loadPicturesAtPage = (page: number) => {\r\n        const filter = this.state.filter;\r\n        filter.page = page;\r\n        this.setState({ filter: filter });\r\n        this.loadPictures();\r\n    }\r\n    onImageClick = (image: Images) => {\r\n        this.setState({ selectedImage: image });\r\n    }\r\n    removeSelectedImage = () => {\r\n        this.setState({ selectedImage: undefined });\r\n    }\r\n    render() {\r\n        const filter: Filter = this.state.filter;\r\n        const selectedImage: Images | undefined = this.state.selectedImage;\r\n        if (selectedImage) {\r\n            return (\r\n                <GalleryPictureDetail image={selectedImage} back={this.removeSelectedImage} />)\r\n        }\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Pictures</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome to gallery picture\r\n                </div>\r\n                <NavigationButtons\r\n                    activePage={filter.page ?? 0}\r\n                    limit={filter.limit ?? 5} totalData={this.state.totalData}\r\n                    onClick={this.loadPicturesAtPage}\r\n                />\r\n                {this.state.loading ? <Spinner /> : <ImageList onClick={this.onImageClick} images={this.state.imageList} />}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ImageList = (props: { images: Images[], onClick(image: Images): void }) => {\r\n    const images: Images[] = props.images;\r\n    return (\r\n        <div className=\"row\">\r\n            {images.map((image, i) => {\r\n                return <ImageItem key={\"img-item-\" + i} onClick={props.onClick} image={image} />\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst ImageItem = (props: { image: Images, onClick(image: Images): void }) => {\r\n    const image: Images = Object.assign(new Images(), props.image);\r\n    const firstImage: string = image.getFirstImage();\r\n    return (\r\n        <div style={{ marginBottom: '5px' }} className=\"col-md-3\">\r\n            <div className=\"card\">\r\n                <img onClick={(e) => props.onClick(image)} src={baseImageUrl() + firstImage} className=\"card-img-top\" />\r\n                <div style={{ position: 'absolute', right: 5, bottom: 5 }} >\r\n                    <a className=\"btn btn-outline-dark btn-sm\" onClick={(e) => props.onClick(image)} >\r\n                        <i className=\"fas fa-angle-double-right\" />\r\n                    </a>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title\">{image.title}</h5>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(GalleryPicture))","import UserModel from './User';\nimport BaseModel from './BaseEntity';\nimport QuizModel from './Quiz';\n\nexport default class QuizHistoryModel extends BaseModel{\n\tuser?:UserModel;\n\tstarted?:Date;\n\tended?:Date;\n\tquizDuration?:string;\n\tuserDuration?:string;\n\tquiz?:QuizModel;\n\tquizRepeatable?:boolean;\n\tscore?:number;\n\tcreated?:Date;\n\tupdated?:Date;\n\tremainingDuration?:number;\n\tmaxQuestionNumber?:number;\n\trequestId?:string;\n\ttoken?:string;\n}\n","\r\nimport React, { Component } from 'react';\r\nexport default class SimpleWarning extends Component<any, any>\r\n{\r\n\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div style={this.props.style} className={\"alert alert-warning \"+(this.props.className??\"\")}>\r\n                {this.props.children??\"Error Occured\"}\r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from '../../layout/BaseMainMenus';\r\nimport User from './../../../models/User';\r\nimport PublicQuizService from './../../../services/PublicQuizService';\r\nimport QuizHistoryModel from './../../../models/QuizHistory';\r\nimport Filter from './../../../models/Filter';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport NavigationButtons from './../../navigation/NavigationButtons';\r\nimport Card from './../../container/Card';\r\nimport Spinner from './../../loader/Spinner';\r\nimport SimpleWarning from './../../alert/SimpleWarning';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport ScrollDiv from '../../container/ScrollDiv';\r\nclass IState {\r\n    histories: QuizHistoryModel[] = new Array();\r\n    loading: boolean = false;\r\n    filter: Filter = new Filter();\r\n    totalData: number = 0;\r\n}\r\nclass QuizHistoryPage extends BaseComponent {\r\n    publicQuizService: PublicQuizService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props,  true);\r\n        this.publicQuizService = this.getServices().publicQuizService;\r\n        document.title = \"Quiz History\";\r\n    }\r\n    startLoading = () => { this.setState({ loading: true }); }\r\n    endLoading = () => { this.setState({ loading: false }); }\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        this.loadRecords();\r\n    }\r\n    dataLoaded = (response: WebResponse) => {\r\n        this.setState({ histories: response.entities ?? [], totalData: response.totalData });\r\n    }\r\n\r\n    loadRecords = () => {\r\n        if (this.state.loading) return;\r\n        this.commonAjax(\r\n            this.publicQuizService.getHistories,\r\n            this.dataLoaded,\r\n            this.showCommonErrorAlert,\r\n            this.state.filter\r\n        )\r\n    }\r\n    loadRecordsAtPage = (page: number) => {\r\n        const filter = this.state.filter;\r\n        filter.page = page;\r\n        this.setState({ filter: filter });\r\n        this.loadRecords();\r\n    }\r\n    render() {\r\n        const user: User | undefined = this.getLoggedUser();\r\n        if (!user) return null;\r\n        const filter: Filter = this.state.filter;\r\n        const startNumber = (filter.limit ?? 0) * (filter.page ?? 0);\r\n        return (\r\n            <div  className=\" section-body container-fluid\">\r\n                <h2>Quiz History</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{user.displayName}  </strong>\r\n                    <p />\r\n                    <p className=\"badge badge-dark\">{user.role?.toLowerCase().split(\"_\")[1]}</p>\r\n                </div>\r\n                <NavigationButtons\r\n                    activePage={filter.page ?? 0}\r\n                    limit={filter.limit ?? 5} totalData={this.state.totalData}\r\n                    onClick={this.loadRecordsAtPage}\r\n                />\r\n                {this.state.loading ? <Card><Spinner /></Card>:<Histories loadRecords={this.loadRecords} startingNumber={startNumber} histories={this.state.histories}  />}\r\n                <p/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst Histories = (props:{histories:QuizHistoryModel[], loadRecords():any, startingNumber:number}) => {\r\n    if (props.histories.length == 0){\r\n        return <Card><SimpleWarning>No Data</SimpleWarning>\r\n        \r\n        <AnchorWithIcon iconClassName=\"fas fa-sync-alt\" className=\"btn btn-dark\" onClick={props.loadRecords}>\r\n                Reload\r\n            </AnchorWithIcon>\r\n            </Card>\r\n    }\r\n    return  (\r\n        <Card  >\r\n            <ScrollDiv>\r\n            <table className=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>No</th>\r\n                        <th>Quiz</th>\r\n                        <th>Quiz Duration</th>\r\n                        <th>Start</th>\r\n                        <th>End</th>\r\n                        <th>User Duration</th>\r\n                        <th>Score</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {props.histories.map((h:QuizHistoryModel, i: number) => {\r\n                        h = Object.assign(new QuizHistoryModel(), h);\r\n                        return (\r\n                            <tr key={\"quiz-public-list-\" + i}>\r\n                                <td>{i + props.startingNumber + 1}</td>\r\n                                <td>{h.quiz?.title}</td>\r\n                                <td>{h.quizDuration}</td>\r\n                                <td>{h.started?new Date(h.started).toLocaleString():\"-\"}</td>\r\n                                <td>{h.ended?new Date(h.ended).toLocaleString():\"-\"}  </td>\r\n                                <td>{h.userDuration} </td>\r\n                                <td>{h.score && h.score.toFixed? h.score.toFixed(2):\"-\"} </td>\r\n                                <td>\r\n                                    {h.quiz?.repeatable?\r\n                                    <AnchorWithIcon className=\"btn btn-sm\" attributes={{target:\"_blank\"}} to={\"/quiz/challenge/\"+h.quiz?.id} iconClassName=\"fas fa-redo\" />:\r\n                                    \"Not Repeatable\"\r\n                                    }\r\n                                    <AnchorWithIcon className=\"btn btn-sm\" attributes={{target:\"_blank\"}} to={\"/quiz/history/\"+h.id} iconClassName=\"fas fa-list\" />\r\n                                  \r\n                                </td>\r\n                            </tr>\r\n                        )\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n            </ScrollDiv>\r\n            <p/>\r\n            <AnchorWithIcon iconClassName=\"fas fa-sync-alt\" className=\"btn btn-dark\" onClick={props.loadRecords}>\r\n                Reload\r\n            </AnchorWithIcon>\r\n        </Card >\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(QuizHistoryPage))","import VideoCategory from './VideoCategory';\nimport BaseEntity from './BaseEntity';\nimport Snippet from './Snippet';\n\nexport default class Videos extends BaseEntity{\n\ttitle?:string;\n\turl?:string;\n\tdescription?:string;\n\tcategory?:VideoCategory;\n\tvideoSnippet?:Snippet;\n\n}\n","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport GalleryService from '../../../../services/GalleryService';\r\nimport Filter from '../../../../models/Filter';\r\nimport Videos from '../../../../models/Videos';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport NavigationButtons from '../../../navigation/NavigationButtons';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport { baseImageUrl  } from '../../../../constant/Url'; \r\nimport Snippet from './../../../../models/Snippet';\r\nimport Card from './../../../container/Card';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport SimpleWarning from '../../../alert/SimpleWarning';\r\n\r\nclass IState {\r\n    videoList: Videos[] = new Array();\r\n    loading: boolean = false;\r\n    filter: Filter = new Filter();\r\n    totalData: number = 0; \r\n}\r\nclass GalleryVideo extends BaseComponent {\r\n    state: IState = new IState();;\r\n    galleryService: GalleryService;\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.galleryService = this.getServices().galleryService;\r\n    }\r\n    startLoading = (realtime:boolean) => { this.setState({ loading: true }); super.startLoading(realtime) }\r\n    endLoading = () => { this.setState({ loading: false }); super.endLoading() }\r\n    componentDidMount() {\r\n        document.title = \"Video Gallery\";\r\n        this.loadRecords();\r\n    }\r\n    dataLoaded = (response: WebResponse) => {\r\n        this.setState({ videoList: response.entities ?? [], totalData: response.totalData });\r\n    }\r\n\r\n    loadRecords = () => {\r\n        if (this.state.loading) return;\r\n        this.commonAjaxWithProgress(\r\n            this.galleryService.getVideos,\r\n            this.dataLoaded,\r\n            this.showCommonErrorAlert,\r\n            this.state.filter\r\n        )\r\n    }\r\n    loadRecordsAtPage = (page: number) => {\r\n        const filter = this.state.filter;\r\n        filter.page = page;\r\n        this.setState({ filter: filter });\r\n        this.loadRecords();\r\n    }\r\n    onImageClick = (video: Videos) => {\r\n        this.setState({ selectedImage: video });\r\n    }\r\n    removeSelectedImage = () => {\r\n        this.setState({ selectedImage: undefined });\r\n    }\r\n    render() {\r\n        const filter: Filter = this.state.filter; \r\n        \r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Videos</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome to gallery videos\r\n                </div>\r\n                <NavigationButtons\r\n                    activePage={filter.page ?? 0}\r\n                    limit={filter.limit ?? 5} totalData={this.state.totalData}\r\n                    onClick={this.loadRecordsAtPage}\r\n                />\r\n                {this.state.loading ? <Spinner /> : <VideoList onClick={this.onImageClick} video={this.state.videoList} />}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst VideoList = (props: { video: Videos[], onClick(video: Videos): void }) => {\r\n    const video: Videos[] = props.video;\r\n    return (\r\n        <div className=\"row\">\r\n            {video.map((video, i) => {\r\n                return <VideoItem  video={video} key={\"ii-\" + i} />\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst VideoItem = (props: { video: Videos, }) => {\r\n    const video: Videos = Object.assign(new Videos(), props.video);\r\n    const snippet:Snippet|undefined = video.videoSnippet;\r\n    const link= <a className=\"btn btn-outline-dark btn-sm\" target=\"_blank\" href={video.url} >\r\n        <i className=\"fa fa-play\"/>&nbsp;\r\n        Link\r\n        </a>\r\n    if (!snippet) {\r\n        return (\r\n            <div className=\"col-md-4\">\r\n            <Card>\r\n                <SimpleWarning>No Preview</SimpleWarning>\r\n                {link}\r\n            </Card>\r\n            \r\n            </div>\r\n        )\r\n    }\r\n    return (\r\n        <div className=\"col-md-4\" style={{marginBottom:'10px'}}>\r\n            <div className=\"card\">\r\n                <img src={snippet.thumbnails?.medium?.url} className=\"card-img-top\" />\r\n                <div className=\"card-body\">\r\n                    <p className=\"card-title\">{snippet.title}</p>\r\n                    {/* <p className=\"card-text\">{snippet.description}</p> */}\r\n                </div>\r\n                <div className=\"card-footer\">\r\n                    {link}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(GalleryVideo))","import BaseEntity from './BaseEntity';\nimport DocumentCategory from './DocumentCategory';\n\nexport default class Documents extends BaseEntity{\n\ttitle?:string;\n\taccessCode?:string;\n\tdescription?:string;\n\tcategory?:DocumentCategory;\n\tfileName?:string;\n\n\tgetExtension = () : string => {\n\t\tif (!this.fileName) return \"file\";\n\n\t\tconst splitted = this.fileName.split(\".\");\n\t\tif (splitted.length <= 1) return \"file\";\n\t\treturn splitted[splitted.length-1];\n\t}\n}\n","import React, { Component, Fragment } from 'react'\r\nimport { baseDocumentUrl } from '../../../../constant/Url';\r\nimport GalleryService from '../../../../services/GalleryService';\r\nimport Documents from './../../../../models/Documents';\r\nimport Card from './../../../container/Card';\r\nimport AnchorButton from './../../../navigation/AnchorButton';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\r\nimport WebResponse from './../../../../models/WebResponse';\r\ninterface Props { document: Documents }\r\nclass State {\r\n    showLink: boolean = false;\r\n    fileName?:string\r\n}\r\n class DocumentItem extends BaseComponent{\r\n\r\n    galleryService:GalleryService;\r\n    state: State = new State();\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.galleryService = this.getServices().galleryService;\r\n        this.state.fileName = this.props.document.fileName;\r\n        this.state.showLink = this.props.document.accessCode == undefined || this.props.document.accessCode == \"\";\r\n    }\r\n    showAccessCodeInput = (e) => {\r\n        const code = prompt(\"Enter access code for \" + this.props.document.title);\r\n        if (null == code) return;\r\n        this.validateAccessCode(code);\r\n    }\r\n    validateAccessCode = (code:string) => {\r\n        this.commonAjax(\r\n            this.galleryService.validateDocumentAccessCode,\r\n            this.accessCodeValidated,\r\n            this.showCommonErrorAlert,\r\n            code, this.props.document.id);\r\n    }\r\n    accessCodeValidated = (response:WebResponse) => {\r\n        this.setState({fileName:response.message, showLink:true});\r\n    }\r\n    render = () => {\r\n        const doc: Documents = Object.assign(new Documents(), this.props.document);\r\n        doc.fileName = this.state.fileName;\r\n        return (\r\n            <div className=\"col-md-3 text-center\">\r\n                <Card>\r\n                    <h5>{doc.title}</h5>\r\n                    <p>{doc.description}</p>\r\n                    <hr />\r\n                    {this.state.showLink ?\r\n                        <Fragment>\r\n                            <ExtraViewer doc={doc} />\r\n                            <a className=\"btn btn-outline-dark btn-sm\" target=\"_blank\" href={baseDocumentUrl() + doc.fileName} >\r\n                                <i className=\"fa fa-link\" />&nbsp;Link ({doc.getExtension()})\r\n                            </a>\r\n                        </Fragment>\r\n                        : <AnchorButton onClick={this.showAccessCodeInput}\r\n                            className=\"btn btn-dark btn-sm\" children=\"Unlock\" iconClassName=\"fas fa-key\" />}\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nconst ExtraViewer = (props: { doc: Documents }) => {\r\n    const doc = props.doc;\r\n    return (\r\n        doc.getExtension().toLowerCase() == 'mp3' ?\r\n            <video controls height={30} style={{width:\"100%\"}} src={baseDocumentUrl() + doc.fileName} />\r\n            : null\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(DocumentItem))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport GalleryService from '../../../../services/GalleryService';\r\nimport Filter from '../../../../models/Filter';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport NavigationButtons from '../../../navigation/NavigationButtons';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport { baseDocumentUrl } from '../../../../constant/Url';\r\nimport Card from '../../../container/Card';\r\nimport SimpleWarning from '../../../alert/SimpleWarning';\r\nimport Documents from './../../../../models/Documents';\r\nimport DocumentItem from './DocumentItem';\r\n\r\nclass IState {\r\n    documentList: Documents[] = new Array();\r\n    loading: boolean = false;\r\n    filter: Filter = new Filter();\r\n    totalData: number = 0;\r\n}\r\nclass GalleryDocument extends BaseComponent {\r\n    state: IState = new IState();;\r\n    galleryService: GalleryService;\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.galleryService = this.getServices().galleryService;\r\n    }\r\n    startLoading = () => { this.setState({ loading: true }) }\r\n    endLoading = () => { this.setState({ loading: false }) }\r\n    componentDidMount() {\r\n        document.title = \"Document Gallery\";\r\n        this.loadRecords();\r\n    }\r\n    dataLoaded = (response: WebResponse) => {\r\n        this.setState({ documentList: response.entities ?? [], totalData: response.totalData });\r\n    }\r\n\r\n    loadRecords = () => {\r\n        if (this.state.loading) return;\r\n        this.commonAjax(\r\n            this.galleryService.getDocuments,\r\n            this.dataLoaded,\r\n            this.showCommonErrorAlert,\r\n            this.state.filter\r\n        )\r\n    }\r\n    loadRecordsAtPage = (page: number) => {\r\n        const filter = this.state.filter;\r\n        filter.page = page;\r\n        this.setState({ filter: filter });\r\n        this.loadRecords();\r\n    }\r\n\r\n    removeSelectedImage = () => {\r\n        this.setState({ selectedImage: undefined });\r\n    }\r\n    render() {\r\n        const filter: Filter = this.state.filter;\r\n\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Documents</h2>\r\n                <div className=\"alert alert-info\"> Welcome to gallery documents</div>\r\n                <NavigationButtons\r\n                    activePage={filter.page ?? 0}\r\n                    limit={filter.limit ?? 5} totalData={this.state.totalData}\r\n                    onClick={this.loadRecordsAtPage}\r\n                />\r\n                {this.state.loading ? <Spinner /> : <DocumentList documents={this.state.documentList} />}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst DocumentList = (props: { documents: Documents[], }) => {\r\n    const docs: Documents[] = props.documents;\r\n    return (\r\n        <div className=\"row\">\r\n            {docs.map((doc, i) => {\r\n                return <DocumentItem document={doc} key={\"ii-\" + i} />\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(GalleryDocument))","\r\n\r\nimport React, { RefObject, Component, FormEvent, Fragment, ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport './Login.css';\r\nimport Spinner from '../../loader/Spinner';\r\nimport UserService from './../../../services/UserService';\r\nimport UserModel from './../../../models/User';\r\nimport WebResponse from './../../../models/WebResponse'; \r\nclass IState {\r\n    loading: boolean = false; displayName: string = \"\";\r\n    username: string = \"\";\r\n    editPassword: string = \"\";\r\n    editPasswordRepeat: string = \"\";\r\n}\r\nclass Register extends BaseComponent {\r\n    state: IState = new IState();\r\n    userService: UserService;\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.userService = this.getServices().userService;\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    register(e: FormEvent) {\r\n        e.preventDefault();\r\n        if (this.fieldComplete()) {\r\n            if (this.passwordMatch() == false) {\r\n                this.showCommonErrorAlert(\"Password mismatch\");\r\n                return;\r\n            }\r\n            this.saveUser();\r\n        } else {\r\n            this.showCommonErrorAlert(\"Field is not complete\");\r\n        }\r\n    }\r\n    saveUser = () => {\r\n        const user = new UserModel();\r\n        user.editPassword = this.state.editPassword.trim();\r\n        user.username = this.state.username.trim();\r\n        user.displayName = this.state.displayName.trim();\r\n        this.commonAjax(\r\n            this.userService.saveUser,\r\n            this.userSaved,\r\n            this.showCommonErrorAlert,\r\n            user\r\n        );\r\n    }\r\n    userSaved = (response: WebResponse) => {\r\n        this.showConfirmation(\"Success\")\r\n            .then((ok) => {\r\n                this.backToLogin();\r\n            })\r\n    }\r\n    passwordMatch = () => {\r\n        return this.state.editPassword.trim() != \"\" && this.state.editPassword.trim() == this.state.editPasswordRepeat.trim();\r\n    }\r\n    fieldComplete = () => {\r\n        return this.state.displayName.trim() != \"\"\r\n            && this.state.username.trim() != \"\"\r\n            && this.state.editPassword.trim() != \"\"\r\n            && this.state.editPasswordRepeat.trim() != \"\";\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"Register\";\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"RegisterForm\" className=\"Register-wrapper\" style={{ margin: 0, padding: 0 }}>\r\n                <div className=\"text-center\" style={{ marginTop: '25px' }}>\r\n                    <h1>Register</h1>\r\n                </div>\r\n                <form name='Register' onSubmit={(e) => { this.register(e) }}\r\n                    method='POST' className=\"form-signin text-center\">\r\n                    <CommonField name=\"username\" value={this.state.username} onChange={this.handleInputChange} />\r\n                    <CommonField name=\"displayName\" value={this.state.displayName} onChange={this.handleInputChange} />\r\n\r\n                    <PasswordField name=\"editPassword\" value={this.state.editPassword} onChange={this.handleInputChange} />\r\n                    <PasswordField name=\"editPasswordRepeat\" value={this.state.editPasswordRepeat} onChange={this.handleInputChange} />\r\n\r\n                    {this.state.loading ? <Spinner /> :\r\n                        <button className=\"btn text-light\" style={{ backgroundColor: 'rgb(9,26,78)' }} type=\"submit\">\r\n                            Register\r\n                        </button>}\r\n                    <p />\r\n                </form>\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst PasswordField = ({ name, value, onChange }) => {\r\n    return <Fragment>\r\n        <label className=\"sr-only\">Password</label>\r\n        <input style={{ borderColor: 'rgb(9,26,78)' }} name={name} value={value} onChange={onChange} type=\"password\" id=\"inputPassword\" className=\"form-control\"\r\n            placeholder={name} required />\r\n        <p />\r\n    </Fragment>\r\n}\r\nconst CommonField = ({ name, value, onChange }) => {\r\n    return (<Fragment>\r\n        <label className=\"sr-only\">Username</label>\r\n        <input style={{ borderColor: 'rgb(9,26,78)' }} name={name} value={value} onChange={onChange} type=\"text\" id=\"username\" className=\"form-control\"\r\n            placeholder={name} required autoFocus />\r\n        <p />\r\n    </Fragment>)\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    //  performRegister: (username: string, password: string, app: any) => dispatch(performRegister(username, password, app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Register))","import React, { ChangeEvent, FormEvent } from 'react'\r\nimport BaseComponent from './../../BaseComponent';\r\nimport QuizService from './../../../services/QuizService';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { getAttachmentInfo } from '../../../utils/ComponentUtil';\r\nimport AttachmentInfo from './../../../models/AttachmentInfo';\r\nimport WebResponse from './../../../models/WebResponse';\r\nclass IState {\r\n    attachment?:AttachmentInfo;\r\n}\r\nclass QuizUpload extends BaseComponent {\r\n    quizService: QuizService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.quizService = this.getServices().quizService;\r\n    }\r\n    componentDidMount() {\r\n    }\r\n    submit = (e:FormEvent) => {\r\n        e.preventDefault();\r\n        this.showConfirmation(\"Upload?\")\r\n        .then(ok=>{\r\n            if (ok) this.upload();\r\n        })\r\n    }\r\n    uploadSuccess = (response:WebResponse) => {\r\n        this.showInfo(\"Success\");\r\n        if (response.quiz) {\r\n            this.props.history.push(\"/quizmanagement/detail/\"+response.quiz.id);\r\n            return;\r\n        } \r\n        this.setState({attachment:null});\r\n    }\r\n    upload = () => {\r\n        if (!this.state.attachment) return;\r\n        this.commonAjaxWithProgress(\r\n            this.quizService.uploadQuiz,\r\n            this.uploadSuccess,\r\n            this.showCommonErrorAlert,\r\n            this.state.attachment\r\n        )\r\n    }\r\n    setAttachmentInfo = (e:ChangeEvent) => {\r\n        const target:HTMLInputElement = e.target as HTMLInputElement;\r\n        getAttachmentInfo(target).then((attchment:AttachmentInfo)=>{\r\n            // console.debug(\"attchment:\", attchment);\r\n            attchment.url = \"\";\r\n            if (attchment.name.endsWith(\".xlsx\") == false) {\r\n                this.showCommonErrorAlert(\"INVALID FILE: \\\"\"+attchment.name+\"\\\"\");\r\n                target.value = \"\";\r\n                return;\r\n            }\r\n            this.setState({attachment:attchment})\r\n        }).catch(this.showCommonErrorAlert);\r\n    }\r\n    render() {\r\n        \r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n            <h2>Quiz Upload</h2>\r\n                <form onSubmit={this.submit}>\r\n                    <FormGroup label=\"File\">\r\n                        <input type=\"file\" className=\"form-control\"\r\n\r\n                        onChange={this.setAttachmentInfo} />\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Download Template\">\r\n                        <a href=\"resources/assets/quiz_template.xlsx\" className=\"btn btn-dark\">\r\n                            Download\r\n                        </a>\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        {this.state.attachment?\r\n                        <input type=\"submit\" className=\"btn btn-primary\" />:null}\r\n                    </FormGroup>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(QuizUpload))","\r\nimport React from 'react'\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport PublicQuizService from '../../../services/PublicQuizService';\r\nimport QuizService from './../../../services/QuizService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport Quiz from './../../../models/Quiz';\r\nimport SimpleError from '../../alert/SimpleError';\r\nimport Modal from '../../container/Modal';\r\nimport QuizQuestion from './../../../models/QuizQuestion';\r\nimport QuizHistoryModel from './../../../models/QuizHistory';\r\nimport User from './../../../models/User';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nclass State {\r\n    error:boolean  = false;\r\n    quizHistory?:QuizHistoryModel;\r\n}\r\nclass QuizHistoryDetail extends BaseComponent {\r\n    state:State = new State();\r\n    quizService:QuizService;\r\n    constructor(props) {\r\n        super(props, true);\r\n        this.quizService = this.getServices().quizService;\r\n    }\r\n    recordLoaded = (response:WebResponse) => {\r\n        if (response.quizHistory && response.quizHistory.quiz) {\r\n            response.quizHistory.quiz = Quiz.clone(response.quizHistory.quiz);\r\n            this.setState({\r\n                error:false, quizHistory: (response.quizHistory)\r\n            });\r\n        }\r\n    }\r\n    recordNotLoaded = (error) => {\r\n        this.setState({error:true})\r\n    }\r\n    loadHistoryDetail = () => {\r\n        this.commonAjax(\r\n        this.quizService.getHistoryDetail,\r\n        this.recordLoaded,\r\n        this.recordNotLoaded,\r\n        this.getHistoryId());\r\n    }\r\n    getHistoryId = () => {\r\n        return this.props.match.params.id;\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.loadHistoryDetail();\r\n    }\r\n    render() {\r\n        if (this.state.error) {\r\n            return <SimpleError><p/>Error Loading Record<p/><a onClick={this.loadHistoryDetail}>Retry</a></SimpleError>\r\n        }\r\n        if (!this.state.quizHistory?.quiz) {\r\n            return <SimpleError><p/>Loading Quiz</SimpleError>\r\n        }\r\n        const quiz = this.state.quizHistory.quiz;\r\n        return <div className=\"container-fluid section-body\">\r\n            <h2>Quiz History Detail: {quiz.title}</h2>\r\n            <AnchorWithIcon iconClassName=\"fas fa-arrow-left\" to=\"/dashboard/quizhistory\">Back</AnchorWithIcon>\r\n            <p/>\r\n            <QuizDetail user={this.state.quizHistory.user} quiz={quiz} />\r\n        </div>\r\n    }\r\n\r\n}\r\n\r\nconst QuizDetail = (props:{user?:User, quiz:Quiz}) => {\r\n    const questions:QuizQuestion[] = props.quiz.questions;\r\n    return (\r\n        <Modal title={\"Quiz By \"+props.user?.displayName}>\r\n            {questions.map((question,i)=>{\r\n                \r\n                return <QuestionDetail question={question} key={\"qst-\"+i} />\r\n            })}\r\n        </Modal>\r\n    )\r\n}\r\nconst QuestionDetail = (props:{question:QuizQuestion}) => {\r\n    const q = props.question;\r\n    return (\r\n        <div>\r\n            <p><strong>{q.number}</strong> {q.statement}</p>\r\n            {q.essay?\r\n                <textarea className=\"form-control\" disabled value={q.answerEssay} />\r\n                :\r\n                <Choices question={q} />\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Choices = (props:{question:QuizQuestion}) => {\r\n    const q = props.question;\r\n    return (\r\n        <ul>{q.choices?.map((c,i)=>{\r\n            const selected = q.answerCode == c.answerCode;\r\n            return (\r\n                <li style={{listStyle:'none'}} key={q.number+\"-\"+i}><span className={selected?\"border rounded border-dark font-weight-bold\":\"\"} > {c.answerCode} </span> {c.statement}</li>\r\n            )\r\n        })}\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(QuizHistoryDetail))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Switch, Route } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport Login from '../pages/login/Login';\r\nimport DashboardMain from '../pages/dashboard/main/DashboardMain';\r\nimport MasterDataMain from '../pages/masterdata/MasterDataMain';\r\nimport HomeMain from '../pages/home/HomeMain';\r\nimport BaseMainMenus from './BaseMainMenus';\r\nimport Menu from '../../models/settings/Menu';\r\nimport SettingsMain from '../pages/settings/SettingsMain';\r\nimport UserProfile from '../pages/settings/UserProfile';\r\nimport EditApplicationProfile from '../pages/settings/EditApplicationProfile';\r\nimport AboutUs from './../pages/home/AboutUs';\r\nimport LessonMain from '../pages/lesson/LessonMain';\r\nimport LessonContent from '../pages/lesson/LessonContent';\r\nimport QuizManagementMain from '../pages/quizmanagement/QuizManagementMain';\r\nimport QuizManagementForm from '../pages/quizmanagement/QuizManagementForm';\r\nimport QuizDetail from '../pages/quizmanagement/QuizDetail';\r\nimport PublicQuizMain from '../pages/quizpublic/PublicQuizMain';\r\nimport PublicQuizChallenge from '../pages/quizpublic/challenge/PublicQuizChallenge';\r\nimport GalleryMain from '../pages/gallery/GalleryMain';\r\nimport GalleryPicture from '../pages/gallery/picture/GalleryPicture';\r\nimport QuizHistoryPage from '../pages/dashboard/QuizHistoryPage';\r\nimport GalleryVideo from '../pages/gallery/video/GalleryVideo';\r\nimport GalleryDocument from '../pages/gallery/document/GalleryDocument';\r\nimport Register from '../pages/login/Register';\r\nimport QuizUpload from '../pages/quizmanagement/QuizUpload';\r\nimport QuizHistoryDetail from '../pages/quizpublic/QuizHistoryDetail';\r\n\r\nclass ApplicationContent extends BaseComponent {\r\n\r\n    ref: React.RefObject<BaseMainMenus> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        this.props.setSidebarMenus(menus);\r\n    }\r\n    render() {\r\n        return (\r\n            <Fragment>\r\n                <Switch>\r\n                   \r\n                    {/* -------- home -------- */}\r\n                    <Route exact path=\"/home\" render={\r\n                        (props: any) => {\r\n                            console.debug(\"Home path\")\r\n                            return <HomeMain />\r\n                        }\r\n                    } />\r\n                    <Route exact path=\"/\" render={\r\n                        (props: any) =>\r\n                            <HomeMain />\r\n                    } />\r\n                    <Route exact path=\"/about\" render={\r\n                        (props: any) =>\r\n                            <AboutUs />\r\n                    } />\r\n                    {/* -------- masterdata -------- */}\r\n                    <Route exact path=\"/lessons\" render={\r\n                        (props: any) =>{\r\n                            console.debug(\"Lessons path\")   \r\n                            return <LessonMain setSidebarMenus={this.setSidebarMenus} />\r\n                        }\r\n                    } />\r\n                    <Route exact path=\"/lessons/:categoryCode\" render={\r\n                        (props: any) =>\r\n                            <LessonMain setSidebarMenus={this.setSidebarMenus} />\r\n                    } />\r\n\r\n\r\n\r\n\r\n                    {/* -------- masterdata -------- */}\r\n                    <Route exact path=\"/management\" render={\r\n                        (props: any) => {\r\n                            console.debug(\"MANAGEMENTS path\")\r\n                            return <MasterDataMain setSidebarMenus={this.setSidebarMenus} />\r\n                        }\r\n                    } />\r\n                    <Route exact path=\"/management/:code\" render={\r\n                        (props: any) =>\r\n                            <MasterDataMain setSidebarMenus={this.setSidebarMenus} />\r\n                    } />\r\n\r\n\r\n                    {/* ///////// PUBLIC ///////// */}\r\n\r\n                </Switch>\r\n                <LoginRoute />\r\n                <Settings />\r\n                <MemberQuiz />\r\n                <QuizManagement />\r\n                <Dashboard />\r\n                <Gallery />\r\n            </Fragment>\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        // document.title = \"Login\";\r\n    }\r\n\r\n}\r\n\r\nconst LoginRoute = (props) => {\r\n\r\n    return (\r\n        <Switch>\r\n            <Route exact path=\"/login\" render={\r\n                (props: any) =>\r\n                    <Login />\r\n            } />\r\n            <Route exact path=\"/register\" render={\r\n                (props: any) =>\r\n                    <Register />\r\n            } />\r\n        </Switch>\r\n    )\r\n}\r\nconst Gallery = (props) => {\r\n\r\n    return (\r\n        <Switch>\r\n            {/* ---------- gallery --------- */}\r\n            <Route exact path=\"/gallery\" render={\r\n                (props: any) => <GalleryMain />\r\n            } />\r\n            <Route exact path=\"/gallery/picture\" render={\r\n                (props: any) => <GalleryPicture />\r\n            } />\r\n            <Route exact path=\"/gallery/video\" render={\r\n                (props: any) => <GalleryVideo />\r\n            } />\r\n            <Route exact path=\"/gallery/document\" render={\r\n                (props: any) => <GalleryDocument />\r\n            } />\r\n\r\n        </Switch>\r\n    )\r\n}\r\n\r\nconst Dashboard = (props) => {\r\n    return (\r\n        <Switch>\r\n            {/* -------- dashboard -------- */}\r\n            <Route exact path=\"/dashboard\" render={\r\n                (props: any) => {\r\n                   \r\n                        console.debug(\"dashboard path\")   \r\n                       return  <DashboardMain />\r\n                }\r\n                   \r\n            } />\r\n            <Route exact path=\"/dashboard/quizhistory\" render={\r\n                (props: any) =>\r\n                    <QuizHistoryPage />\r\n            } />\r\n        </Switch>\r\n    )\r\n}\r\n\r\nconst Settings = (props) => {\r\n    return (\r\n        <Switch>\r\n            {/* -------- settings --------- */}\r\n            <Route exact path=\"/settings\" render={\r\n                (props: any) =>\r\n                    <SettingsMain />\r\n            } />\r\n            <Route exact path=\"/settings/user-profile\" render={\r\n                (props: any) =>\r\n                    <UserProfile />\r\n            } />\r\n            <Route exact path=\"/settings/app-profile\" render={\r\n                (props: any) =>\r\n                    <EditApplicationProfile />\r\n            } />\r\n        </Switch>\r\n    )\r\n}\r\n\r\nconst MemberQuiz = (props) => {\r\n    return (\r\n        <Switch>\r\n            {/* -------- quiz challenge-------- */}\r\n            <Route exact path=\"/quiz\" render={\r\n                (props: any) =>\r\n                    <PublicQuizMain />\r\n            } />\r\n            <Route exact path=\"/quiz/challenge/:id\" render={\r\n                (props: any) =>\r\n                    <PublicQuizChallenge />\r\n            } />\r\n            <Route exact path=\"/quiz/history/:id\" render={\r\n                (props: any) =>\r\n                    <QuizHistoryDetail />\r\n            } />\r\n        </Switch>\r\n    )\r\n}\r\n\r\nconst QuizManagement = (props) => {\r\n    return (\r\n        <Switch>\r\n            {/* -------- quiz management -------- */}\r\n            <Route exact path=\"/quizmanagement\" render={\r\n                (props: any) =>\r\n                    <QuizManagementMain />\r\n            } />\r\n            <Route exact path=\"/quizmanagement/form\" render={\r\n                (props: any) =>\r\n                    <QuizManagementForm />\r\n            } />\r\n            <Route exact path=\"/quizmanagement/upload\" render={\r\n                (props: any) =>\r\n                    <QuizUpload />\r\n            } />\r\n            <Route exact path=\"/quizmanagement/detail/:id\" render={\r\n                (props: any) =>\r\n                    <QuizDetail />\r\n            } />\r\n        </Switch>\r\n    )\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(ApplicationContent))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Menu from '../../models/settings/Menu';\r\nimport './SideBar.css'\r\n\r\nclass SideBar extends BaseComponent {\r\n    constructor(props: { brand: any, sidebarMenus?: Menu[] }) {\r\n        super(props, false);\r\n    }\r\n    isSidebarActive = (menu: Menu) => {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return false; }\r\n        const pathName = this.props.location.pathname;\r\n        return parentMenu.url + \"/\" + menu.url == pathName;\r\n    }\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    handleScroll(event) {\r\n        let scrollTop = event.srcElement.body.scrollTop,\r\n            itemTranslate = Math.min(0, scrollTop / 3 - 60);\r\n        // console.debug(\"scrollTop: \", scrollTop);\r\n\r\n    }\r\n    render() {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return null }\r\n        const menus: Menu[] = this.props.sidebarMenus == null ? [] : this.props.sidebarMenus;\r\n        const user = this.getLoggedUser();\r\n        return (\r\n            <ul id=\"sidebar\" className=\"sidebar-nav bg-light\">\r\n                <Brand show={parentMenu != null} brand={parentMenu} />\r\n\r\n                {menus.map(menu => {\r\n                    if (menu.userAuthorized && !menu.userAuthorized(user)) return null;\r\n                    const isActive: boolean = this.isSidebarActive(menu);\r\n                    const menuClassName = isActive ? 'menu-active' : 'regular-menu';\r\n                    return (\r\n                        <li className={\"sidebar-item \" + menuClassName} key={\"SIDEBAR_\" + menu.code}><Link to={parentMenu.url + \"/\" + menu.url}>\r\n                            <span className=\"sidebar-icon\"><i className={Menu.getIconClassName(menu)}></i></span>\r\n                            <span className={'menu-label'} >{menu.name}</span>\r\n                        </Link></li>\r\n                    )\r\n                })\r\n                }\r\n            </ul >\r\n        )\r\n    }\r\n\r\n}\r\nconst Brand = (props) => {\r\n    if (props.show == false) return null;\r\n    return (\r\n        <Fragment>\r\n            <li id=\"sidebar-brand\" className=\"sidebar-brand\" style={{ marginBottom: '20px' }}>\r\n                <div style={{\r\n                    textAlign: 'center', paddingTop: '10px',\r\n                    paddingBottom: '10px'\r\n                }}>\r\n                    <h3 className=\"text-dark\">\r\n                        <i className={Menu.getIconClassName(props.brand)}></i>\r\n                    </h3>\r\n                    <Link to={props.brand.url} style={{ textDecoration: 'none' }}><h4 className=\"text-dark\">{props.brand.name}</h4></Link>\r\n                </div>\r\n            </li>\r\n            <li className={\"sidebar-item-brand \"} >\r\n                <Link to={props.brand.url}>\r\n                    <span className=\"sidebar-icon\"><i className={Menu.getIconClassName(props.brand)}></i></span>\r\n                </Link>\r\n            </li>\r\n        </Fragment>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SideBar))","import React, { Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Header from '../navigation/Header';\r\nimport ApplicationContent from './ApplicationContent';\r\nimport SideBar from '../navigation/SideBar';\r\nimport './Layout.css';\r\nimport Menu from '../../models/settings/Menu';\r\nimport { getMenuByMenuPath, extractMenuPath } from './../../constant/Menus';\r\ninterface IState {\r\n    showSidebar: boolean;\r\n    activeMenuCode: any;\r\n    menu?: Menu;\r\n    sidebarMenus?: Menu[]\r\n};\r\nclass MainLayout extends BaseComponent {\r\n    state: IState = {\r\n        showSidebar: false,\r\n        activeMenuCode: null,\r\n        menu: undefined,\r\n        sidebarMenus: []\r\n    };\r\n    currentPathName: string = \"\";\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.state = {\r\n            ...this.state,\r\n        }\r\n    }\r\n    setMenuNull = () => {\r\n        console.warn(\"SET MENU NULL\");\r\n        this.setState({ menu: undefined, showSidebar: false, activeMenuCode: null, sidebarMenus: null });\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        if (menu == null) {\r\n            return;\r\n        }\r\n        console.debug(\"SET MENU: \", menu.code);\r\n        this.setState({ menu: menu, sidebarMenus: null, showSidebar: menu.showSidebar, activeMenuCode: menu.code });\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        // console.debug(\"Set sidebar menus: \", menus);\r\n        this.setState({ sidebarMenus: menus });\r\n    }\r\n    componentDidMount() {\r\n        this.setCurrentMenu();\r\n    }\r\n    componentDidUpdate() {\r\n        this.setCurrentMenu();\r\n    }\r\n    setCurrentMenu = () => {\r\n        const pathName = extractMenuPath(this.props.location.pathname);\r\n\r\n        if (pathName == this.currentPathName) {\r\n            return;\r\n        }\r\n        this.currentPathName = pathName;\r\n        const menu = getMenuByMenuPath(pathName);\r\n        if (menu == null) {\r\n            this.setMenuNull();\r\n        } else {\r\n            this.setMenu(menu);\r\n        }\r\n    }\r\n    getSubMenus = () :Menu[]|null => {\r\n        const menuState:Menu|undefined = this.state.menu;\r\n        if (menuState && menuState.subMenus != null && menuState.subMenus?.length > 0) {\r\n            return menuState.subMenus;\r\n        }\r\n        if (this.state.sidebarMenus) {\r\n            return this.state.sidebarMenus;\r\n        }\r\n        return null;\r\n    }\r\n    render() {\r\n        const showSidebar: boolean = this.state.showSidebar == true;\r\n        const className = showSidebar ? \"app-content\" : \"content\";\r\n        return (\r\n            <Fragment>\r\n                <Header setMenuNull={this.setMenuNull} activeMenuCode={this.state.activeMenuCode} setMenu={this.setMenu} />\r\n                <div id=\"content-wrapper\" className={\"container-fluid  \" + className}>\r\n                    <ApplicationContent setSidebarMenus={this.setSidebarMenus} />\r\n                </div>\r\n                {showSidebar ?\r\n                    <SideBar sidebarMenus={this.getSubMenus()} parentMenu={this.state.menu} />\r\n                    : null}\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(MainLayout))","\nimport React, { Component, Fragment, RefObject } from 'react';\nimport './App.css';\nimport { withRouter } from 'react-router-dom'\nimport * as actions from './redux/actionCreators'\nimport { connect } from 'react-redux'\nimport SockJsClient from 'react-stomp';\nimport * as url from './constant/Url';\nimport { mapCommonUserStateToProps } from './constant/stores';\nimport Loader from './component/loader/Loader';\nimport Alert from './component/alert/Alert';\nimport MainLayout from './component/layout/MainLayout';\nimport WebResponse from './models/WebResponse';\nimport Spinner from './component/loader/Spinner';\nimport { performWebsocketConnection, setWebSocketUrl, registerWebSocketCallbacks } from './utils/websockets';\nimport UserService from './services/UserService';\nimport AnchorWithIcon from './component/navigation/AnchorWithIcon';\nimport { time } from 'console';\nimport { doItLater, updateFavicon } from './utils/EventUtil';\n\nclass IState {\n  loading: boolean = false;\n  loadingPercentage: number = 0;\n  requestId?: string;\n  mainAppUpdated: Date = new Date();\n  showAlert: boolean = false;\n  realtime: boolean = false;\n  appIdStatus: string = \"Loading App Id\";\n  errorAuthenticatingApp: boolean = false;\n}\nclass App extends Component<any, IState> {\n  wsConnected: boolean = false;\n  loadings: number = 0;\n  alertTitle: String = \"Info\";\n  alertBody: any = null;\n  alertIsYesOnly: boolean = true;\n  alertIsError: boolean = false;\n  alertOnYesCallback: Function = function (e) { };\n  alertOnCancelCallback: Function = function (e) { };\n  wsUpdateHandler: Function | undefined = undefined;\n  clientRef: RefObject<SockJsClient> = React.createRef();\n  userService: UserService;\n  // alertRef: RefObject<Alert> = React.createRef();\n  alertCallback = {\n    title: \"Info\", message: \"Info\", yesOnly: false,\n    onOk: () => { }, onNo: () => { }\n  }\n\n  constructor(props: any) {\n    super(props);\n    this.state = new IState();\n    this.userService = this.props.services.userService;\n\n    this.props.setMainApp(this);\n  }\n  refresh = () => { this.setState({ mainAppUpdated: new Date() }); }\n\n  requestAppId = () => {\n    this.setState({ appIdStatus: \"Authenticating application\", errorAuthenticatingApp: false });\n    this.userService.requestApplicationId((response) => {\n      this.props.setRequestId(response, this);\n      this.refresh();\n      this.setState({ errorAuthenticatingApp: false });\n    }, this.retryRequestAppId)\n\n  }\n  retryRequestAppId = () => {\n    this.setState({ appIdStatus: \"Authenticating application (Retrying)\", errorAuthenticatingApp: false });\n    this.userService.requestApplicationIdNoAuth((response) => {\n      this.props.setRequestId(response, this);\n      this.setState({ errorAuthenticatingApp: false });\n    },\n      () =>\n        this.setState({ errorAuthenticatingApp: true }))\n\n  }\n  incrementLoadings() {\n    this.loadings++;\n  }\n\n  decrementLoadings() {\n    this.loadings--;\n    if (this.loadings < 0) {\n      this.loadings = 0;\n    }\n  }\n\n  startLoading(realtime: boolean = false) {\n    this.incrementLoadings();\n    this.setState({ loading: true, realtime: realtime });\n  }\n\n  endLoading() {\n    this.decrementLoadings();\n    if (this.loadings == 0) {\n      if (this.state.realtime) {\n        this.setState({ loadingPercentage: 100 }, this.smoothEndLoading);\n      } else {\n        this.setState({ loading: false, loadingPercentage: 0 });\n      }\n    }\n  }\n\n  smoothEndLoading = () => {\n    doItLater(() => {\n      this.setState({ loading: false, loadingPercentage: 0 });\n    }, 100);\n  }\n\n  handleProgress = (msg: WebResponse) => {\n    const percentageFloat: number = msg.percentage ?? 0;\n    let percentage = Math.floor(percentageFloat);\n    if (percentageFloat < 0 || percentageFloat > 100) {\n      this.endLoading();\n    }\n    this.setState({ loadingPercentage: percentage });\n  }\n\n  showAlert(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertTitle = title;\n    this.alertBody = body;\n    this.alertIsYesOnly = yesOnly;\n    const app = this;\n    this.alertOnYesCallback = function (e) {\n      app.dismissAlert();\n      yesCallback(e);\n    }\n    if (!yesOnly) {\n      this.alertOnCancelCallback = function (e) {\n        app.dismissAlert();\n        if (noCallback != null) {\n          noCallback(e);\n        }\n      };\n    }\n    this.setState({ showAlert: true });\n  }\n\n  dismissAlert() {\n    this.alertIsError = false;\n    this.setState({ showAlert: false })\n  }\n  showAlertError(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertIsError = true;\n    this.showAlert(title, body, yesOnly, yesCallback, noCallback)\n  }\n\n  componentDidUpdate() {\n    // console.debug(\"APP UPDATED\");\n    if (this.props.applicationProfile) {\n      updateFavicon(this.props.applicationProfile);\n    }\n    if (this.props.requestId && !this.wsConnected) {\n      this.initWebsocket();\n    }\n  }\n\n  componentDidMount() {\n    this.requestAppId();\n    this.setState({ loadingPercentage: 0 });\n  }\n\n  initWebsocket = () => {\n    setWebSocketUrl(url.contextPath() + 'realtime-app');\n    registerWebSocketCallbacks({\n      subscribeUrl: \"/wsResp/progress/\" + this.props.requestId,\n      callback: this.handleProgress  //must use lambda\n    },\n      {\n        subscribeUrl: \"/wsResp/\" + this.props.requestId + \"/update\",\n        callback: (response) => this.handleWsUpdate(response)\n      });\n    performWebsocketConnection();\n    this.wsConnected = true;\n  }\n\n  private handleWsUpdate = (response: any) => {\n\n    if (this.wsUpdateHandler) {\n      this.wsUpdateHandler(response);\n    }\n  }\n\n  setWsUpdateHandler = (handler: Function | undefined) => {\n    this.wsUpdateHandler = handler;\n  }\n  resetWsUpdateHandler = () => {\n    this.setWsUpdateHandler(undefined);\n  }\n\n  render() {\n    if (!this.props.requestId) {\n      return (\n        <div className=\"text-center\" style={{ paddingTop: '10%' }}>\n          <h2>{this.state.appIdStatus}</h2>\n          {this.state.errorAuthenticatingApp ?\n            <AnchorWithIcon iconClassName=\"fas fa-redo\" onClick={this.retryRequestAppId} children=\"Retry\" /> :\n            <Spinner />}\n        </div>\n      )\n    }\n    return (\n      <Fragment>\n        <Loading realtime={this.state.realtime} loading={this.state.loading} loadingPercentage={this.state.loadingPercentage} />\n        {this.state.showAlert ?\n          <Alert title={this.alertTitle}\n            isError={this.alertIsError}\n            onClose={(e) => this.setState({ showAlert: false })}\n            yesOnly={this.alertIsYesOnly}\n            onYes={this.alertOnYesCallback} onNo={this.alertOnCancelCallback}\n          >{this.alertBody}</Alert> :\n          null}\n        <MainLayout />\n        {/* <SockJsClient url={usedHost + 'realtime-app'} topics={['/wsResp/progress/' + this.props.requestId]}\n\n          onMessage={(msg: WebResponse) => { this.handleMessage(msg) }}\n          ref={this.clientRef} /> */}\n      </Fragment>\n    )\n  }\n}\n\nfunction Loading(props) {\n  if (props.loading == true) {\n    return (\n      <Loader realtime={props.realtime} progress={props.loadingPercentage} text=\"Please wait...\" type=\"loading\" />\n    );\n  }\n  return null;\n}\n\n\nconst mapDispatchToProps = (dispatch: Function) => ({\n  setMainApp: (app: App) => dispatch(actions.setMainApp(app)),\n  setRequestId: (response: WebResponse, app: App) => dispatch(actions.setRequestId(response, app)),\n})\n\nexport default withRouter(connect(\n  mapCommonUserStateToProps,\n  mapDispatchToProps\n)(App))\n","import React from 'react'\r\nimport App from './App'\r\nimport configureStore from './redux/configureStore'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n \r\nconst Root = (props:any)  => {\r\n\r\n    const store = configureStore();\r\n\r\n    return (\r\n        <Provider store={store}>\r\n            <HashRouter>\r\n                <App/>\r\n            </HashRouter>\r\n        </Provider>  \r\n\r\n    );\r\n}\r\n\r\n\r\nexport default Root;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './Root.tsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}
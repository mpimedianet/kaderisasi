(this["webpackJsonparabic-club"]=this["webpackJsonparabic-club"]||[]).push([[0],{41:function(e,t,a){},44:function(e,t,a){e.exports=a(81)},49:function(e,t,a){},50:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),o=a(22),l=a.n(o),s=(a(49),a(4)),c=a(7),u=a(3),d=a(2),m=a(1),p=(a(50),a(11)),f=a(8),h=a(18),v={mainApp:void 0},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MAIN_APP":return Object(f.a)(Object(f.a)({},e),{},{mainApp:t.payload});default:return e}};!function(e){e.ROLE_ADMIN="ROLE_ADMIN",e.ROLE_USER="ROLE_USER"}(n||(n={}));var b=function e(){Object(m.a)(this,e),this.id=void 0,this.createdDate=void 0,this.modifiedDate=void 0,this.nulledFields=void 0},E=1,y=function(){var e=new String((new Date).getUTCMilliseconds()).toString();return++E+"-"+e};function C(e){if(""==e||null==e)return"0";var t=new String(e).includes("."),a=new String(e).startsWith("-");a&&(e=new String(e).replace("-",""));var n=t?parseInt(new String(e).split(".")[0]):parseInt(e),r=Math.abs(n).toString(),i="";if(r.length>3){for(var o=0,l=r.length-1;l>0;l--)o++,i=r[l]+i,3==o&&(i="."+i,o=0);i=r[0]+i}else i=e;return n<0?n:(t&&(i+=","+new String(e).split(".")[1]),a&&(i="-"+i),i)}var N=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).code=y(),e.name=void 0,e.description=void 0,e.url=void 0,e.pathVariables=void 0,e.iconUrl=void 0,e.color=void 0,e.fontColor=void 0,e.role=[],e.active=!1,e.menuClass="fas fa-folder",e.authenticated=!1,e.showSidebar=!1,e.subMenus=void 0,e.userAuthorized=function(t){if(0==e.role.length)return!0;if(!t)return!1;for(var a=0;a<e.role.length;a++){var n=e.role[a];if(t.role==n)return!0}return!1},e}return a}(b);N.defaultMenuIconClassName="fas fa-folder",N.getIconClassName=function(e){return void 0==e.menuClass?N.defaultMenuIconClassName:e.menuClass};var w=function(){for(var e=[],t=0;t<S.length;t++){var a=S[t],n=Object.assign(new N,a),r=[];if(a.subMenus){for(var i=0;i<a.subMenus.length;i++){var o=a.subMenus[i];r.push(Object.assign(new N,o))}n.subMenus=r}e.push(n)}return e},S=[{code:"home",name:"Home",url:"/home",menuClass:"fa fa-home",active:!1,authenticated:!1,showSidebar:!1,role:[]},{code:"lessons",name:"Lessons",url:"/lessons",menuClass:"fa fa-home",active:!1,authenticated:!1,showSidebar:!0,role:[]},{code:"events",name:"Events",url:"/events",menuClass:"fa fa-calendar-week",active:!1,authenticated:!1,showSidebar:!0,role:[],subMenus:[{code:"e_public_speaking",name:"Public Speaking",url:"publicspeaking",menuClass:"fas fa-broadcast-tower",role:[]},{code:"e_skills",name:"Skill",url:"skill",menuClass:"fas fa-basketball-ball",role:[]}]},{code:"gallery",name:"Gallery",url:"/gallery",menuClass:"fa fa-photo-video",active:!1,authenticated:!1,showSidebar:!0,role:[],subMenus:[{code:"gallery_picture",name:"Pictures",url:"picture",menuClass:"fas fa-images",role:[]},{code:"gallery_video",name:"Videos",url:"video",menuClass:"fas fa-video",role:[]},{code:"gallery_document",name:"Documents",url:"document",menuClass:"far fa-file",role:[]}]},{code:"dashboard",name:"Dashboard",url:"/dashboard",menuClass:"fas fa-tachometer-alt",active:!1,authenticated:!0,showSidebar:!0,role:[n.ROLE_ADMIN,n.ROLE_USER],subMenus:[{code:"dashboard_quiz_history",name:"Quiz History",url:"quizhistory",menuClass:"fas fa-history",role:[n.ROLE_ADMIN,n.ROLE_USER]}]},{code:"public_quiz",name:"Quiz",url:"/quiz",menuClass:"fas fa-book",active:!1,authenticated:!0,showSidebar:!1,subMenus:[],role:[n.ROLE_ADMIN,n.ROLE_USER]},{code:"quiz_management",name:"Quiz Management",url:"/quizmanagement",menuClass:"fas fa-chalkboard",active:!1,authenticated:!0,showSidebar:!0,role:[n.ROLE_ADMIN],subMenus:[{code:"quiz_management_form",name:"Quiz Form",url:"form",menuClass:"fas fa-keyboard",role:[]},{code:"quiz_upload_form",name:"Quiz Upload",url:"upload",menuClass:"fas fa-upload",role:[]}]},{code:"management",name:"Master Data",url:"/management",menuClass:"fa fa-database",active:!1,authenticated:!0,showSidebar:!0,role:[n.ROLE_ADMIN]},{code:"settings",name:"Setting",url:"/settings",menuClass:"fas fa-cogs",active:!1,authenticated:!0,showSidebar:!0,role:[n.ROLE_ADMIN,n.ROLE_USER],subMenus:[{code:"user_profile",name:"Profile",menuClass:"fas fa-user-cog",url:"user-profile",role:[n.ROLE_ADMIN,n.ROLE_USER]},{code:"app_profile",name:"Application Setting",menuClass:"fas fa-cog",url:"app-profile",role:[n.ROLE_ADMIN]}]}],O={loginKey:null,loginStatus:!1,loginFailed:!1,menus:w(),loggedUser:null,loginAttempt:!1,requestId:null,applicationProfile:{},assetsPath:""},j=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,n=arguments.length>1?arguments[1]:void 0,r={};switch(n.type){case"SET_REQUEST_ID":return console.debug("USER REDUCER:REQUEST_ID",n.payload.requestId),r=Object(f.a)(Object(f.a)({},a),{},{requestId:n.payload.requestId,masterHealthCenter:null!==(e=n.payload.masterHealthCenter)&&void 0!==e?e:{},applicationProfile:null!==(t=n.payload.applicationProfile)&&void 0!==t?t:{},assetsPath:n.payload.applicationProfile.assetsPath}),1==n.payload.loginStatus?(r.loggedUser=n.payload.user,r.loginStatus=!0):(r.loginStatus=!1,r.loggedUser=null),console.debug("result"),console.debug("action.payload.requestId: ",n.payload.requestId),console.debug("REQUEST_ID result.loginStatus:",r.loginStatus),n.payload.referer.refresh(),r;case"do_login":return r=Object(f.a)(Object(f.a)({},a),{},{loginAttempt:!0,loginStatus:n.payload.loginStatus,loginKey:n.payload.loginKey,loginFailed:0==n.payload.loginStatus,loggedUser:n.payload.loggedUser});case"do_logout":return r=Object(f.a)(Object(f.a)({},a),{},{loginStatus:!1,loggedUser:null}),fe(null),r;case"refresh_login":return r=Object(f.a)(Object(f.a)({},a),{},{loginStatus:n.payload.loginStatus,loggedUser:n.payload.loggedUser,requestId:n.payload.requestId});case"get_logged_user":return r=Object(f.a)(Object(f.a)({},a),{},{loggedUser:n.payload.data});case"set_logged_user":return r=Object(f.a)(Object(f.a)({},a),{},{loggedUser:n.payload.user});case"SET_APPLICATION_PROFILE":return r=Object(f.a)(Object(f.a)({},a),{},{applicationProfile:n.payload.applicationProfile});default:return Object(f.a)({},a)}},k=function(){function e(){Object(m.a)(this,e),this.name="",this.blob=new Blob,this.url="",this.data=""}return Object(s.a)(e,[{key:"setUrl",value:function(e){this.url=e,this.data=e.split(",")[1]}}],[{key:"nameOnly",value:function(t){var a=new e;return a.name=t,a}},{key:"instance",value:function(t,a){var n=new e;return n.name=t,n.url=a,n}}]),e}(),D=a(30),I=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){D.post(e,a,{headers:le()}).then((function(e){pe(e);var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))},L=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){D.post(e,a,{headers:se()}).then((function(e){var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))},q=function(){function e(){Object(m.a)(this,e),this.updateProfile=function(e){var t={user:e},a=Ee().concat("api/member/account/updateprofile");return I(a,t)},this.saveUser=function(e){var t={user:e},a=Ee().concat("api/public/register");return L(a,t)},this.requestApplicationId=function(e,t){var a=Ee()+"api/public/requestid";I(a,{}).then((function(t){if("00"==t.code){var a=t.rawAxiosResponse;pe(a),console.debug("response header:",a.headers["access-token"]),e(t)}else alert("Error requesting app ID")})).catch((function(e){console.error("ERROR requestApplicationId: ",e),t()}))},this.requestApplicationIdNoAuth=function(e,t){var a=Ee()+"api/public/requestid";L(a,{}).then((function(t){"00"==t.code?e(t):alert("Error requesting app ID")})).catch((function(e){console.error("ERROR requestApplicationIdNoAuth: ",e),t()}))}}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();q.instance=void 0;var P=function(){function e(){var t=this;Object(m.a)(this,e),this.categories=new Map,this.getCategories=function(e){var t=Ee().concat("api/public/categories/"+e);return L(t,{})},this.getLoadedCategories=function(e){var a;return null!==(a=t.categories.get(e))&&void 0!==a?a:[]},this.setLoadedCategories=function(e,a){t.categories.set(e,a)}}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();P.instance=void 0;var A=function(){function e(){Object(m.a)(this,e),this.getLessons=function(e,t){var a=Ee().concat("api/public/lessons/"+e);return L(a,t)}}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();A.instance=void 0;var T=a(15),z=function(){function e(){Object(m.a)(this,e),this.managementProperties=[],this.entityPropertyMap=new Map,this.updateApplicationProfile=function(e){var t={profile:e},a=Ee().concat("api/app/setting/updateprofile");return I(a,t)}}return Object(s.a)(e,[{key:"setEntityProperty",value:function(e,t){t&&this.entityPropertyMap.set(e,t)}},{key:"getEntityProperty",value:function(e){if(void 0!=e)return this.entityPropertyMap.get(e)}},{key:"loadManagementProperties",value:function(e){var t=Ee().concat("api/app/entity/managementpages");return I(t,{})}},{key:"loadEntityProperty",value:function(e){console.debug("Load entity prop: ",e);var t={entity:e},a=Ee().concat("api/app/entity/configv2");return I(a,t)}},{key:"loadEntities",value:function(e){var t=Ee().concat("api/app/entity/get");return I(t,e)}},{key:"loadAllEntities",value:function(e){var t={entity:e,filter:{limit:0,page:0}},a=Ee().concat("api/app/entity/get");return I(a,t)}},{key:"getById",value:function(e,t){var a={entity:e,filter:{exacts:!0,limit:1,page:0,fieldsFilter:{id:t}}},n=Ee().concat("api/app/entity/get");return I(n,a)}},{key:"getBy",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n={entity:e,filter:{exacts:!0,limit:a,page:0,fieldsFilter:t}},r=Ee().concat("api/app/entity/get");return I(r,n)}},{key:"delete",value:function(e,t){var a={entity:e,filter:{fieldsFilter:{id:t}}},n=Ee().concat("api/app/entity/delete");return I(n,a)}},{key:"save",value:function(e,t,a){var n,r=Object(T.a)({entity:e},e,t);return n=a?Ee().concat("api/app/entity/update"):Ee().concat("api/app/entity/add"),I(n,r)}},{key:"generateReport",value:function(e){return function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){D.post(e,a,{responseType:"blob",headers:le()}).then((function(e){pe(e);var a=e.data;a.rawAxiosResponse=e,console.debug("axiosResponse.headers: ",e.headers);var n=e.headers["content-disposition"].split("filename=")[1],r=n.split("."),i=r[r.length-1],o=new Blob([a],{type:i}),l=window.URL.createObjectURL(o),s=new k;s.name=n,s.blob=o,s.url=l,t(s)})).catch((function(e){console.error(e),n(e)}))}))}(Ee().concat("api/app/report/records"),e)}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();z.instance=void 0;var R=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).title="",e.description="",e.available=!0,e.showAllQuestion=!0,e.questionsTimered=!1,e.duration=0,e.active=!0,e.repeatable=!0,e.protectedByCode=void 0,e.questions=[],e.image="",e.startedDate=new Date,e.submittedDate=new Date,e.mappedAnswer=void 0,e.maxQuestionNumber=void 0,e.getQuestionCount=function(){return e.questions?e.questions.length:0},e.resetCorrectChoices=function(){if(e.questions&&0!=e.getQuestionCount())for(var t=0;t<e.questions.length;t++){var a=e.questions[t];a.correctChoice=void 0,a.answerCode=void 0}},e.allQuestionHasBeenAnswered=function(){if(!e.questions||0==e.getQuestionCount())return!1;for(var t=0;t<e.questions.length;t++){if(null==e.questions[t].answerCode)return!1}return!0},e.accessCode=void 0,e.afterCompletionMessage=void 0,e}return a}(b);R.clone=function(e){return Object.assign(new R,e)},R.updateMappedAnswer=function(e){e.mappedAnswer={};for(var t=0;t<e.questions.length;t++){var a,n,r=e.questions[t];if(r.id&&(r.answerCode||r.answerEssay||1==r.entered))e.mappedAnswer[new String(r.number).toString()]=null!==(a=r.answerCode)&&void 0!==a?a:null!==(n=r.answerEssay)&&void 0!==n?n:null}};var x=function(e,t){var a=setTimeout((function(){e(),clearTimeout(a)}),t)},F=void 0,M=!1,_=void 0,U=new Array,Q=new Array,B=function(e,t){return M&&F?(console.debug("SEND WEBSOCKET"),F.send(e,{},JSON.stringify(t)),!0):(console.info("Connecting"),!1)},Y=function(){function e(){Object(m.a)(this,e),this.getQuiz=function(e){var t=Ee().concat("api/member/quiz/get/"+e);return I(t,{})},this.submitAnswers=function(e){for(var t=Object.assign(new R,e),a=0;a<t.questions.length;a++)t.questions[a].choices=void 0;var n=Ee().concat("api/member/quiz/submit");return I(n,{quiz:t})},this.getQuizList=function(e){e.orderBy="title",e.orderType="asc";var t={filter:e},a=Ee().concat("api/member/quiz/list");return I(a,t)},this.getHistories=function(e){var t={filter:e},a=Ee().concat("api/member/quiz/history");return I(a,t)},this.sendUpdateStart=function(e,t){var a=Object.assign(new R,e);a.questions=[],B("/app/quiz/start",{quizHistory:{quiz:a,token:me(),requestId:t}})},this.sendUpdateAnswer=function(e,t){var a=Object.assign(new R,e);try{R.updateMappedAnswer(a),a.questions=[];var n={updated:new Date,requestId:t,quiz:a,token:me()};B("/app/quiz/answer",{quizHistory:n})}catch(r){console.error(r)}}}return Object(s.a)(e,[{key:"validateAccessCode",value:function(e,t){var a=Ee().concat("api/member/quiz/validateaccesscode/"+e.id+"?code="+t);return I(a,{})}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();Y.instance=void 0;var H=function(){function e(){Object(m.a)(this,e),this.getQuizList=function(e){var t=Ee().concat("api/app/quiz/list");return I(t,{filter:e})},this.submit=function(e){var t=Ee().concat("api/app/quiz/submit");return I(t,{quiz:e})},this.getQuiz=function(e){var t=Ee().concat("api/app/quiz/getquiz/"+e);return I(t,{})},this.deleteQuiz=function(e){var t=Ee().concat("api/app/quiz/deletequiz/"+e);return I(t,{})},this.uploadQuiz=function(e){var t=Ee().concat("api/app/quiz/uploadquiz");return I(t,{attachmentInfo:e})}}return Object(s.a)(e,[{key:"getHistoryDetail",value:function(e){var t=Ee().concat("api/member/quiz/history/"+e);return I(t,{})}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();H.instance=void 0;var W=function(){function e(){Object(m.a)(this,e),this.getPictures=function(e){var t=Ee().concat("api/public/gallery/pictures");return L(t,{filter:e})},this.getVideos=function(e){var t=Ee().concat("api/public/gallery/videos");return L(t,{filter:e})},this.getDocuments=function(e){var t=Ee().concat("api/public/gallery/documents");return L(t,{filter:e})}}return Object(s.a)(e,[{key:"validateDocumentAccessCode",value:function(e,t){var a=Ee().concat("api/public/gallery/documents/"+t+"/unlock/"+e);return L(a,{})}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();W.instance=void 0;var V={services:{userService:q.getInstance(),categoriesService:P.getInstance(),lessonService:A.getInstance(),masterDataService:z.getInstance(),publicQuizService:Y.getInstance(),quizService:H.getInstance(),galleryService:W.getInstance()}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return e},G=Object(h.c)({appState:g,userState:j,servicesState:X}),K={appState:v,userState:O,servicesState:V},J=a(30),Z=function(e){return function(t){return function(a){if(!a.meta||"do_login"!==a.meta.type)return t(a);var n=a.meta.app;J.post(a.meta.url,{},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){var n=t.data,r="",i=!1;null!=n.code&&"00"==n.code&&(r=t.headers["access-token"],console.log("api_token: ",r),i=!0);var o=Object.assign({},a,{payload:{loginStatus:i,loginKey:r,loggedUser:n.user}});pe(t),delete o.meta,e.dispatch(o)})).catch(console.log).finally((function(){n.endLoading()}))}}},$=function(e){return function(t){return function(a){if(!a.meta||"get_logged_user"!==a.meta.type)return t(a);var n=le();J.post(a.meta.url,a.payload,{headers:n}).then((function(t){var n=t.data;if(n){var r=Object.assign({},a,{payload:{data:n}});delete r.meta,e.dispatch(r)}else alert("Error performing request")})).catch(console.log).finally((function(e){a.meta.app.endLoading(),a.meta.app.refresh()}))}}},ee=function(e){return function(t){return function(a){if(!a.meta||"do_logout"!==a.meta.type)return t(a);var n=a.meta.app;J.post(a.meta.url,a.payload,{headers:le()}).then((function(t){var n=!1;"00"==t.data.code?n=!0:alert("Logout Failed");var r=Object.assign({},a,{payload:{loginStatus:!n}});delete r.meta,e.dispatch(r)})).catch(console.log).finally((function(e){return n.endLoading()}))}}},te=function(e){return function(t){return function(a){if(!a.meta||"set_logged_user"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},ae=function(e){return function(t){return function(a){if(!a.meta||"GET_MESSAGE"!==a.meta.type)return t(a);fetch(a.meta.url,{method:"post",body:JSON.stringify(a.payload),headers:le()}).then((function(e){return e.json()})).then((function(t){console.debug("sendChatMessageMiddleware Response:",t);var n=Object.assign({},a,{payload:t});delete n.meta,e.dispatch(n)})).catch((function(e){return console.log(e)})).finally((function(e){return a.meta.app.endLoading()}))}}},ne=function(e){return function(t){return function(a){if(!a.meta||"store_message"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},re=null,ie=function(){return re},oe=function(){return re=Object(h.d)(G,K,Object(h.a)(Z,ee,$,te,ne,ae))},le=function(){return{"Content-Type":"application/json",requestId:de(),Authorization:"Bearer "+me()}},se=function(){return{"Content-Type":"application/json",requestId:de()}},ce="arabic-club-login-key",ue=function(){var e=ie();return null==e?"":e.getState().userState.assetsPath},de=function(){var e=ie();return null==e?"":e.getState().userState.requestId},me=function(){return ve(ce)},pe=function(e){if(e&&e.headers&&e.headers["access-token"]){var t=e.headers["access-token"];he(ce,t)}},fe=function(e){he(ce,e)},he=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},ve=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},ge="${contextPath}"==document.getElementById("rootPath").value||""==document.getElementById("rootPath").value,be=ge?"/universal-good-shop/":document.getElementById("rootPath").value+"/",Ee=function(){var e=ge?"http://localhost:8080".concat(be):be;return e},ye=function(){return ue()+"images/"},Ce=function(){return ue()+"documents/"},Ne=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).username=void 0,e.displayName=void 0,e.editPassword=void 0,e.profileImage=void 0,e.role=void 0,e.requestId=void 0,e}return a}(b),we=Ee(),Se=we+"api/member/account/",Oe=function(e){return e.startLoading(),{type:"do_logout",payload:{},meta:{app:e,type:"do_logout",url:Se.concat("logout")}}},je=a(5),ke=function(e){return{applicationProfile:e.userState.applicationProfile,loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,requestId:e.userState.requestId,services:e.servicesState.services,mainApp:e.appState.mainApp}};a(73);function De(e){return e.realtime?i.a.createElement("div",{className:"row container-fluid bg-light",style:{margin:0,position:"fixed",zIndex:100}},i.a.createElement("div",{className:"col-1"},i.a.createElement("span",{style:{marginBottom:"3px"},className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})),i.a.createElement("div",{className:"col-11 progress",style:{padding:0,marginTop:"7px",height:"10px"}},i.a.createElement("div",{className:"bg-primary",style:{width:e.progress+"%",transitionDuration:"50ms",margin:0}}))):i.a.createElement("button",{className:"btn btn-dark ",type:"button",disabled:!0},i.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),i.a.createElement("span",{className:" "},"Loading..."))}var Ie=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={timer:130,intervalId:0},n.update=function(){n.state.timer<0&&clearInterval(n.state.intervalId),console.log("tick"),n.setState({timer:n.state.timer-1}),n.state.timer<0&&n.props.endMessage&&n.props.endMessage()},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(1==this.props.withTimer){var e=setInterval(this.update,1,null);this.setState({intervalId:e})}}},{key:"render",value:function(){var e="message message-"+this.props.type;return 1==this.props.realtime?i.a.createElement(De,{progress:this.props.progress,realtime:this.props.realtime}):i.a.createElement("div",{className:e},i.a.createElement(De,{progress:this.props.progress,realtime:this.props.realtime}))}}]),a}(r.Component);function Le(e){return i.a.createElement("div",{className:"modal-backdrop",style:{backgroundColor:"rgba(100,100,100,0.7)"}})}function qe(e){return i.a.createElement("div",{className:"modal-footer "+e.className},i.a.createElement("button",{ref:e.yesButtonRef,type:"button",onClick:e.onYes,className:"btn btn-outline-primary"},"Yes"),e.yesOnly?null:i.a.createElement("button",{ref:e.noButtonRef,type:"button",onClick:e.onNo,className:"btn btn-outline-secondary"},"No"))}function Pe(e){return i.a.createElement("div",{className:"modal-header "+e.className},i.a.createElement("h5",{className:"modal-title "+e.fontClassName,id:"exampleModalCenterTitle"},e.title),i.a.createElement("button",{onClick:e.onClose,type:"button",className:"close"},i.a.createElement("span",{"aria-hidden":"true",className:e.fontClassName},i.a.createElement("i",{className:"fas fa-times"}))))}var Ae=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).yesButtonRef=i.a.createRef(),n.noButtonRef=i.a.createRef(),n.onYes=function(e){n.props.onYes&&n.props.onYes(e)},n.onNo=function(e){n.props.onNo&&n.props.onNo(e)},n.onClose=function(e){n.props.onClose&&n.props.onClose(e)},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=1==this.props.isError;!e&&this.yesButtonRef.current?this.yesButtonRef.current.focus():e&&this.noButtonRef.current?this.noButtonRef.current.focus():e&&this.yesButtonRef.current&&this.yesButtonRef.current.focus()}},{key:"render",value:function(){var e=this.props.title?this.props.title:"Info",t=1==this.props.yesOnly,a=1==this.props.isError?"bg-danger":"bg-info";return i.a.createElement(i.a.Fragment,null,i.a.createElement(Le,null),i.a.createElement("div",{className:"modal fade show",style:{display:"block"},id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},i.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},i.a.createElement("div",{className:"modal-content"},i.a.createElement(Pe,{fontClassName:"text-light",className:a,title:e,onClose:this.onClose}),i.a.createElement("div",{className:"modal-body"}," ",this.props.children),i.a.createElement(qe,{noButtonRef:this.noButtonRef,yesButtonRef:this.yesButtonRef,yesOnly:t,onYes:this.onYes,onNo:this.onNo})))))}}]),a}(r.Component),Te=function(e){return document.getElementById(e)};var ze=function(e){return new Promise((function(t,a){if(null!=e.files&&e.files[0])try{var n=e.files[0],r=new FileReader;r.readAsDataURL(n),console.debug("fileInput.files[0]: ",n),r.onload=function(){var e=new k;e.setUrl(new String(r.result).toString()),e.name=n.name,t(e)},r.onerror=function(e){a(e)}}catch(i){a(i)}else a(new Error("No file"))}))},Re=function(e){return new Promise((function(t,a){try{var n=new FileReader;n.readAsDataURL(e.files[0]),console.debug("fileInput.files[0]: ",e.files[0]),n.onload=function(){t(new String(n.result).toString())},n.onerror=function(e){a(e)}}catch(r){a(r)}}))};var xe,Fe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).name=void 0,e.appCode=void 0,e.shortDescription=void 0,e.about=void 0,e.welcomingMessage=void 0,e.address=void 0,e.contact=void 0,e.website=void 0,e.iconUrl=void 0,e.pageIcon=void 0,e.backgroundUrl=void 0,e.footerIconClass=void 0,e.color=void 0,e.fontColor=void 0,e}return a}(b),Me=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(m.a)(this,a),(r=t.call(this,e)).parentApp=void 0,r.authenticated=!0,r.state={updated:new Date},r.validateLoginStatus=function(){0!=r.authenticated&&r.isLoggedUserNull()&&r.backToLogin()},r.sendWebSocket=function(e,t){B(e,t)},r.setWsUpdateHandler=function(e){r.parentApp&&r.parentApp.setWsUpdateHandler(e)},r.resetWsUpdateHandler=function(){r.parentApp&&r.parentApp.resetWsUpdateHandler()},r.handleInputChange=function(e){var t=e.target,a="checkbox"==t.type?t.checked:t.value;r.setState(Object(T.a)({},t.name,a)),console.debug("input changed: ",t.name,a)},r.isAdmin=function(){var e=r.getLoggedUser();return!!e&&e.role==n.ROLE_ADMIN},r.showCommonErrorAlert=function(e){var t;console.error(e),t=e.response&&e.response.data?e.response.data.message:e,r.showError("Operation Failed: "+t)},r.getServices=function(){return r.props.services},r.authenticated=i,r.state=Object(f.a)({},r.state),r.parentApp=e.mainApp,r}return Object(s.a)(a,[{key:"getApplicationProfile",value:function(){return null==this.props.applicationProfile?new Fe:this.props.applicationProfile}},{key:"focusToActiveField",value:function(){if(null!=this.state.activeId&&null!=Te(this.state.activeId)){var e=Te(this.state.activeId);null!=e&&e.focus()}}},{key:"startLoading",value:function(e){this.parentApp.startLoading(e)}},{key:"endLoading",value:function(){this.parentApp.endLoading()}},{key:"doAjax",value:function(e,t,a,n){var r=this;this.startLoading(t);for(var i=arguments.length,o=new Array(i>4?i-4:0),l=4;l<i;l++)o[l-4]=arguments[l];e.apply(void 0,o).then((function(e){a&&a(e)})).catch((function(e){n?n(e):("string"==typeof e&&alert("Operation Failed: "+e),alert("resource not found"))})).finally((function(){r.endLoading()}))}},{key:"commonAjax",value:function(e,t,a){for(var n=arguments.length,r=new Array(n>3?n-3:0),i=3;i<n;i++)r[i-3]=arguments[i];this.doAjax.apply(this,[e,!1,t,a].concat(r))}},{key:"commonAjaxWithProgress",value:function(e,t,a){for(var n=arguments.length,r=new Array(n>3?n-3:0),i=3;i<n;i++)r[i-3]=arguments[i];this.doAjax.apply(this,[e,!0,t,a].concat(r))}},{key:"getLoggedUser",value:function(){var e=this.props.loggedUser;if(e)return e.editPassword="^_^",Object.assign(new Ne,e)}},{key:"isLoggedUserNull",value:function(){return 0==this.props.loginStatus||null==this.props.loggedUser}},{key:"isUserLoggedIn",value:function(){return 1==this.props.loginStatus&&null!=this.props.loggedUser}},{key:"showConfirmation",value:function(e){var t=this;return new Promise((function(a,n){t.parentApp.showAlert("Confirmation",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))}},{key:"showConfirmationDanger",value:function(e){var t=this;return new Promise((function(a,n){t.parentApp.showAlertError("Confirmation",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))}},{key:"showInfo",value:function(e){this.parentApp.showAlert("Info",e,!0,(function(){}))}},{key:"showError",value:function(e){this.parentApp.showAlertError("Error",e,!0,(function(){}))}},{key:"backToLogin",value:function(){this.authenticated&&null!=this.props.history&&this.props.history.push("/login")}},{key:"refresh",value:function(){this.setState({updated:new Date})}},{key:"componentDidMount",value:function(){this.validateLoginStatus()}},{key:"componentDidUpdate",value:function(){1==this.authenticated&&this.isLoggedUserNull()&&(console.debug(typeof this,"BACK TO LOGIN"),this.validateLoginStatus())}}]),a}(r.Component),_e=a(6),Ue=(a(74),function e(){Object(m.a)(this,e),this.showNavLinks=!1}),Qe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new Ue,n.buttonToggleNavRef=i.a.createRef(),n.toggleNavLinks=function(){n.setState({showNavLinks:!n.state.showNavLinks})},n.onLogout=function(e){var t=Object(c.a)(n);t.showConfirmation("Logout?").then((function(e){e&&t.props.performLogout(t.parentApp)}))},n.setMenu=function(e){n.state.showNavLinks&&n.buttonToggleNavRef.current&&n.buttonToggleNavRef.current.click(),n.props.setMenu(e)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state.showNavLinks,a=w(),n=this.getLoggedUser();return i.a.createElement("div",{className:"bg-dark container-fluid",style:{position:"fixed",zIndex:55,padding:0,margin:0}},i.a.createElement(Be,{label:this.getApplicationProfile().name}),i.a.createElement("nav",{id:"navbar",className:"navbar navbar-expand-lg navbar-dark bg-dark",style:{width:"100%"}},i.a.createElement("a",{id:"navbar-brand",className:"navbar-brand",href:"#"},this.getApplicationProfile().name),i.a.createElement("button",{ref:this.buttonToggleNavRef,onClick:this.toggleNavLinks,className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarToggler","aria-controls":"navbarToggler","aria-expanded":"false","aria-label":"Toggle navigation"},i.a.createElement("i",{className:t?"fas fa-times":"fas fa-bars"})),i.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarToggler"},i.a.createElement("ul",{id:"navbar-top",className:"navbar-nav mr-auto mt-2 mt-lg-0"},a.map((function(t){if(null==t||t.authenticated&&!n)return null;if(t.userAuthorized&&0==t.userAuthorized(n))return null;var a=e.props.activeMenuCode==t.code;return i.a.createElement("li",{key:"header-menu-"+new String(t.code),className:"nav-item "+(a?"active nav-active":"nav-inactive")},i.a.createElement(_e.b,{onClick:function(){return e.setMenu(t)},className:"nav-link  ",to:t.url},i.a.createElement("span",null,t.name)))}))),i.a.createElement("form",{className:"form-inline my-2 my-lg-0"},i.a.createElement(Ye,{setMenuNull:this.props.setMenuNull,onLogout:this.onLogout,user:n})))))}}]),a}(Me),Be=function(e){return i.a.createElement("div",{id:"navbar-brand-top",style:{paddingLeft:"0.5rem"},className:"container-fluid"},i.a.createElement("a",{style:{fontSize:"15px"},className:"text-white navbar-brand",href:"#"},i.a.createElement("strong",null,e.label)))},Ye=function(e){return e.user?i.a.createElement(r.Fragment,null,i.a.createElement(_e.b,{onClick:e.setMenuNull,style:{marginRight:"5px"},className:"btn btn-light btn-sm my-2 my-sm-0",to:"/settings/user-profile"},i.a.createElement("img",{width:"20",src:ye()+e.user.profileImage,className:"rounded rounded-circle"}),"\xa0",e.user.displayName),i.a.createElement("a",{style:{marginRight:"5px"},className:"btn btn-danger btn-sm  my-2 my-sm-0",onClick:e.onLogout},i.a.createElement("i",{className:"fas fa-sign-out-alt"}),"\xa0Logout")):i.a.createElement(_e.b,{style:{marginRight:"5px"},onClick:e.setMenuNull,className:"btn btn-sm btn-info my-2 my-sm-0",to:"/login"}," ",i.a.createElement("i",{className:"fas fa-sign-in-alt"}),"\xa0Login")},He=Object(p.f)(Object(je.b)(ke,(function(e){return{performLogout:function(t){return e(Oe(t))}}}))(Qe)),We=(a(41),a(76),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){for(var e=new Array,t=0;t<=11;t++)e.push(i.a.createElement("div",{key:"spinner-item-"+t}));return i.a.createElement("div",{style:{width:"85px",height:"85px",display:"block"},className:"container-fluid text-center"},i.a.createElement("div",{style:{visibility:0==this.props.show?"hidden":"visible"},className:"lds-spinner"},e))}}]),a}(r.Component)),Ve=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return this.props.to?i.a.createElement(_e.b,Object.assign({},this.props.attributes,{to:this.props.to,style:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?i.a.createElement("span",{style:{marginRight:"5px"}},i.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children):i.a.createElement("a",Object.assign({},this.props.attributes,{tyle:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?i.a.createElement("span",{style:{marginRight:"5px"}},i.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(r.Component),Xe=function e(){Object(m.a)(this,e),this.loading=!1,this.username="",this.editPassword=""},Ge=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new Xe,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.updateCredentialProperty=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(T.a)({},a,t.value))},n}return Object(s.a)(a,[{key:"login",value:function(e){e.preventDefault(),this.props.performLogin(this.state.username,this.state.editPassword,this)}},{key:"componentDidMount",value:function(){document.title="Login",this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"componentDidUpdate",value:function(){console.debug("Login update"),console.debug("logged in : ",this.props.loginStatus),console.debug("logged user : ",this.getLoggedUser()),this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"Login",style:{marginTop:"20px"}},i.a.createElement("form",{name:"login",onSubmit:function(t){e.login(t)},method:"POST",className:"form-signin"},i.a.createElement("div",{className:"text-center"},i.a.createElement("h2",null,i.a.createElement("i",{className:"fas fa-user-circle"})),i.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Please sign in")),i.a.createElement(Je,{value:this.state.username,onChange:this.updateCredentialProperty}),i.a.createElement(Ke,{value:this.state.editPassword,onChange:this.updateCredentialProperty}),this.state.loading?i.a.createElement(We,null):i.a.createElement(r.Fragment,null,i.a.createElement("button",{className:"btn text-light",style:{marginRight:"5px",backgroundColor:"rgb(9,26,78)"},type:"submit"},"Sign in"),i.a.createElement(Ve,{className:"btn btn-light border border-dark ",to:"register",children:"Register"})),i.a.createElement("input",{name:"transport_type",type:"hidden",value:"rest"})))}}]),a}(Me),Ke=function(e){var t=e.value,a=e.onChange;return i.a.createElement(r.Fragment,null,i.a.createElement("label",{className:"sr-only"},"Password"),i.a.createElement("input",{name:"editPassword",value:t,onChange:a,type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}))},Je=function(e){var t=e.value,a=e.onChange;return i.a.createElement(r.Fragment,null,i.a.createElement("label",{className:"sr-only"},"Username"),i.a.createElement("input",{name:"username",value:t,onChange:a,type:"text",id:"username",className:"form-control",placeholder:"Username",required:!0,autoFocus:!0}))},Ze=Object(p.f)(Object(je.b)(ke,(function(e){return{performLogin:function(t,a,n){return e(function(e,t,a){return a.startLoading(),{type:"do_login",payload:{},meta:{type:"do_login",url:Ee().concat("login?username="+e+"&password="+t+"&transport_type=rest"),app:a}}}(t,a,n))}}}))(Ge)),$e=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(m.a)(this,a),(r=t.call(this,e,i)).title="",r.title=n,r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.authenticated&&this.validateLoginStatus(),document.title=this.title}}]),a}(Me),et=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,"Dashboard",!0)}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this.getLoggedUser();return t?i.a.createElement("div",{className:" section-body container-fluid"},i.a.createElement("h2",null,"Dashboard"),i.a.createElement("div",{className:"alert alert-info"},"Welcome, ",i.a.createElement("strong",null,t.displayName,"  "),i.a.createElement("p",null),i.a.createElement("p",{className:"badge badge-dark"},null===(e=t.role)||void 0===e?void 0:e.toLowerCase().split("_")[1]))):null}}]),a}($e),tt=Object(p.f)(Object(je.b)(ke)(et)),at=a(10),nt=a(9),rt=a(23),it=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return i.a.createElement("a",Object.assign({style:this.props.style},this.props.attributes,{onClick:this.props.onClick,className:t}),this.props.iconClassName?i.a.createElement("span",{style:this.props.children?{marginRight:"5px"}:{}},i.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(r.Component),ot=function e(){Object(m.a)(this,e),this.show=!0},lt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=new ot,n.hideModal=function(){n.setState({show:!1})},n.showModal=function(){n.setState({show:!0})},n}return Object(s.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.title)&&void 0!==e?e:"Title";if(1==this.props.toggleable&&0==this.state.show)return i.a.createElement(it,{style:{marginBottom:"10px"},onClick:this.showModal,iconClassName:"fas fa-angle-down"},"Show ",t);var a=function(e){e.style,e.show,e.footerContent,e.toggleable;return Object(rt.a)(e,["style","show","footerContent","toggleable"])}(this.props);return i.a.createElement("div",Object.assign({},a,{className:"modal-content ",style:Object(f.a)(Object(f.a)({},a.style),{},{marginBottom:"10px"})}),i.a.createElement("div",{className:"modal-header"},i.a.createElement("h5",{className:"modal-title"},t),this.props.toggleable?i.a.createElement("button",{type:"button",className:"btn btn-sm",onClick:this.hideModal,"aria-label":"Close"},i.a.createElement("span",{"aria-hidden":"true"},i.a.createElement("i",{className:"fas fa-times"}))):null),i.a.createElement("div",{className:"modal-body"},this.props.children),this.props.footerContent||1==this.props.showFooter?i.a.createElement("div",{className:"modal-footer"},this.props.footerContent):null)}}]),a}(r.Component),st=function e(){Object(m.a)(this,e),this.limit=5,this.page=0,this.orderType=void 0,this.orderBy=void 0,this.contains=void 0,this.exacts=void 0,this.day=void 0,this.year=void 0,this.month=void 0,this.module=void 0,this.fieldsFilter=void 0,this.monthTo=void 0,this.yearTo=void 0,this.maxValue=void 0,this.availabilityCheck=void 0,this.useExistingFilterPage=!1};!function(e){e.FIELD_TYPE_TEXT="FIELD_TYPE_TEXT",e.FIELD_TYPE_IMAGE="FIELD_TYPE_IMAGE",e.FIELD_TYPE_CURRENCY="FIELD_TYPE_CURRENCY",e.FIELD_TYPE_NUMBER="FIELD_TYPE_NUMBER",e.FIELD_TYPE_HIDDEN="FIELD_TYPE_HIDDEN",e.FIELD_TYPE_COLOR="FIELD_TYPE_COLOR",e.FIELD_TYPE_CHECKBOX="FIELD_TYPE_CHECKBOX",e.FIELD_TYPE_FIXED_LIST="FIELD_TYPE_FIXED_LIST",e.FIELD_TYPE_DYNAMIC_LIST="FIELD_TYPE_DYNAMIC_LIST",e.FIELD_TYPE_TEXTAREA="FIELD_TYPE_TEXTAREA",e.FIELD_TYPE_PLAIN_LIST="FIELD_TYPE_PLAIN_LIST",e.FIELD_TYPE_DATE="FIELD_TYPE_DATE",e.FIELD_TYPE_TEXTEDITOR="FIELD_TYPE_TEXTEDITOR",e.FIELD_TYPE_DATETIME="FIELD_TYPE_DATETIME",e.FIELD_TYPE_DOCUMENT="FIELD_TYPE_DOCUMENT"}(xe||(xe={}));var ct=function(){function e(){Object(m.a)(this,e),this.groupNames=void 0,this.entityName=void 0,this.alias=void 0,this.fieldNames=void 0,this.idField=void 0,this.detailFieldName=void 0,this.formInputColumn=void 0,this.editable=!0,this.creatable=!0,this.elements=new Array,this.fieldNameList=void 0,this.withProgressWhenUpdated=!1}return Object(s.a)(e,null,[{key:"getRecordId",value:function(e,t){for(var a=t.elements,n=0;n<a.length;n++){var r=a[n];if(r.identity)return e[r.id]}return null}}]),e}();ct.getEntityElement=function(e,t){for(var a=0;a<e.elements.length;a++){var n=e.elements[a];if(n.id==t)return n}},ct.getHeaderLabels=function(e){var t=new Array;if(void 0==e.elements)return t;for(var a=e.elements,n=0;n<a.length;n++){var r=a[n],i={label:r.labelName,value:r.id,isDate:"date"==r.type,filterable:r.filterable};t.push(i)}return t},ct.hasTextEditorField=function(e){for(var t=0;t<e.length;t++)if(e[t].fieldType==xe.FIELD_TYPE_TEXTEDITOR)return!0;return!1};a(77);var ut=function(){function e(){Object(m.a)(this,e)}return Object(s.a)(e,null,[{key:"parseValues",value:function(e,t){for(var a=new Array,n=t.elements,r=0;r<n.length;r++){var o=n[r],l=o.id,s=e[l];if(null!=s){switch(o.fieldType){case xe.FIELD_TYPE_DATE:s=new Date(s).toDateString();break;case xe.FIELD_TYPE_DATETIME:s=new Date(s).toLocaleString();break;case xe.FIELD_TYPE_IMAGE:var c=new String(s).split("~")[0];s=i.a.createElement("img",{src:ye()+c,width:"50",height:"50"});break;case xe.FIELD_TYPE_COLOR:s=i.a.createElement("strong",{style:{color:s}},s);break;case xe.FIELD_TYPE_NUMBER:s=C(s);break;case xe.FIELD_TYPE_TEXTEDITOR:s=i.a.createElement("div",{dangerouslySetInnerHTML:{__html:new String(s).length>100?new String(s).substring(0,100)+"...":s}});break;case xe.FIELD_TYPE_CHECKBOX:s=1==s?i.a.createElement("i",null,"true"):i.a.createElement("i",null,"false");break;case xe.FIELD_TYPE_DOCUMENT:var u=new String(s).substring(0,20);s=""==u?"-":i.a.createElement("a",{target:"_blank",href:Ce()+s},i.a.createElement("i",{className:"far fa-file",style:{marginRight:5}}),u);break;case xe.FIELD_TYPE_FIXED_LIST:case xe.FIELD_TYPE_DYNAMIC_LIST:default:var d;if(o.optionItemName&&""!=o.optionItemName)s=e[l][null!==(d=o.optionItemName)&&void 0!==d?d:"id"];else s=e[l]}a.push(s)}else a.push(s)}return a}}]),e}(),dt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=mt(this.props.limit,this.props.totalData,this.props.activePage);if(0==t.length)return null;var a=t[t.length-1],n=this.props.activePage+1>=a?0:this.props.activePage+1,r=this.props.activePage-1<0?a-1:this.props.activePage-1;return i.a.createElement("div",null,i.a.createElement("nav",{"aria-label":"Page navigation example"},i.a.createElement("ul",{className:"pagination"},i.a.createElement("li",{className:"page-item"},i.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(r)}},"Previous")),t.map((function(t,a){return i.a.createElement("li",{key:"NAV-"+y(),className:"page-item "+(t-1==e.props.activePage?"active":"")},i.a.createElement("a",{className:"page-link ",onClick:function(a){return e.props.onClick(t-1)}},t))})),i.a.createElement("li",{className:"page-item"},i.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(n)}},"Next")))))}}]),a}(r.Component),mt=function(e,t,a){var n=[],r=Math.ceil(t/e),i=a-1,o=a+3;r>1&&n.push(1);for(var l=i;l<=o;l++)l>1&&l<=r&&n.push(l);return o<r&&n.push(r),n},pt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).prepopulateForm=function(){},n.getEntityElement=function(){return n.props.entityElement},n.getRequiredAttr=function(){return{required:1==n.getEntityElement().required}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.prepopulateForm()}}]),a}(Me),ft=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={singlePreviewData:void 0,showInputFile:!1},n.ref=i.a.createRef(),n.changeSingleImageData=function(e){var t=Object(c.a)(n);Re(e.target).then((function(e){t.setState({singlePreviewData:e})}))},n.removeImage=function(e){var t=Object(c.a)(n);n.showConfirmationDanger("Remove image?").then((function(e){e&&t.doRemoveImage()}))},n.doRemoveImage=function(){n.ref.current&&(n.ref.current.value=null),n.setState({singlePreviewData:void 0,showInputFile:!1})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e){var t=ye()+e;n.setState({singlePreviewData:t,showInputFile:!0})}}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return i.a.createElement(i.a.Fragment,null,this.state.showInputFile?i.a.createElement("input",{ref:this.ref,onChange:this.changeSingleImageData,type:"file",accept:"image/*",className:"form-control"}):i.a.createElement(r.Fragment,null,i.a.createElement("p",null),i.a.createElement(it,{onClick:function(t){return e.setState({showInputFile:!0})},iconClassName:"fas fa-plus",className:"btn btn-info btn-sm"},"Add Image"),i.a.createElement("input",{type:"hidden",name:t.id,value:"NULLED"})),i.a.createElement("input",{value:this.state.singlePreviewData,type:"hidden",name:t.id}),i.a.createElement(ht,{imageData:this.state.singlePreviewData}),i.a.createElement(it,{show:void 0!=this.state.singlePreviewData,onClick:this.removeImage,iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove"))}}]),a}(pt),ht=function(e){return 0!=e.show&&e.imageData?i.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},vt=Object(p.f)(Object(je.b)(ke)(ft)),gt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={previewData:new Map,inputElements:[1]},n.ref=i.a.createRef(),n.setImageData=function(e,t){var a=Object(c.a)(n);Re(e.target).then((function(e){var n=a.state.previewData;n.set(t,e),a.setState({previewData:n})}))},n.addInputElement=function(e){var t=n.state.inputElements;0==t.length?t.push(1):t.push(t[t.length-1]+1),n.setState({inputElements:t})},n.removeInputElement=function(e){var t=Object(c.a)(n);n.showConfirmationDanger("Delete image?").then((function(a){a&&t.doRemoveInputElement(e)}))},n.doRemoveInputElement=function(e){for(var t=n.state.previewData,a=n.state.inputElements,r=0;r<a.length;r++){a[r]==e&&(a.splice(r,1),t.delete(e))}n.setState({inputElements:a,previewData:t})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e&&""!=new String(e).trim()){for(var t=n.state.previewData,a=new String(e).split("~"),r=new Array,i=0;i<a.length;i++){var o=a[i];t.set(i,o),r.push(i)}n.setState({previewData:t,inputElements:r})}}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return i.a.createElement(i.a.Fragment,null,this.state.inputElements.map((function(a){var n=e.state.previewData.get(a),o=void 0==n||""==new String(n).trim(),l=!o&&bt(n);return i.a.createElement(r.Fragment,{key:"IMG"+a+t.id},o?i.a.createElement("input",{onChange:function(t){return e.setImageData(t,a)},type:"file",accept:"image/*",name:t.id,className:"form-control"}):null,l?i.a.createElement("div",null,i.a.createElement("input",{value:n,type:"hidden",name:t.id}),i.a.createElement(Et,{imageData:n})):o?null:i.a.createElement("div",null,i.a.createElement("input",{value:n,type:"hidden",name:t.id,className:"form-control"}),i.a.createElement(Et,{imageData:ye()+n}),i.a.createElement("p",{className:"badge badge-warning"},n)),i.a.createElement(it,{show:void 0!=e.state.previewData,onClick:function(t){return e.removeInputElement(a)},iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove ",a))})),i.a.createElement("p",null),i.a.createElement(it,{iconClassName:"fas fa-plus",onClick:this.addInputElement},"Add"))}}]),a}(pt),bt=function(e){return e&&e.startsWith("data:image")},Et=function(e){return 0!=e.show&&e.imageData?i.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},yt=Object(p.f)(Object(je.b)(ke)(gt)),Ct=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state={inputList:[],singlePreviewData:void 0},n.ref=i.a.createRef(),n.inputListLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error("Not found");n.setState({inputList:e.entities}),n.prepopulateForm()},n.loadInputList=function(){var e=n.getEntityElement().entityReferenceClass;n.commonAjax(n.masterDataService.loadAllEntities,n.inputListLoaded,n.showCommonErrorAlert,e)},n.isNotReady=function(){return 0==n.state.inputList.length},n.validateInputType=function(){console.debug("validateInputType"),n.isNotReady()&&n.loadInputList()},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];if(t){var a;if(0!=n.state.inputList.length){var r=n.getEntityElement().optionValueName;r&&(a=t[r])&&(n.ref.current.value=a)}}}},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.validateInputType()}},{key:"componentDidMount",value:function(){this.validateInputType(),this.prepopulateForm()}},{key:"render",value:function(){var e=this.getEntityElement();if(this.isNotReady())return i.a.createElement("div",{className:"form-group"},"Loading...");var t=this.state.inputList;return i.a.createElement("select",{ref:this.ref,className:"form-control",name:e.id},t.map((function(t){var a=e.optionValueName,n=e.optionItemName;return n&&a?i.a.createElement("option",{key:"fid-"+y()+"-",value:t[a]},t[n]):null})))}}]),a}(pt),Nt=Object(p.f)(Object(je.b)(ke)(Ct)),wt=(a(78),function e(){Object(m.a)(this,e),this.editMode=!1,this.fieldValue="",this.updated=!1}),St=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state=new wt,n.contentRef=i.a.createRef(),n.formatDoc=function(e,t){var a=n.contentRef.current;if(a){if(console.debug("commmand: ",e),n.validateMode()){var r=document.execCommand(e,!1,t);console.debug("EXECUTED: ",r," editable: ",a.contentEditable),a.focus()}}else console.debug("oDOc is missing")},n.validateMode=function(){return!n.state.editMode||(alert('Uncheck "Show HTML".'),n.contentRef.current&&n.contentRef.current.focus(),!1)},n.setValue=function(e){n.contentRef.current&&n.setState({fieldValue:n.contentRef.current.innerHTML,updated:!0})},n.setDocMode=function(e){var t=n.contentRef.current;if(t){var a;if(e){a=document.createTextNode(t.innerHTML),t.innerHTML="";var r=document.createElement("pre");t.contentEditable="false",r.id="sourceText",r.contentEditable="true",r.appendChild(a),t.appendChild(r)}else document.all?t.innerHTML=t.innerText:((a=document.createRange()).selectNodeContents(t.firstChild),t.innerHTML=a.toString()),t.contentEditable="true";t.focus()}},n.printDoc=function(){n.validateMode()},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.contentRef.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&(n.contentRef.current.innerHTML=t,n.setState({fieldValue:t,updated:!0}))}},n.setEditMode=function(e){n.setDocMode(e),n.setState({editMode:e})},n.paleteCommand=function(e){var t=e.target,a=t.dataset.command,r=t.dataset.value;"clean"==a?n.clean():n.formatDoc(a,r)},n.clean=function(){var e=Object(c.a)(n);n.showConfirmationDanger("Clean content?").then((function(t){t&&e.contentRef.current&&(e.contentRef.current.innerHTML="")}))},n.contentOnChange=function(e){n.setState({updated:!1})},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){console.debug("component updated")}},{key:"render",value:function(){var e=this,t=this.getEntityElement();return i.a.createElement("div",null,i.a.createElement("input",{type:"hidden",value:this.state.fieldValue,name:t.id}),i.a.createElement("div",{id:"toolBar1",className:"input-group"},i.a.createElement(Dt,{onChange:this.formatDoc}),i.a.createElement(It,{onChange:this.formatDoc}),i.a.createElement(Ot,{onChange:this.formatDoc}),i.a.createElement(kt,{onChange:this.formatDoc}),i.a.createElement(jt,{onChange:this.formatDoc})),i.a.createElement("div",{id:"toolBar2"},i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"clean",className:"palete fas fa-broom"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},className:"palete fas fa-print "}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"undo",className:"palete fas fa-undo"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"redo",className:"palete fas fa-redo"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"removeFormat",className:"palete fas fa-times"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"bold",className:"palete fas fa-bold"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"italic",className:"palete fas fa-italic"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"underline",className:"palete fas fa-underline"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifyleft",className:"palete fas fa-align-left"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifycenter",className:"palete fas fa-align-center"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifyright",className:"palete fas fa-align-right"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"insertorderedlist",className:"palete fas fa-list-ol"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"insertonorderedlist",className:"palete fas fa-list-ul"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"formatblock","data-value":"blockquote",className:"palete fas fa-quote-left"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"outdent",className:"palete"},"+ Indentation"),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"indent",className:"palete"},"- Indentation"),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},className:"palete fas fa-link",onClick:function(t){var a=prompt("Write the URL here","http://");a&&""!=a&&"http://"!=a&&e.formatDoc("createlink",a)}}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"cut",className:"palete fas fa-cut"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"copy",className:"palete fas fa-copy"}),i.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"paste",className:"palete fas fa-paste"})),i.a.createElement("div",{onInput:this.contentOnChange,className:"container-fluid",ref:this.contentRef,id:"textBox",contentEditable:"true"},i.a.createElement("p",null,"Fill content")),i.a.createElement("p",null),i.a.createElement(Ve,{show:0==this.state.updated,style:{marginRight:"5px"},iconClassName:"fas fa-exclamation-circle",className:"btn btn-warning btn-sm",onClick:this.setValue},"Update Content"),i.a.createElement(Ve,{show:1==this.state.updated,style:{marginRight:"5px"},iconClassName:"fas fa-check",className:"btn btn-primary btn-sm"},"Content Updated"),i.a.createElement(Ve,{className:"btn btn-secondary btn-sm",attributes:{onMouseDown:function(e){return e.preventDefault()}},onClick:function(t){return e.setEditMode(!1)},show:1==this.state.editMode},"Hide Html"),i.a.createElement(Ve,{className:"btn btn-secondary btn-sm",attributes:{onMouseDown:function(e){return e.preventDefault()}},onClick:function(t){return e.setEditMode(!0)},show:0==this.state.editMode},"Show Html"))}}]),a}(pt),Ot=function(e){return i.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("fontsize",a.value),a.value="-"}},i.a.createElement("option",{value:"-",className:"heading",selected:!0},"- size -"),i.a.createElement("option",{value:"1"},"Very small"),i.a.createElement("option",{value:"2"},"A bit small"),i.a.createElement("option",{value:"3"},"Normal"),i.a.createElement("option",{value:"4"},"Medium-large"),i.a.createElement("option",{value:"5"},"Big"),i.a.createElement("option",{value:"6"},"Very big"),i.a.createElement("option",{value:"7"},"Maximum"))},jt=function(e){return i.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("backcolor",a.value),a.value="-"}},i.a.createElement("option",{value:"-",className:"heading",selected:!0},"- background -"),i.a.createElement("option",{value:"red"},"Red"),i.a.createElement("option",{value:"green"},"Green"),i.a.createElement("option",{value:"black"},"Black"))},kt=function(e){return i.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("forecolor",a.value),a.value="-"}},i.a.createElement("option",{className:"heading",value:"-",selected:!0},"- color -"),i.a.createElement("option",{value:"red"},"Red"),i.a.createElement("option",{value:"blue"},"Blue"),i.a.createElement("option",{value:"green"},"Green"),i.a.createElement("option",{value:"black"},"Black"))},Dt=function(e){return i.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("formatblock",a.value),a.value="-"}},i.a.createElement("option",{value:"-",selected:!0},"- formatting -"),i.a.createElement("option",{value:"h1"},"Title 1 <h1>"),i.a.createElement("option",{value:"h2"},"Title 2 <h2>"),i.a.createElement("option",{value:"h3"},"Title 3 <h3>"),i.a.createElement("option",{value:"h4"},"Title 4 <h4>"),i.a.createElement("option",{value:"h5"},"Title 5 <h5>"),i.a.createElement("option",{value:"h6"},"Subtitle <h6>"),i.a.createElement("option",{value:"p"},"Paragraph <p>"),i.a.createElement("option",{value:"pre"},"Preformatted <pre>"))},It=function(e){return i.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("fontname",a.value),a.value="-"}},i.a.createElement("option",{value:"-",className:"heading",selected:!0},"- font -"),i.a.createElement("option",{value:"Arial"},"Arial"),i.a.createElement("option",{value:"Arial Black"},"Arial Black"),i.a.createElement("option",{value:"Courier New"},"Courier New"),i.a.createElement("option",{value:"Times New Roman"},"Times New Roman"))},Lt=Object(p.f)(Object(je.b)(ke)(St)),qt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={checked:!1},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({checked:1==t})}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement(),a=this.state.checked;return i.a.createElement(r.Fragment,null,i.a.createElement("input",{type:"hidden",name:t.id,value:a?"true":"false"}),i.a.createElement("div",{className:"btn-group"},i.a.createElement("a",{className:a?"btn btn-dark":"btn btn-light",onClick:function(t){return e.setState({checked:!0})}},"Yes"),i.a.createElement("a",{className:a?"btn btn-light":"btn btn-dark",onClick:function(t){return e.setState({checked:!1})}},"No")))}}]),a}(pt);var Pt=function(e){return e>=10?e.toString():"0"+e},At=function(e){var t,a=0,n=0,r=e;return r>=3600&&(a=r/3600,r%=3600),r>=60&&(n=r/60,r%=60),t=r,Pt(a)+":"+Pt(Math.floor(n))+":"+Pt(t)},Tt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).ref=i.a.createRef(),n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement(),t=e.id,a=n.props.recordToEdit[t];if(void 0!=a){var r,i=void 0;switch(e.fieldType){case xe.FIELD_TYPE_DATE:var o=new Date(a);if(!o)break;i=[(r=o).getFullYear(),Pt(r.getMonth()+1),Pt(r.getDate())].join("-");break;case xe.FIELD_TYPE_NUMBER:i=new String(a);break;default:i=a}if(i)if(e.optionItemName&&""!=e.optionItemName){var l,s=i;n.ref.current.value=s[null!==(l=e.optionItemName)&&void 0!==l?l:"id"]}else n.ref.current.value=i}else console.debug(t," is undefined",n.props.recordToEdit,n.props.recordToEdit[t])}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=this.getRequiredAttr();if(1==e.identity||0==e.editable)return i.a.createElement("input",Object.assign({},t,{value:"Generated",ref:this.ref,className:"form-control",name:e.id,disabled:!0}));var a=i.a.createElement("p",null,e.fieldType);switch(e.fieldType){case xe.FIELD_TYPE_PLAIN_LIST:a=i.a.createElement("select",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}),e.plainListValues.map((function(t,a){return i.a.createElement("option",{key:"s-"+e.id+"-o-"+a,value:t},t)})));break;case xe.FIELD_TYPE_TEXTAREA:a=i.a.createElement("textarea",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}));break;default:a=i.a.createElement("input",Object.assign({type:e.type},t,{ref:this.ref,className:"form-control",name:e.id}))}return a}}]),a}(pt),zt=function e(){Object(m.a)(this,e),this.inputList=[],this.searchValue=""},Rt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state=new zt,n.ref=i.a.createRef(),n.inputRef=i.a.createRef(),n.inputListLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error(n.getEntityElement().labelName+" Not found");n.setState({inputList:e.entities},(function(){n.inputRef.current&&n.inputRef.current.focus()}))},n.loadInputList=function(){var e,t=n.getEntityElement(),a=t.entityReferenceClass,r=t.optionItemName;if(r){var i={entity:a,filter:{limit:0,page:0,fieldsFilter:Object(T.a)({},r,null===(e=n.inputRef.current)||void 0===e?void 0:e.innerHTML)}};n.commonAjax(n.masterDataService.loadEntities,n.inputListLoaded,n.showCommonErrorAlert,i)}},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({inputList:[t],searchValue:""},(function(){var e,a=n.getEntityElement().optionValueName;a&&(e=t[a])&&(n.ref.current.value=e)}))}},n.search=function(e){if(13==e.keyCode){if(n.inputRef.current){var t=n.inputRef.current;t.innerHTML=new String(t.innerText).trim()}return e.preventDefault(),n.loadInputList(),!1}},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=e.optionValueName,a=e.optionItemName,n=this.state.inputList;console.debug("options: ",n);var r=e.entityReferenceClass+" "+a;return i.a.createElement("div",null,i.a.createElement("div",{className:"input-group mb-3"},i.a.createElement("div",{className:"input-group-append"},i.a.createElement("span",{className:"input-group-text"},r)),i.a.createElement("div",{onKeyDown:this.search,ref:this.inputRef,contentEditable:!0,className:"form-control"}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement(Ve,{onClick:this.loadInputList,className:"btn btn-secondary",children:"Search"}),i.a.createElement(Ve,{show:void 0!=this.props.recordToEdit,onClick:this.prepopulateForm,iconClassName:"fas fa-sync-alt",className:"btn btn-secondary"}))),i.a.createElement("select",Object.assign({},this.getRequiredAttr(),{ref:this.ref,className:"form-control",name:e.id}),n.map((function(e){return a&&t?i.a.createElement("option",{key:"fid-"+y()+"-",value:e[t]},e[a]):null}))))}}]),a}(pt),xt=Object(p.f)(Object(je.b)(ke)(Rt)),Ft=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){if(0==this.props.show)return null;var e="vertical"==this.props.orientation?"vertical":"horizontal";return i.a.createElement("div",{className:"form-group "+this.props.className+" "+("vertical"==e?"":"row")},i.a.createElement("label",{className:"vertical"==e?"":"col-sm-3"},i.a.createElement("strong",null,this.props.label?this.props.label:null)),i.a.createElement("div",{className:"vertical"==e?"":"col-sm-9"},this.props.children))}}]),a}(r.Component),Mt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={attachmentInfo:void 0,showInputFile:!1},n.ref=i.a.createRef(),n.changeFile=function(e){ze(e.target).then((function(e){n.setState({attachmentInfo:e})}))},n.remove=function(e){var t=Object(c.a)(n);n.showConfirmationDanger("Remove Document?").then((function(e){e&&t.doRemove()}))},n.doRemove=function(){n.ref.current&&(n.ref.current.value=null),n.setState({singlePreviewData:void 0,showInputFile:!1})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e){var t=k.instance(e,e);n.setState({attachmentInfo:t,showInputFile:!0})}}},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return i.a.createElement(i.a.Fragment,null,this.state.showInputFile?i.a.createElement("input",{ref:this.ref,onChange:this.changeFile,type:"file",className:"form-control"}):i.a.createElement(r.Fragment,null,i.a.createElement("p",null),i.a.createElement(it,{onClick:function(t){return e.setState({showInputFile:!0})},iconClassName:"fas fa-plus",className:"btn btn-info btn-sm"},"Add Document"),i.a.createElement("input",{type:"hidden",name:t.id,value:"NULLED"})),this.state.attachmentInfo?i.a.createElement(r.Fragment,null,i.a.createElement("input",{value:this.state.attachmentInfo.url,type:"hidden",name:t.id}),i.a.createElement("input",{value:this.state.attachmentInfo.name,type:"hidden",name:t.id+"-attachment-info"})):null,i.a.createElement(_t,{data:this.state.attachmentInfo}),i.a.createElement(it,{show:void 0!=this.state.attachmentInfo,onClick:this.remove,iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove"))}}]),a}(pt),_t=function(e){if(!e.data)return null;var t=e.data.url?e.data.url:Ce()+e.data.name;return i.a.createElement("a",{href:t,className:"btn btn-outline-dark btn-sm",target:"_blank"},e.data.name)},Ut=Object(p.f)(Object(je.b)(ke)(Mt)),Qt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).getEntityElement=function(){return n.props.entityElement},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=i.a.createElement("p",null,e.fieldType);switch(e.fieldType){case xe.FIELD_TYPE_DYNAMIC_LIST:t=i.a.createElement(xt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case xe.FIELD_TYPE_FIXED_LIST:t=i.a.createElement(Nt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case xe.FIELD_TYPE_TEXTEDITOR:t=i.a.createElement(Lt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case xe.FIELD_TYPE_IMAGE:t=e.multiple?i.a.createElement(yt,{recordToEdit:this.props.recordToEdit,entityElement:e}):i.a.createElement(vt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case xe.FIELD_TYPE_DOCUMENT:t=i.a.createElement(Ut,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case xe.FIELD_TYPE_CHECKBOX:t=i.a.createElement(qt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case xe.FIELD_TYPE_PLAIN_LIST:case xe.FIELD_TYPE_TEXTAREA:default:t=i.a.createElement(Tt,{recordToEdit:this.props.recordToEdit,entityElement:e})}var a=i.a.createElement("span",null,e.labelName,e.editable&&e.required?i.a.createElement("i",{className:"text-danger"},"*"):null);return i.a.createElement(Ft,{orientation:"vertical",label:a},t)}}]),a}(Me),Bt=Object(p.f)(Object(je.b)(ke)(Qt)),Yt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.editMode=!1,n.recordToEdit=void 0,n.formRef=i.a.createRef(),n.onSubmit=function(e){if(e.preventDefault(),n.formRef.current){var t=n.formRef.current,a=Object(c.a)(n);n.showConfirmation("Save data?").then((function(e){e&&a.submit(t)}))}},n.submit=function(e){var t=new FormData(e),a={},r=new Array,i=[],o=!1;t.forEach((function(e,r){console.debug("Form data ",r),a[r]||(a[r]=new Array);var l=n.getEntityElement(r);if(!l)return!1;switch(l.fieldType){case xe.FIELD_TYPE_CHECKBOX:a[r].push("true"==e);break;case xe.FIELD_TYPE_DYNAMIC_LIST:case xe.FIELD_TYPE_FIXED_LIST:var s=l.optionValueName;s&&a[r].push(Object(T.a)({},s,e));break;case xe.FIELD_TYPE_DOCUMENT:if(console.debug(r," is DOCUMENT"),"NULLED"==e)console.debug("NULLED VALUE ADDED: ",r),i.push(r);else{var c=t.get(r+"-attachment-info");if(c&&new String(e).startsWith("data:")){o=!0;var u=k.instance(c,new String(e).toString());a.attachmentInfo=[u],a[r].push(c)}else a[r].push(e)}break;case xe.FIELD_TYPE_IMAGE:console.debug(r," is IMAGE"),"NULLED"==e?i.push(r):(new String(e).startsWith("data:image")&&(o=!0),a[r].push(e));break;default:a[r].push(e)}return!0})),Promise.all(r).then((function(e){var t=n.generateRequestPayload(a,i);console.debug("Record object to save: ",t,"realtimeProgress: ",o),n.ajaxSubmit(t,1==o)}))},n.generateRequestPayload=function(e,t){var a=n.editMode&&n.recordToEdit?Object(f.a)(Object(f.a)({},n.recordToEdit),{},{nulledFields:t}):{nulledFields:new Array};for(var r in e){var i=e[r];console.debug(r," length: ",i.length),1==i.length?a[r]=i[0]:i.length>1&&(a[r]=i.join("~"))}return a.nulledFields=t,a},n.ajaxSubmit=function(e,t){1==n.getEntityProperty().withProgressWhenUpdated||t?n.commonAjaxWithProgress(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode):n.commonAjax(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode)},n.recordSaved=function(e){n.showInfo("Record saved")},n.masterDataService=n.getServices().masterDataService,e.recordToEdit&&(n.editMode=!0,n.recordToEdit=e.recordToEdit),n}return Object(s.a)(a,[{key:"getEntityProperty",value:function(){return this.props.entityProperty}},{key:"componentDidUpdate",value:function(){0!=this.getEntityProperty().editable&&0!=this.getEntityProperty().creatable||this.props.onClose()}},{key:"getEntityElement",value:function(e){return ct.getEntityElement(this.getEntityProperty(),e)}},{key:"render",value:function(){var e=this.getEntityProperty(),t=this.editMode?i.a.createElement("span",{className:"badge badge-warning"},"Edit Mode"):"";return i.a.createElement("div",{id:"MasterDataForm"},i.a.createElement(it,{style:{marginBottom:"5px"},onClick:this.props.onClose,iconClassName:"fas fa-angle-left"},"Back"),i.a.createElement("form",{ref:this.formRef,onSubmit:this.onSubmit,id:"record-form"},i.a.createElement(lt,{title:i.a.createElement("span",null,e.alias," Record Form ",t),footerContent:i.a.createElement(Ht,null)},i.a.createElement(Wt,{app:this.parentApp,recordToEdit:this.recordToEdit,entityProperty:e}))))}}]),a}(Me),Ht=function(e){return i.a.createElement("div",{className:"btn-group"},i.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),i.a.createElement("input",{type:"reset",className:"btn btn-warning"}))},Wt=function(e){var t=e.entityProperty.elements,a=new Array,n=0,r=ct.hasTextEditorField(t);a.push(new Array);for(var o=0;o<t.length;o++){var l=t[o];!r&&o>0&&o%5==0&&(n++,a.push(new Array)),a[n].push(l)}return i.a.createElement("div",{className:"row"},a.map((function(t,a){return i.a.createElement("div",{key:"GROUPED_ELEMENT_"+a,className:r?"col-lg-12":"col-lg-6"},t.map((function(t){var a="form-input-for-"+e.entityProperty.entityName+"-"+t.id;return i.a.createElement(Bt,{key:a,recordToEdit:e.recordToEdit,entityElement:t})})))})))},Vt=Object(p.f)(Object(je.b)(ke)(Yt)),Xt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props;if(0==e.show)return null;var t="",a=e.entityProperty.entityName;return"quiz"!=a?"quizhistory"==a?(t="/quiz/history/"+e.record.id,i.a.createElement("div",{style:{width:"150px"}},i.a.createElement(Ve,{className:"btn btn-dark btn-sm",iconClassName:"fas fa-edit",to:t,attributes:{target:"_blank"}}),i.a.createElement(it,{onClick:e.delete,className:"btn btn-danger btn-sm",iconClassName:"fas fa-times"}))):null:(t="/quizmanagement/detail/"+e.record.id,i.a.createElement(Ve,{className:"btn btn-dark btn-sm",iconClassName:"fas fa-edit",to:t,attributes:{target:"_blank"}}))}}]),a}(r.Component),Gt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.delete=function(e){var t=Object(c.a)(n);n.showConfirmationDanger("Delete record?").then((function(e){e&&t.doDelete()}))},n.doDelete=function(){var e=n.props.record,t=n.props.entityProperty,a=ct.getRecordId(e,t);t.withProgressWhenUpdated?n.commonAjaxWithProgress(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,t.entityName,a):n.commonAjax(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,t.entityName,a)},n.getRecordById=function(){var e=n.props.record,t=n.props.entityProperty,a=ct.getRecordId(e,t);n.commonAjax(n.masterDataService.getById,n.recordLoaded,n.showCommonErrorAlert,t.entityName,a)},n.recordLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error("Record not found");n.props.showEditForm&&n.props.showEditForm(e)},n.recordDeleted=function(e){n.showInfo("Record deleted"),n.props.reload()},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.entityProperty;if(0==this.props.show)return null;var t=i.a.createElement(Xt,{delete:this.delete,record:this.props.record,entityProperty:e});return 0==e.editable?t:i.a.createElement("div",{className:"btn-group"},t,i.a.createElement(it,{onClick:this.getRecordById,iconClassName:"fas fa-edit",className:"btn btn-warning btn-sm"}),i.a.createElement(it,{onClick:this.delete,className:"btn btn-danger btn-sm",iconClassName:"fas fa-times"}))}}]),a}(Me),Kt=Object(p.f)(Object(je.b)(ke,(function(e){return{}}))(Gt)),Jt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.headerProps,a=e.fieldsFilter;return i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No"),t.map((function(t,n){var o,l,s,c,u=t.isDate,d=t.value;if(!t.filterable)return i.a.createElement("th",{key:"dth-"+n+"-"+d},i.a.createElement("p",null,t.label));var m="form-control input-filter";return i.a.createElement("th",{key:"dth-"+n+"-"+d},i.a.createElement("p",null,t.label),i.a.createElement("div",{style:{minWidth:"200px"},className:"input-group"},u?i.a.createElement(r.Fragment,null,i.a.createElement("input",{key:"filter-day-"+d,autoComplete:"off",value:null!==(o=a[d+"-day"])&&void 0!==o?o:"",onChange:e.filterOnChange,name:d+"-day",className:m,placeholder:"day"}),i.a.createElement("input",{key:"filter-month-"+d,autoComplete:"off",value:null!==(l=a[d+"-month"])&&void 0!==l?l:"",onChange:e.filterOnChange,name:d+"-month",className:m,placeholder:"month"}),i.a.createElement("input",{key:"filter-year-"+d,autoComplete:"off",value:null!==(s=a[d+"-year"])&&void 0!==s?s:"",onChange:e.filterOnChange,name:d+"-year",className:m,placeholder:"year"})):i.a.createElement("input",{key:"filter-common-"+d,autoComplete:"off",value:null!==(c=a[d])&&void 0!==c?c:"",onChange:e.filterOnChange,placeholder:t.label,className:m,name:d}),i.a.createElement("div",{className:"input-group-append btn-group"},i.a.createElement("button",{"data-ordertype":"asc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"btn btn-outline-secondary btn-sm"},i.a.createElement("i",{"data-ordertype":"asc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"fas fa-angle-up"})),i.a.createElement("button",{"data-ordertype":"desc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"btn btn-outline-secondary btn-sm"},i.a.createElement("i",{"data-ordertype":"desc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"fas fa-angle-down"})))))})),i.a.createElement("th",null,"Action")))}}]),a}(r.Component),Zt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e;return 0==this.props.show?null:i.a.createElement("div",{style:this.props.style,className:"alert alert-danger"},null!==(e=this.props.children)&&void 0!==e?e:"Error Occured")}}]),a}(r.Component),$t=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a=this,n=this.props,r=this.props.active;return i.a.createElement("div",{className:"btn-group"},i.a.createElement(it,{className:"btn  btn-sm "+(r?"btn-dark":"btn-outline-dark"),onClick:function(e){return a.props.onClick(!0)}},null!==(e=n.yesLabel)&&void 0!==e?e:"Yes"),i.a.createElement(it,{className:"btn  btn-sm "+(0==r?"btn-dark":"btn-outline-dark"),onClick:function(e){return a.props.onClick(!1)}},null!==(t=n.noLabel)&&void 0!==t?t:"No"))}}]),a}(r.Component),ea=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.state=void 0,n.recordToEdit=void 0,n.entityProperty=void 0,n.headerProps=void 0,n.adjustFilter=function(e){var t=e.fieldsFilter;for(var a in t){var n=t[a];void 0!=n&&null!=n&&0!=new String(n).length||void 0!=e.fieldsFilter&&delete e.fieldsFilter[a]}return e},n.loadEntities=function(e){var t=Object.assign(new st,n.state.filter),a=n.entityProperty.entityName;t.page=null!==e&&void 0!==e?e:t.page;var r={entity:a,filter:n.adjustFilter(t)};n.commonAjax(n.masterDataService.loadEntities,n.entitiesLoaded,n.showCommonErrorAlert,r)},n.entitiesLoaded=function(e){n.setState({recordData:e,filter:e.filter})},n.checkDefaultData=function(){n.state.loading||n.entityProperty.entityName==n.props.entityProperty.entityName&&void 0!=n.state.recordData||(n.entityProperty=n.props.entityProperty,n.headerProps=ct.getHeaderLabels(n.props.entityProperty),n.loadEntities(0))},n.getRecordNumber=function(e){var t,a;return(null!==(t=n.state.filter.page)&&void 0!==t?t:0)*(null!==(a=n.state.filter.limit)&&void 0!==a?a:5)+e+1},n.filterFormSubmit=function(e){var t=n.state.filter.useExistingFilterPage?n.state.filter.page:0;n.loadEntities(t)},n.filterOnChange=function(e){e.preventDefault();var t=e.target,a=t.name,r=t.value,i=n.state.filter;void 0==i.fieldsFilter&&(i.fieldsFilter={}),i.fieldsFilter[a]=r,n.setState({filter:i})},n.setExactSearch=function(e){var t=n.state.filter;t.exacts=e,n.setState({filter:t})},n.filterReset=function(e){var t=n.state.filter;t.fieldsFilter={},t.limit=5,n.setState({filter:t})},n.orderButtonOnClick=function(e){var t=e.target.dataset,a=n.state.filter;a.orderBy=t.orderby,a.orderType=t.ordertype,n.setState({filter:a}),n.loadEntities(0)},n.showEditForm=function(e){e.entities&&(n.recordToEdit=e.entities[0],n.setState({showForm:!0}))},n.showCreateForm=function(e){n.recordToEdit=void 0,n.setState({showForm:!0})},n.updateFilterPage=function(e){var t=n.state.filter;t.useExistingFilterPage=!0,t.page=parseInt(e)-1,n.setState({filter:t})},n.updateFilterLimit=function(e){var t=n.state.filter;t.limit=parseInt(e),n.setState({filter:t})},n.printRecord=function(){n.props.printRecord(n.state.filter)},n.masterDataService=n.getServices().masterDataService,n.entityProperty=n.props.entityProperty,n.headerProps=ct.getHeaderLabels(n.props.entityProperty),n.state={showForm:!1,loading:!1,filter:{limit:5,page:0,fieldsFilter:{}}},n}return Object(s.a)(a,[{key:"startLoading",value:function(){this.setState({loading:!0})}},{key:"endLoading",value:function(){this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.checkDefaultData()}},{key:"componentDidMount",value:function(){this.checkDefaultData()}},{key:"render",value:function(){var e,t,a,n,r=this;if(void 0==this.state.recordData)return i.a.createElement(We,null);var o=this.headerProps,l=1==this.state.filter.exacts,s=this.state.recordData.entities?this.state.recordData.entities:[];return void 0==o||void 0==s?i.a.createElement(Zt,null):1==this.state.showForm?i.a.createElement(Vt,{recordToEdit:this.recordToEdit,entityProperty:this.entityProperty,onClose:function(e){r.setState({showForm:!1})}}):i.a.createElement("div",{id:"MasterDataList"},i.a.createElement("div",{className:"btn-group",style:{marginBottom:"5px"}},i.a.createElement(it,{show:1==this.entityProperty.creatable&&1==this.entityProperty.editable,onClick:this.showCreateForm,iconClassName:"fas fa-plus"},"Add Record"),i.a.createElement(it,{onClick:this.printRecord,iconClassName:"fas fa-file"},"Print Record")),i.a.createElement("form",{id:"filter-form",onSubmit:function(e){e.preventDefault()}},i.a.createElement(lt,{title:"Filter",toggleable:!0},i.a.createElement("div",null,i.a.createElement("div",{className:"form-group row"},i.a.createElement("div",{className:"col-6"},i.a.createElement("input",{value:(null!==(e=this.state.filter.page)&&void 0!==e?e:0)+1,onChange:function(e){r.updateFilterPage(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"go to page"})),i.a.createElement("div",{className:"col-6"},i.a.createElement("input",{value:this.state.filter.limit,onChange:function(e){return r.updateFilterLimit(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"record per page"})),i.a.createElement("div",{className:"col-12"},i.a.createElement("p",null)),i.a.createElement("div",{className:"col-3"},i.a.createElement($t,{yesLabel:"exact",noLabel:"not exact",active:l,onClick:function(e){return r.setExactSearch(e)}})),i.a.createElement("div",{className:"col-3"},i.a.createElement(aa,{onSubmit:this.filterFormSubmit,onReset:this.filterReset}))))),i.a.createElement(dt,{limit:null!==(t=this.state.filter.limit)&&void 0!==t?t:5,totalData:null!==(a=this.state.recordData.totalData)&&void 0!==a?a:0,activePage:null!==(n=this.state.filter.page)&&void 0!==n?n:0,onClick:this.loadEntities}),i.a.createElement(lt,{title:"Data List"},this.state.loading?i.a.createElement(ta,{loading:this.state.loading}):null,i.a.createElement("div",{className:"container-fluid",style:{overflow:"scroll"}},i.a.createElement("table",{className:"table"},i.a.createElement(Jt,{fieldsFilter:this.state.filter.fieldsFilter,orderButtonOnClick:this.orderButtonOnClick,filterOnChange:this.filterOnChange,headerProps:o}),i.a.createElement("tbody",null,s.map((function(e,t){var a=r.getRecordNumber(t),n=ut.parseValues(e,r.props.entityProperty);return i.a.createElement("tr",{key:"tr-result-"+t},i.a.createElement("td",null,a),n.map((function(e){try{return i.a.createElement("td",{key:"td-u-"+y()},e)}catch(t){return i.a.createElement("td",{key:"td-u-"+y()},"-")}})),i.a.createElement("td",null,i.a.createElement(Kt,{showEditForm:r.showEditForm,record:e,entityProperty:r.entityProperty,reload:function(){return r.loadEntities(void 0)}})))}))))))))}}]),a}(Me),ta=function(e){var t=e.loading;return i.a.createElement("div",{style:{width:"100%",height:"100%",paddingTop:"2rem",backgroundColor:"rgb(240,240,240,0.5)",marginLeft:"-1rem",marginTop:"-1rem",position:"absolute"}},i.a.createElement(We,{show:t}))},aa=function(e){return i.a.createElement("div",{className:"btn-group"},i.a.createElement("button",{onClick:e.onSubmit,className:"btn btn-dark btn-sm"},i.a.createElement("span",{className:"icon"},i.a.createElement("i",{className:"fas fa-play-circle"})),"Apply Filter"),i.a.createElement("button",{onClick:e.onReset,type:"reset",className:"btn btn-dark btn-sm"},i.a.createElement("span",{className:"icon"},i.a.createElement("i",{className:"fas fa-sync-alt"})),"Reset"))},na=Object(p.f)(Object(je.b)(ke)(ea)),ra=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.code="",n.loadingEntityProperty=!1,n.entityProperty=void 0,n.entityPropertyLoaded=function(e){n.loadingEntityProperty=!1,void 0!=e.entityProperty&&(n.masterDataService.setEntityProperty(n.props.code,e.entityProperty),n.setState({entityProperty:e.entityProperty}),n.setTitle(e.entityProperty))},n.setTitle=function(e){document.title=new String(null===e||void 0===e?void 0:e.alias).toString()},n.printRecord=function(e){var t=n.state.entityProperty;t&&n.showConfirmation("Print record? ").then((function(a){if(a){var r={entity:t.entityName,filter:e};n.commonAjaxWithProgress(n.masterDataService.generateReport,n.reportCreated,n.showCommonErrorAlert,r)}}))},n.reportCreated=function(e){n.showConfirmation("Save File "+e.name+" ?").then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.url}).click()}))},n.masterDataService=n.getServices().masterDataService,n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty()),console.debug("updated this.props.code: ",this.props.code)}},{key:"componentDidMount",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty())}},{key:"startLoading",value:function(e){1==e&&Object(at.a)(Object(nt.a)(a.prototype),"startLoading",this).call(this,e)}},{key:"loadEntityProperty",value:function(){var e=this;if(void 0!=this.code||1!=this.loadingEntityProperty){var t=this.masterDataService.getEntityProperty(this.code);if(void 0!=t)return this.loadingEntityProperty=!1,this.setState({entityProperty:t}),void this.setTitle(t);this.loadingEntityProperty=!0,this.setState({entityProperty:void 0}),this.commonAjax(this.masterDataService.loadEntityProperty,this.entityPropertyLoaded,(function(t){e.loadingEntityProperty=!1,e.showCommonErrorAlert(t)}),this.code)}}},{key:"render",value:function(){return void 0==this.state.entityProperty?i.a.createElement("div",{className:" container-fluid section-body",style:{paddingTop:"20px"}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-3 text-right"},i.a.createElement("div",{className:"spinner-border",role:"status"})),i.a.createElement("div",{className:"col-8"},i.a.createElement("h4",null,"Loading configuration")))):i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,this.state.entityProperty.alias),i.a.createElement(na,{printRecord:this.printRecord,entityProperty:this.state.entityProperty}))}}]),a}(Me),ia=Object(p.f)(Object(je.b)(ke)(ra)),oa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e,"Master Data",!0)).masterDataService=void 0,r.state={code:void 0},r.managementPropertiesLoaded=function(e){r.masterDataService.managementProperties=e.generalList?e.generalList:[],r.setSidebarMenus(),r.refresh()},r.setSidebarMenus=function(){for(var e=[],t=r.masterDataService.managementProperties,a=0;a<t.length;a++){var i=t[a];e.push({role:[n.ROLE_ADMIN],name:i.label,url:i.entityName,code:i.entityName,menuClass:i.iconClassName})}console.debug("this.props.setSidebarMenus: ",r.props.setSidebarMenus),r.props.setSidebarMenus&&r.props.setSidebarMenus(e)},r.loadManagamenetPages=function(){if(r.masterDataService.managementProperties.length>0)return r.setSidebarMenus(),void r.refresh();r.commonAjax(r.masterDataService.loadManagementProperties,r.managementPropertiesLoaded,r.showCommonErrorAlert)},r.getCode=function(){return r.props.match.params.code},r.masterDataService=r.getServices().masterDataService,r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(at.a)(Object(nt.a)(a.prototype),"componentDidMount",this).call(this),this.loadManagamenetPages()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.setSidebarMenus(),this.state.code!=this.getCode()&&this.setState({code:this.getCode()})}},{key:"render",value:function(){if(console.debug("Render master data main"),void 0!=this.getCode()&&null!=this.getCode()&&""!=this.getCode())return i.a.createElement(ia,{code:this.getCode()});if(0==this.masterDataService.managementProperties.length)return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h3",null,"Loading"));var e=this.masterDataService.managementProperties;return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Master Data Page"),i.a.createElement("div",{className:"row"},e.map((function(e){return i.a.createElement("div",{key:"mngmnt-page-item-"+e.entityName,className:"col-md-2 text-center",style:{marginBottom:"10px"}},i.a.createElement("h2",null,i.a.createElement(_e.b,{className:"btn btn-warning btn-lg",to:"/management/"+e.entityName},i.a.createElement("i",{className:e.iconClassName}))),i.a.createElement("p",null,e.label))}))))}}]),a}($e),la=Object(p.f)(Object(je.b)(ke)(oa)),sa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,!1)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Home"}},{key:"render",value:function(){var e=this.getApplicationProfile(),t=ye()+e.backgroundUrl;return i.a.createElement("div",{className:"section-body container-fluid",style:{padding:0}},i.a.createElement("div",{className:"jumbotron",style:{margin:"0px",marginTop:"20px",backgroundImage:'url("'+t+'")',backgroundSize:"cover",color:e.fontColor}},i.a.createElement("h1",{className:"display-4"},e.name),i.a.createElement("p",{className:"lead"},e.shortDescription),i.a.createElement("hr",{className:"my-4"}),i.a.createElement("p",null,e.welcomingMessage),i.a.createElement(_e.b,{className:"btn btn-primary btn-lg",to:"/about",role:"button"},"About Us")))}}]),a}(Me),ca=Object(p.f)(Object(je.b)(ke)(sa)),ua=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,"Settings",!0)}return Object(s.a)(a,[{key:"render",value:function(){var e;return i.a.createElement("div",{id:"SettingsMain",className:"section-body container-fluid"},i.a.createElement("h2",null,"Settings"),i.a.createElement("div",{className:"alert alert-info"},"Welcome, ",i.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName)))}}]),a}($e),da=Object(p.f)(Object(je.b)(ke,(function(e){return{}}))(ua)),ma=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){return i.a.createElement("div",Object.assign({},this.props.attributes,{className:"card "+this.props.className}),this.props.title?i.a.createElement("div",{className:"card-header"},this.props.title):null,i.a.createElement("div",{className:"card-body"},this.props.children),void 0!=this.props.footerContent?i.a.createElement("div",{className:"card-footer"},this.props.footerContent):null)}}]),a}(r.Component),pa=function(e){var t=e.edit,a=e.name,n=e.toggleInput,r=e.value,o=e.updateProperty,l=Object(rt.a)(e,["edit","name","toggleInput","value","updateProperty"]);return 1==t?i.a.createElement(fa,{updateProperty:o,name:a,toggleInput:n,value:r,type:l.type}):i.a.createElement(ha,{name:a,toggleInput:n,value:r,type:l.type})},fa=function(e){var t=e.name,a=e.toggleInput,n=e.value,r=e.updateProperty,o=e.type;return i.a.createElement("div",{className:"row"},i.a.createElement("p",{className:"col-md-10"},i.a.createElement("input",{type:null!==o&&void 0!==o?o:"text",name:t,onChange:r,value:n,className:"form-control"})),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(it,{attributes:{"data-name":t,"data-enabled":"false"},onClick:a,className:"btn btn-secondary btn-sm"},"cancel")))},ha=function(e){var t=e.name,a=e.toggleInput,n=e.value,r=e.type;return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-10"},i.a.createElement("p",{style:{backgroundColor:"color"==r?n:"#fff"}},"color"==r?"Sample Color":n),"color"==r?i.a.createElement("p",null,n):null),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(it,{attributes:{"data-name":t,"data-enabled":"true"},onClick:a,className:" btn btn-info btn-sm"},"edit")))},va=function(e){var t=e.name,a=e.edit,n=e.toggleInput,o=e.updateProperty;return a?i.a.createElement(r.Fragment,null,i.a.createElement("div",null,i.a.createElement(it,{attributes:{"data-name":t,"data-enabled":"false"},onClick:n,className:" btn btn-secondary btn-sm"},"cancel")),i.a.createElement("input",{onChange:o,className:"form control",accept:"image/*",type:"file",name:t})):i.a.createElement("div",null,i.a.createElement(it,{attributes:{"data-name":t,"data-enabled":"true"},onClick:n,className:" btn btn-info btn-sm"},"edit image"))},ga=function e(){var t=this;Object(m.a)(this,e),this.user=void 0,this.editFields={username:!1,displayName:!1,editPassword:!1,profileImage:!1},this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},ba=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).userService=void 0,n.state=new ga,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.user;a&&(a[t.name]=t.value,n.setState({user:a}))}},n.updateProfleImage=function(e){var t=e.target;if(null!=t){var a=Object(c.a)(n);(t.files?t.files[0].name:void 0)&&Re(t).then((function(e){a.setProfileImage(e)})).catch(console.error)}},n.setProfileImage=function(e){var t=n.state.user;t&&(t.profileImage=e,n.setState({user:t}))},n.toggleInput=function(e){var t=e.target,a=n.state.user,r=n.getLoggedUser();if(null!=t&&a&&r){var i=t.getAttribute("data-name");if(null!=i){var o="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[i]=o,o||(a[i]=r[i]),n.setState({user:a,editFields:l})}}},n.saveRecord=function(e){if(e.preventDefault(),0!=n.state.fieldChanged()){var t=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&t.doSaveRecord()}))}},n.doSaveRecord=function(){var e=n.getUserEditedData();e&&(e.profileImage?n.commonAjaxWithProgress(n.userService.updateProfile,n.profileSaved,n.showCommonErrorAlert,e):n.commonAjax(n.userService.updateProfile,n.profileSaved,n.showCommonErrorAlert,e))},n.getUserEditedData=function(){var e,t=n.state.user,a=n.state.editFields;if(t){var r=new Ne;for(var i in a){a[i]&&"profileImage"!=i&&(r[i]=t[i])}return a.profileImage&&(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))&&(r.profileImage=t.profileImage),r}},n.profileSaved=function(e){n.showInfo("Success"),n.props.setLoggedUser(e.user);var t=n.state.editFields;for(var a in t)t[a]=!1;n.setState({editFields:t})},n.userService=n.getServices().userService,n.state.user=Object.assign(new Ne,n.getLoggedUser()),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="User Profile"}},{key:"render",value:function(){var e,t=this.state.user;if(!t)return null;var a=this.state.editFields;return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"User Profile"),i.a.createElement(ma,{title:"Profile Data"},i.a.createElement("form",{onSubmit:this.saveRecord},i.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},i.a.createElement("img",{style:{marginBottom:"10px"},width:"100",height:"100",className:"rounded-circle border border-primary",src:(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))?t.profileImage:ye()+t.profileImage}),i.a.createElement(va,{name:"profileImage",edit:a.profileImage,updateProperty:this.updateProfleImage,toggleInput:this.toggleInput})),i.a.createElement(Ft,{label:"User Name"},i.a.createElement(pa,{edit:a.username,updateProperty:this.updateProfileProperty,name:"username",toggleInput:this.toggleInput,value:t.username})),i.a.createElement(Ft,{label:"Name"},i.a.createElement(pa,{edit:a.displayName,updateProperty:this.updateProfileProperty,name:"displayName",toggleInput:this.toggleInput,value:t.displayName})),i.a.createElement(Ft,{label:"Password"},i.a.createElement(pa,{edit:a.editPassword,updateProperty:this.updateProfileProperty,name:"editPassword",toggleInput:this.toggleInput,value:t.editPassword})),i.a.createElement(Ft,null,this.state.fieldChanged()?i.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save"}):null))))}}]),a}(Me),Ea=Object(p.f)(Object(je.b)(ke,(function(e){return{setLoggedUser:function(t){return e(function(e){return{type:"set_logged_user",payload:{user:Object.assign(new Ne,e)},meta:{type:"set_logged_user"}}}(t))}}}))(ba)),ya=function e(){Object(m.a)(this,e),this.name=!1,this.pageIcon=!1,this.welcomingMessage=!1,this.contact=!1,this.shortDescription=!1,this.backgroundUrl=!1,this.address=!1,this.about=!1,this.color=!1,this.fontColor=!1},Ca=function e(){var t=this;Object(m.a)(this,e),this.applicationProfile=void 0,this.editFields=new ya,this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},Na=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.state=new Ca,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.applicationProfile;a&&(a[t.name]=t.value,n.setState({applicationProfile:a}))}},n.updateImageField=function(e){var t=e.target;if(null!=t){var a=e.target.getAttribute("name");if(null!=a){var r=Object(c.a)(n);(t.files?t.files[0].name:void 0)&&Re(t).then((function(e){r.setAppProfileField(a,e)})).catch(console.error)}}},n.setAppProfileField=function(e,t){var a=n.state.applicationProfile;a&&(a[e]=t,n.setState({applicationProfile:a}))},n.toggleInput=function(e){var t=e.target,a=n.state.applicationProfile,r=n.getApplicationProfile();if(null!=t&&a&&r){var i=t.getAttribute("data-name");if(null!=i){var o="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[i]=o,o||(a[i]=r[i]),n.setState({applicationProfile:a,editFields:l})}}},n.saveRecord=function(e){if(e.preventDefault(),0!=n.state.fieldChanged()){var t=Object(c.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&t.doSaveRecord()}))}},n.doSaveRecord=function(){var e=n.getApplicationEditedData();e&&(e.backgroundUrl||e.pageIcon?n.commonAjaxWithProgress(n.masterDataService.updateApplicationProfile,n.profileSaved,n.showCommonErrorAlert,e):n.commonAjax(n.masterDataService.updateApplicationProfile,n.profileSaved,n.showCommonErrorAlert,e))},n.getApplicationEditedData=function(){var e,t,a=n.state.applicationProfile,r=n.state.editFields;if(a){var i=new Fe;for(var o in r){r[o]&&"backgroundUrl"!=o&&"pageIcon"!=o&&(i[o]=a[o])}return r.backgroundUrl&&(null===(e=a.backgroundUrl)||void 0===e?void 0:e.startsWith("data:image"))&&(i.backgroundUrl=a.backgroundUrl),r.pageIcon&&(null===(t=a.pageIcon)||void 0===t?void 0:t.startsWith("data:image"))&&(i.pageIcon=a.pageIcon),i}},n.profileSaved=function(e){n.showInfo("Success"),n.props.setApplicationProfile(e.applicationProfile);var t=n.state.editFields;for(var a in t)t[a]=!1;n.setState({editFields:t})},n.masterDataService=n.getServices().masterDataService,n.state.applicationProfile=Object.assign(new Fe,n.getApplicationProfile()),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="ApplicationProfile Profile"}},{key:"render",value:function(){var e,t,a=this.state.applicationProfile;if(!a)return null;var n=this.state.editFields,r=null!==(e=a.backgroundUrl)&&void 0!==e?e:"",o=null!==(t=a.pageIcon)&&void 0!==t?t:"";return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Application Profile"),i.a.createElement(ma,{title:"Profile Data"},i.a.createElement("form",{onSubmit:this.saveRecord},i.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},i.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:r.startsWith("data:image")?r:ye()+r}),i.a.createElement(va,{name:"backgroundUrl",edit:n.backgroundUrl,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),i.a.createElement(Ft,{label:"Name"},i.a.createElement(pa,{edit:n.name,updateProperty:this.updateProfileProperty,name:"name",toggleInput:this.toggleInput,value:a.name})),i.a.createElement(Ft,{label:"Welcoming Message"},i.a.createElement(pa,{edit:n.welcomingMessage,updateProperty:this.updateProfileProperty,name:"welcomingMessage",toggleInput:this.toggleInput,value:a.welcomingMessage})),i.a.createElement(Ft,{label:"Short Description"},i.a.createElement(pa,{edit:n.shortDescription,updateProperty:this.updateProfileProperty,name:"shortDescription",toggleInput:this.toggleInput,value:a.shortDescription})),i.a.createElement(Ft,{label:"Address"},i.a.createElement(pa,{edit:n.address,updateProperty:this.updateProfileProperty,name:"address",toggleInput:this.toggleInput,value:a.address})),i.a.createElement(Ft,{label:"About"},i.a.createElement(pa,{edit:n.about,updateProperty:this.updateProfileProperty,name:"about",toggleInput:this.toggleInput,value:a.about})),i.a.createElement(Ft,{label:"Contact"},i.a.createElement(pa,{edit:n.contact,updateProperty:this.updateProfileProperty,name:"contact",toggleInput:this.toggleInput,value:a.contact})),i.a.createElement(Ft,{label:"Background Color"},i.a.createElement(pa,{type:"color",edit:n.color,updateProperty:this.updateProfileProperty,name:"color",toggleInput:this.toggleInput,value:a.color})),i.a.createElement(Ft,{label:"Font Color"},i.a.createElement(pa,{type:"color",edit:n.fontColor,updateProperty:this.updateProfileProperty,name:"fontColor",toggleInput:this.toggleInput,value:a.fontColor})),i.a.createElement(Ft,{label:"Page Icon"},i.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:o.startsWith("data:image")?o:ye()+o}),i.a.createElement(va,{name:"pageIcon",edit:n.pageIcon,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),i.a.createElement(Ft,null,this.state.fieldChanged()?i.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save"}):null))))}}]),a}(Me),wa=Object(p.f)(Object(je.b)(ke,(function(e){return{setApplicationProfile:function(t){return e(function(e){return{type:"SET_APPLICATION_PROFILE",payload:{applicationProfile:e},meta:{type:"SET_APPLICATION_PROFILE"}}}(t))}}}))(Na)),Sa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,!1)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="About Us"}},{key:"render",value:function(){var e=this.getApplicationProfile();return i.a.createElement("div",{className:"section-body container-fluid",style:{marginTop:"20px"}},i.a.createElement("h2",null,"About Us"),i.a.createElement(ma,{title:"Application"},i.a.createElement(Ft,{label:"Name"},e.name),i.a.createElement(Ft,null,i.a.createElement("i",null,e.shortDescription)),i.a.createElement(Ft,{label:"Contact"},e.contact),i.a.createElement(Ft,{label:"Address"},e.address)),i.a.createElement("p",null),i.a.createElement(ma,{title:"Development Mode"}),i.a.createElement("p",null))}}]),a}(Me),Oa=Object(p.f)(Object(je.b)(ke)(Sa)),ja=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).title=void 0,e.content=void 0,e.description=void 0,e.bannerImages=void 0,e.category=void 0,e.user=void 0,e}return a}(b);ja.getImageUrs=function(e){var t=[];if(void 0==e.bannerImages)return t;for(var a=e.bannerImages.split("~"),n=0;n<a.length;n++){var r=a[n];t.push(ye()+"/"+r)}return t};var ka=function e(){Object(m.a)(this,e),this.active=0},Da=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=new ka,n.imageLength=0,n.getCurrentImage=function(){return n.props.imageUrls[n.state.active]},n.prev=function(e){var t=n.state.active;0==t?t=n.imageLength-1:t--,n.setState({active:t})},n.next=function(e){var t=n.state.active;t==n.imageLength-1?t=0:t++,n.setState({active:t})},n.imageLength=e.imageUrls.length,n}return Object(s.a)(a,[{key:"render",value:function(){return i.a.createElement(ma,{className:"container-fluid   text-center"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-2"},i.a.createElement(it,{className:"btn btn-light",iconClassName:"fas fa-arrow-left",onClick:this.prev})),i.a.createElement("div",{className:"col-md-8",style:{overflowX:"scroll"}},i.a.createElement("img",{height:"200",src:this.getCurrentImage()})),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(it,{className:"btn btn-light",iconClassName:"fas fa-arrow-right",onClick:this.next}))))}}]),a}(r.Component),Ia=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,"Lessons",!1)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title=this.props.lesson.title}},{key:"render",value:function(){var e,t,a=this.props.lesson;return a?i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,a.title),i.a.createElement("p",{className:"text-dark"},i.a.createElement("i",{className:"fas fa-edit"}),null===(e=a.user)||void 0===e?void 0:e.displayName,", ",a.createdDate?new Date(a.createdDate).toLocaleString():""),i.a.createElement(Ve,{iconClassName:"fas fa-angle-left",onClick:this.props.back},"Back"),a.bannerImages?i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null),i.a.createElement(Da,{imageUrls:ja.getImageUrs(a)}),i.a.createElement("p",null)):i.a.createElement("p",null),i.a.createElement(ma,null,i.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.content?a.content.toString():""}})),i.a.createElement("p",null),i.a.createElement("p",null,i.a.createElement("i",{className:"fas fa-tags"}),"\xa0",null===(t=a.category)||void 0===t?void 0:t.name),i.a.createElement(Ve,{iconClassName:"fas fa-angle-left",onClick:this.props.back},"Back"),i.a.createElement("p",null)):i.a.createElement(i.a.Fragment,null)}}]),a}($e),La=Object(p.f)(Object(je.b)(ke)(Ia)),qa=function e(){Object(m.a)(this,e),this.lessons=void 0,this.loading=!1,this.filter={limit:5,page:0},this.selectedLesson=void 0,this.totalData=0,this.category=void 0,this.filterValue=void 0},Pa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r,i;return Object(m.a)(this,a),(i=t.call(this,e,!1)).lessonService=void 0,i.state=new qa,i.categoryCode="",i.startLoading=function(){i.categoryCode!=i.props.categoryCode?(i.categoryCode=i.props.categoryCode,i.setState({loading:!0,selectedLesson:void 0})):Object(at.a)((n=Object(c.a)(i),Object(nt.a)(a.prototype)),"startLoading",n).call(n,!1)},i.endLoading=function(){i.categoryCode==i.props.categoryCode&&i.state.loading?i.setState({loading:!1}):Object(at.a)((r=Object(c.a)(i),Object(nt.a)(a.prototype)),"endLoading",r).call(r)},i.dataLoaded=function(e){var t=e.entities;i.categoryCode=i.props.categoryCode,i.setState({lessons:t,totalData:e.totalData,category:e.entity})},i.loadLessons=function(){var e={filter:Object(f.a)(Object(f.a)({},i.state.filter),{},{fieldsFilter:{value:i.state.filterValue}})};i.commonAjax(i.lessonService.getLessons,i.dataLoaded,i.showCommonErrorAlert,i.props.categoryCode,e)},i.loadLessonsInPage=function(e){i.updateFilter("page",e),i.loadLessons()},i.updateFilter=function(e,t){var a=i.state.filter;a[e]=t,i.setState({filter:a})},i.updateLimit=function(e){!e.target.value||e.target.value<1||i.updateFilter("limit",e.target.value)},i.setSelectedLesson=function(e){i.setState({selectedLesson:e})},i.setSelectedLessonUndefined=function(){document.title="Lessons",i.setSelectedLesson(void 0)},i.setFilterValue=function(e){i.setState({filterValue:e.target.value})},i.clearFilter=function(e){i.setState({filterValue:void 0}),i.updateFilter("limit",5)},i.lessonService=i.getServices().lessonService,i}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadLessons()}},{key:"componentDidUpdate",value:function(){this.categoryCode!=this.props.categoryCode&&this.loadLessonsInPage(0)}},{key:"render",value:function(){var e,t,a=this;if(this.state.loading)return i.a.createElement("div",{className:"section-body  container-fluid"},i.a.createElement("h2",null,"Lessons"),i.a.createElement(We,null));if(void 0==this.state.lessons||void 0==this.state.category)return i.a.createElement("div",{className:"section-body  container-fluid"},i.a.createElement("h2",null,"Lessons"),i.a.createElement(Zt,null,"Data not found"));if(this.state.selectedLesson)return i.a.createElement(La,{lesson:this.state.selectedLesson,back:this.setSelectedLessonUndefined});var n=this.state.lessons,r=this.state.category;return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Lessons - ",r.name),i.a.createElement("form",{className:"row",onSubmit:function(e){e.preventDefault(),a.loadLessons()}},i.a.createElement("div",{className:"input-group col-md-6"},i.a.createElement("input",{value:"Per Page",className:"form-control",disabled:!0}),i.a.createElement("input",{min:0,type:"number",onChange:this.updateLimit,value:this.state.filter.limit,className:"form-control"})),i.a.createElement("div",{className:"input-group col-md-6"},i.a.createElement("input",{autoComplete:"off",type:"search",placeholder:"Search...",onChange:this.setFilterValue,value:this.state.filterValue,className:"form-control"}),i.a.createElement("input",{type:"submit",value:"Reload",className:"btn btn-info"}),i.a.createElement("button",{type:"reset",className:"btn btn-warning",onClick:this.clearFilter},"Clear Filter"))),i.a.createElement("p",null),i.a.createElement(dt,{activePage:null!==(e=this.state.filter.page)&&void 0!==e?e:0,limit:null!==(t=this.state.filter.limit)&&void 0!==t?t:5,totalData:this.state.totalData,onClick:this.loadLessonsInPage}),0==n.length?i.a.createElement(Zt,null,"No Data"):null,n.map((function(e,t){return i.a.createElement(Aa,{setSelectedLesson:a.setSelectedLesson,key:y()+"-lesson",lesson:e})})))}}]),a}(Me),Aa=function(e){var t=e.lesson,a=new String(t.content).length>150?new String(t.content).substring(0,150)+"...":new String(t.content);return i.a.createElement(ma,{attributes:{style:{marginBottom:"5px"}}},i.a.createElement("h3",null,t.title),i.a.createElement("p",null,i.a.createElement("i",{className:"fas fa-clock"}),"\xa0",t.createdDate?new Date(t.createdDate).toLocaleString():""),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.toString()}}),i.a.createElement("p",null),i.a.createElement(Ve,{onClick:function(a){return e.setSelectedLesson(t)},className:"btn btn-outline-dark btn-sm",iconClassName:"fas fa-angle-right"},"Read More"))},Ta=Object(p.f)(Object(je.b)(ke)(Pa)),za=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,"Lessons",!1)).categoriesService=void 0,n.state={code:void 0,loading:!1},n.startLoading=function(){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.lessonCategoriesLoaded=function(e){n.categoriesService.setLoadedCategories("lesson",e.entities?e.entities:[]),n.setSidebarMenus(),n.refresh()},n.setSidebarMenus=function(){for(var e=[],t=n.categoriesService.getLoadedCategories("lesson"),a=0;a<t.length;a++){var r,i=t[a];e.push({name:i.name,url:i.code,code:null!==(r=i.code)&&void 0!==r?r:y(),menuClass:i.iconClassName,role:[]})}n.props.setSidebarMenus&&n.props.setSidebarMenus(e)},n.loadManagamenetPages=function(){if(n.categoriesService.getLoadedCategories("lesson").length>0)return n.setSidebarMenus(),void n.refresh();n.commonAjax(n.categoriesService.getCategories,n.lessonCategoriesLoaded,n.showCommonErrorAlert,"lesson")},n.getCode=function(){return n.props.match.params.categoryCode},n.categoriesService=n.getServices().categoriesService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(at.a)(Object(nt.a)(a.prototype),"componentDidMount",this).call(this),this.loadManagamenetPages()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.setSidebarMenus()}},{key:"render",value:function(){if(this.getCode())return i.a.createElement(Ta,{categoryCode:this.getCode()});var e=this.categoriesService.getLoadedCategories("lesson");return this.state.loading?i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement(We,null)):0==e.length?i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement(Zt,null,"No Categories Yet")):i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Lessons"),i.a.createElement("div",{className:"row"},e.map((function(e){return i.a.createElement("div",{key:"lesson-cat-"+e.id,className:"col-md-2 text-center",style:{marginBottom:"10px"}},i.a.createElement("h2",null,i.a.createElement(_e.b,{className:"btn btn-warning btn-lg",to:"/lessons/"+e.code},i.a.createElement("i",{className:e.iconClassName&&""!=e.iconClassName?e.iconClassName:"fas fa-folder"}))),i.a.createElement("p",null,e.name))}))))}}]),a}($e),Ra=Object(p.f)(Object(je.b)(ke)(za)),xa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).render=function(){return i.a.createElement("div",{className:"div-auto-scroll"},e.props.children)},e}return a}(r.Component),Fa=function e(){Object(m.a)(this,e),this.fieldsFilter={}},Ma=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=new Fa,n.publicQuizService=void 0,n.updateFilter=function(e){var t=n.state.fieldsFilter,a=e.target;t[a.name]=a.value,n.setState({fieldsFilter:t})},n.resetFilter=function(e){n.setState({fieldsFilter:{}})},n.quizOnClick=function(e){e.protectedByCode&&1!=n.props.skipAccessCode?n.validateAccessCode(e):n.props.quizOnClick(e)},n.accessCodeValidated=function(e){n.props.quizOnClick(e)},n.validateAccessCode=function(e){var t=prompt("Enter access code");null!=t&&n.commonAjax(n.publicQuizService.validateAccessCode,(function(){return n.accessCodeValidated(e)}),n.showCommonErrorAlert,e,t)},n.publicQuizService=n.getServices().publicQuizService,n}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props;return i.a.createElement(ma,null,i.a.createElement("form",{className:"row",onSubmit:function(e){e.preventDefault(),t.props.onFilter&&t.props.onFilter(t.state.fieldsFilter)}},i.a.createElement(Ft,{className:"col-6",label:"Title"},i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{onChange:this.updateFilter,name:"title",value:null!==(e=this.state.fieldsFilter.title)&&void 0!==e?e:"",type:"text",placeholder:"Search Title",className:"form-control"}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Search"),i.a.createElement("button",{onClick:this.resetFilter,type:"reset",className:"btn btn-warning"},i.a.createElement("i",{className:"fas fa-redo"})))))),i.a.createElement(xa,null,i.a.createElement("table",{className:"table table-striped"},function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return i.a.createElement("thead",null,i.a.createElement("tr",null,t.map((function(e){return i.a.createElement("th",{key:y()},e)}))))}("No","Title","Question","Duration","Status","Action"),i.a.createElement("tbody",null,a.loading?i.a.createElement("tr",null,i.a.createElement("td",{colSpan:6},i.a.createElement(We,null))):a.quizList.map((function(e,n){return e=Object.assign(new R,e),i.a.createElement("tr",{key:"quiz-public-list-"+n},i.a.createElement("td",null,n+a.startingNumber+1),i.a.createElement("td",null,e.title,"\xa0",e.questionsTimered?i.a.createElement("i",{className:"fas fa-stopwatch"}):null),i.a.createElement("td",null,e.getQuestionCount()),i.a.createElement("td",null,At(e.duration)),i.a.createElement("td",null,e.active?"Active":"Not active","-",e.repeatable?"Repeatable":"Not repeatable"),i.a.createElement("td",null,e.available?i.a.createElement("a",{onClick:function(a){return t.quizOnClick(e)},className:"btn btn-dark"},e.protectedByCode?i.a.createElement("i",{className:"fas fa-lock"}):i.a.createElement("i",{className:"fas fa-folder-open"})):"Not available"))}))))))}}]),a}(Me),_a=Object(p.f)(Object(je.b)(ke)(Ma)),Ua=function e(){Object(m.a)(this,e),this.quizList=new Array,this.loading=!1,this.filter=new st,this.totalData=0},Qa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,"Quiz Management",!0)).quizService=void 0,n.state=new Ua,n.startLoading=function(e){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.dataLoaded=function(e){var t;n.setState({quizList:null!==(t=e.entities)&&void 0!==t?t:[],totalData:e.totalData})},n.loadRecords=function(){if(!n.state.loading){var e=n.state.filter;e.availabilityCheck=!1,n.commonAjax(n.quizService.getQuizList,n.dataLoaded,n.showCommonErrorAlert,e)}},n.loadRecordsAtPage=function(e){if(!n.state.loading){var t=n.state.filter;t.page=e,n.setState({filter:t}),n.loadRecords()}},n.loadRecordsWithFilter=function(e){var t=n.state.filter;t.page=0,t.fieldsFilter=e,n.setState({filter:t}),n.loadRecords()},n.editQuiz=function(e){n.showConfirmation("See Detail Quiz: "+e.title+"?").then((function(t){t&&n.props.history.push({pathname:"/quizmanagement/detail/"+e.id})}))},n.quizService=n.getServices().publicQuizService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(at.a)(Object(nt.a)(a.prototype),"componentDidMount",this).call(this),this.loadRecords()}},{key:"render",value:function(){var e,t,a,n,r,o=this.state.filter;return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Quiz Management"),i.a.createElement("div",{className:"alert alert-info"},"Welcome, ",i.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName)),i.a.createElement(dt,{activePage:null!==(t=o.page)&&void 0!==t?t:0,limit:null!==(a=o.limit)&&void 0!==a?a:5,totalData:this.state.totalData,onClick:this.loadRecordsAtPage}),i.a.createElement(_a,{onFilter:this.loadRecordsWithFilter,loading:this.state.loading,skipAccessCode:!0,quizOnClick:this.editQuiz,startingNumber:(null!==(n=o.limit)&&void 0!==n?n:0)*(null!==(r=o.page)&&void 0!==r?r:0),quizList:this.state.quizList}))}}]),a}($e),Ba=Object(p.f)(Object(je.b)(ke)(Qa)),Ya=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).answerCode=void 0,e.correctChoice=void 0,e.statement=void 0,e.answerEssay=void 0,e.essay=void 0,e.quiz=void 0,e.image=void 0,e.choices=void 0,e.duration=5,e.number=1,e.entered=!1,e}return a}(b);Ya.public_choices=["A","B","C","D"],Ya.publicQuizQuestion=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Ya,a=[];if(0==e){t.answerCode="A";for(var n=0;n<Ya.public_choices.length;n++){var r=Ya.public_choices[n];a.push({answerCode:r,statement:"Answer "+r})}}else t.answerEssay="ANSWER ESSAY";return t.essay=e,t.choices=a,t};var Ha=function(e){return i.a.createElement("div",null,i.a.createElement("div",{className:"input-group "+(e.answerCode==e.choice.answerCode?"border border-primary":"")},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{onClick:function(t){var a;e.setAnswer(null!==(a=e.choice.answerCode)&&void 0!==a?a:"",e.questionIndex)},className:"clickable input-group-text "+(e.answerCode==e.choice.answerCode?"bg-primary text-white":"")},i.a.createElement("b",null,e.choice.answerCode))),i.a.createElement("input",{name:"statement",onChange:e.updateField,className:"form-control","data-questionindex":e.questionIndex,"data-index":e.index,value:e.choice.statement,required:!0})),i.a.createElement("input",{type:"file",name:"image",accept:"image/*",onChange:e.updateField,"data-questionindex":e.questionIndex,"data-index":e.index,className:"form-control"}),i.a.createElement(Xa,{name:e.choice.image,index:e.index,remove:e.removeImage}),e.choice.id?i.a.createElement("label",null,"Record Id: ",e.choice.id):null)},Wa=function(e){var t,a=e.index,n=e.question,r=null!==(t=e.question.choices)&&void 0!==t?t:[];return i.a.createElement("div",{className:"alert alert-info",key:"quiz-quest-form-"+a},i.a.createElement(Ft,{label:"Question #"+(a+1)},i.a.createElement("textarea",{required:!0,onChange:e.updateField,value:n.statement,className:"form-control",name:"statement","data-index":a})),i.a.createElement(Ft,{show:e.questionsTimered,label:"Duration"},i.a.createElement("input",{min:5,type:"number",required:!0,onChange:e.updateField,value:n.duration,className:"form-control",name:"duration","data-index":a})),i.a.createElement(Ft,{label:"Image"},i.a.createElement("input",{type:"file",accept:"image/*",onChange:e.updateField,name:"image",className:"form-control","data-index":a}),i.a.createElement(Xa,{name:n.image,index:a,remove:e.removeImage})),0==n.essay?i.a.createElement(Ft,{label:"Choices"},e.showChoices?r.map((function(t,r){var o;return i.a.createElement(Ha,{answerCode:null!==(o=n.answerCode)&&void 0!==o?o:"A",key:"qst-choice-"+r+"-"+a,updateField:e.updateChoiceField,setAnswer:e.setAnswer,removeImage:function(t){e.removeChoiceImage(t,a)},questionIndex:a,index:r,choice:t})})):i.a.createElement("label",null,"Hidden")):null,i.a.createElement(Ft,{label:"Answer"},n.essay?i.a.createElement("textarea",{required:!0,onChange:e.updateField,value:n.answerEssay,className:"form-control",name:"answerEssay","data-index":a}):i.a.createElement("select",{required:!0,className:"form-control",value:n.answerCode,onChange:function(t){e.setAnswer(t.target.value,a)},name:"answerCode","data-index":a},Ya.public_choices.map((function(e,t){return i.a.createElement("option",{key:"opt-ch-ans-"+t+a,value:e},e)})))),e.question.id?i.a.createElement(Ft,{label:"Record ID"},e.question.id):null,i.a.createElement(Ft,null,i.a.createElement(it,{iconClassName:"fas fa-times",className:"btn btn-danger",onClick:function(t){e.remove(e.index)}})))},Va=function(e){var t=e.quiz;return i.a.createElement(r.Fragment,null,i.a.createElement(Ft,{label:"Title"},i.a.createElement("input",{required:!0,onChange:e.updateField,className:"form-control",name:"title",value:t.title})),i.a.createElement(Ft,{label:"Access Code"},i.a.createElement("input",{onChange:e.updateField,className:"form-control",name:"accessCode",value:t.accessCode})),i.a.createElement(Ft,{label:"Description"},i.a.createElement("textarea",{onChange:e.updateField,className:"form-control",name:"description",value:t.description})),i.a.createElement(Ft,{label:"On Finished Message"},i.a.createElement("input",{onChange:e.updateField,className:"form-control",name:"afterCompletionMessage",value:t.afterCompletionMessage})),i.a.createElement(Ft,{label:"Duration (Second)"},i.a.createElement("input",{type:"number",min:5,required:!0,onChange:e.updateField,className:"form-control",name:"duration",value:t.duration})),i.a.createElement(Ft,{label:"Active"},i.a.createElement($t,{active:1==t.active,onClick:function(t){return e.updateQuizBooleanField("active",t)}})),i.a.createElement(Ft,{label:"Repeatable"},i.a.createElement($t,{active:1==t.repeatable,onClick:function(t){return e.updateQuizBooleanField("repeatable",t)}})),i.a.createElement(Ft,{label:"Show All Question"},i.a.createElement($t,{active:1==t.showAllQuestion,onClick:function(t){return e.updateQuizBooleanField("showAllQuestion",t)}})),i.a.createElement(Ft,{label:"Question With Timer"},i.a.createElement($t,{active:1==t.questionsTimered,onClick:function(t){return e.updateQuizBooleanField("questionsTimered",t)}})),i.a.createElement(Ft,{label:"Image"},i.a.createElement("input",{type:"file",onChange:e.updateField,className:"form-control",name:"image"}),void 0!=t.image&&""!=t.image.trim()?t.image.startsWith("data:image")?i.a.createElement("img",{width:"100",height:"100",src:t.image}):i.a.createElement("img",{width:"100",height:"100",src:ye()+t.image}):null),t.id?i.a.createElement(Ft,{label:"Record ID"},t.id):null)},Xa=function(e){if(!e.name)return null;var t=e.name.includes("data:image")?e.name:ye()+e.name;return i.a.createElement("div",null,i.a.createElement("img",{width:"100",src:t}),i.a.createElement("a",{style:{marginLeft:"5px"},onClick:function(t){return e.remove(e.index)},className:"btn btn-danger btn-sm"},i.a.createElement("i",{className:"fas fa-times"})))},Ga=function e(){Object(m.a)(this,e),this.quiz=new R,this.saved=!1,this.showChoices=!0},Ka=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).quizService=void 0,n.state=new Ga,n.validateQuizFromProps=function(){if(n.props.location.state){var e=n.props.location.state.quiz;e&&n.setState({quiz:Object.assign(new R,e)})}},n.reset=function(){n.showConfirmationDanger("Reset Quiz?").then((function(e){e&&n.setState({quiz:new R})}))},n.updateQuizBooleanField=function(e,t){var a=n.state.quiz;a[e]=t,n.setState({quiz:a})},n.updateQuizField=function(e){var t=e.target.name,a=e.target.value,r=n.state.quiz;"file"==e.target.type&&Re(e.target).then((function(e){r[t]=e,n.setState({quiz:r})}));r[t]=a,n.setState({quiz:r})},n.addQuestion=function(e){n.doAddQUestion(!1)},n.addQuestionEssay=function(e){n.doAddQUestion(!0)},n.doAddQUestion=function(e){var t=n.state.quiz;void 0==t.questions&&(t.questions=[]);var a=Ya.publicQuizQuestion(e);a.statement="Question "+(e?"- ESSAY ":"")+(t.questions.length+1),t.questions.push(a),n.setState({quiz:t})},n.setAnswer=function(e,t){var a=n.state.quiz;void 0!=a.questions&&(a.questions[t].answerCode=e,n.setState({quiz:a}))},n.updateQuestionField=function(e){var t,a=e.target;if(a){var r=parseInt(null!==(t=a.dataset.index)&&void 0!==t?t:"0"),i=n.state.quiz;void 0!=i.questions&&("image"==a.name?Re(a).then((function(e){i.questions&&e.startsWith("data:image")&&(i.questions[r][a.name]=e,n.setState({quiz:i}))})):(i.questions[r][a.name]=a.value,n.setState({quiz:i})))}},n.updateChoiceField=function(e){var t,a,r,i=e.target;if(i){var o=parseInt(null!==(t=i.dataset.questionindex)&&void 0!==t?t:"0"),l=parseInt(null!==(a=i.dataset.index)&&void 0!==a?a:"0"),s=n.state.quiz,c=null!==(r=s.questions)&&void 0!==r?r:[],u=c[o];0!=c.length&&u.choices&&("image"==i.name?Re(i).then((function(e){u.choices&&e.startsWith("data:image")&&(u.choices[l][i.name]=e,n.setState({quiz:s}))})):(u.choices[l][i.name]=i.value,n.setState({quiz:s})))}},n.removeQuestion=function(e){var t=n.state.quiz;void 0!=t.questions&&(t.questions.splice(e,1),n.showConfirmationDanger("Remove Question?").then((function(e){e&&n.setState({quiz:t})})))},n.removeQuestionImage=function(e){var t=n.state.quiz;t.questions&&(t.questions[e]&&(t.questions[e].nulledFields=["image"],t.questions[e].image=void 0),n.showConfirmationDanger("Remove Question Image?").then((function(e){e&&n.setState({quiz:t})})))},n.removeChoiceImage=function(e,t){var a,r=n.state.quiz,i=null!==(a=r.questions)&&void 0!==a?a:[],o=i[t];0!=i.length&&o.choices&&o.choices[e]&&(o.choices[e].image=void 0,o.choices[e].nulledFields=["image"],n.showConfirmationDanger("Remove Choice Image?").then((function(e){e&&n.setState({quiz:r})})))},n.removeAllQuestion=function(e){var t=n.state.quiz;n.showConfirmationDanger("Remove All Question?").then((function(e){t.questions=[],e&&n.setState({quiz:t})}))},n.submitQuiz=function(e){e.preventDefault(),console.debug("QUIZ: ",n.state.quiz),n.showConfirmation(n.state.quiz.id?"Update Quiz?":"Create Quiz?").then((function(e){e&&n.doSubmitQuiz()}))},n.doSubmitQuiz=function(){n.commonAjaxWithProgress(n.quizService.submit,n.dataSaved,n.showCommonErrorAlert,n.state.quiz)},n.dataSaved=function(e){var t;(n.showInfo("Success"),e.quiz)&&n.props.history.push("/quizmanagement/detail/"+(null===(t=e.quiz)||void 0===t?void 0:t.id))},n.showChoices=function(){n.setState({showChoices:!0})},n.hideChoices=function(){n.setState({showChoices:!1})},n.quizService=n.getServices().quizService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.validateQuizFromProps(),document.title="Quiz Form"}},{key:"render",value:function(){var e,t=this,a=this.state.quiz,n=null!==(e=a.questions)&&void 0!==e?e:[];return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Quiz Form"),i.a.createElement("form",{onSubmit:this.submitQuiz},i.a.createElement(ma,{title:"Quiz Form"}," ",i.a.createElement(Va,{quiz:a,updateQuizBooleanField:this.updateQuizBooleanField,updateField:this.updateQuizField})),i.a.createElement("div",{className:"btn-group",style:{marginBottom:"5px",marginTop:"5px"}},i.a.createElement(it,{className:"btn btn-secondary",iconClassName:"fas fa-plus",onClick:this.addQuestion},"Question"),i.a.createElement(it,{className:"btn btn-secondary",onClick:this.addQuestionEssay},"Question Essay"),i.a.createElement(it,{className:"btn btn-danger",iconClassName:"fas fa-times",onClick:this.removeAllQuestion},"Remove All Question"),i.a.createElement(it,{className:"btn btn-warning",onClick:this.reset},"Reset")),i.a.createElement(ma,{title:"Quiz Questions :"+n.length,footerContent:a.questions&&a.questions.length>0?i.a.createElement("input",{type:"submit",className:"btn btn-success",value:a.id?"Update":"Create"}):null},i.a.createElement(it,{show:1==this.state.showChoices,onClick:this.hideChoices,iconClassName:"fas fa-angle-up"},"Hide Choices"),i.a.createElement(it,{show:0==this.state.showChoices,onClick:this.showChoices,iconClassName:"fas fa-angle-down"},"Show Choices"),i.a.createElement("p",null),n.map((function(e,n){return i.a.createElement(Wa,{key:"quest-form-"+n,questionsTimered:a.questionsTimered,showChoices:t.state.showChoices,setAnswer:t.setAnswer,question:e,index:n,updateField:t.updateQuestionField,updateChoiceField:t.updateChoiceField,remove:t.removeQuestion,removeImage:t.removeQuestionImage,removeChoiceImage:t.removeChoiceImage})}))),i.a.createElement("p",null)))}}]),a}(Me),Ja=Object(p.f)(Object(je.b)(ke)(Ka)),Za=function e(){Object(m.a)(this,e),this.quiz=void 0,this.loading=!1},$a=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r,i;return Object(m.a)(this,a),(i=t.call(this,e,!0)).quizService=void 0,i.state=new Za,i.startLoading=function(e){Object(at.a)((n=Object(c.a)(i),Object(nt.a)(a.prototype)),"startLoading",n).call(n,e),i.setState({loading:!0})},i.endLoading=function(){Object(at.a)((r=Object(c.a)(i),Object(nt.a)(a.prototype)),"endLoading",r).call(r),i.setState({loading:!1})},i.loadQuiz=function(){i.commonAjaxWithProgress(i.quizService.getQuiz,i.dataLoaded,i.showCommonErrorAlert,parseInt(i.getId()))},i.dataLoaded=function(e){i.setState({quiz:e.quiz})},i.getId=function(){return i.props.match.params.id},i.editRecord=function(e){var t=Object(c.a)(i);i.showConfirmation("Edit Quiz?").then((function(e){e&&t.props.history.push({pathname:"/quizmanagement/form",state:{quiz:t.state.quiz}})}))},i.deleteRecord=function(e){var t=Object(c.a)(i);i.showConfirmationDanger("Delete Quiz?").then((function(e){e&&t.doDeleteQuiz()}))},i.doDeleteQuiz=function(){i.state.quiz&&i.commonAjaxWithProgress(i.quizService.deleteQuiz,i.dataDeleted,i.showCommonErrorAlert,i.state.quiz.id)},i.dataDeleted=function(e){i.showInfo("Record Deleted"),i.setState({quiz:void 0})},i.quizService=i.getServices().quizService,i}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.loadQuiz(),document.title="Quiz Detail"}},{key:"render",value:function(){var e;if(!this.state.quiz)return i.a.createElement("div",{id:"QuizDetail",className:"container-fluid section-body"},i.a.createElement("h2",null,"Quiz Detail"),this.state.loading?i.a.createElement(We,null):i.a.createElement(Zt,{children:"No Data"}));var t=Object.assign(new R,this.state.quiz),a=null!==(e=t.questions)&&void 0!==e?e:new Array,n=t.questionsTimered;return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Quiz Detail"),i.a.createElement("div",null,i.a.createElement("div",{className:"alert alert-info"},i.a.createElement(Ft,{label:"Title"},t.title),i.a.createElement(Ft,{label:"Access Code"},i.a.createElement("i",null,t.accessCode)),i.a.createElement(Ft,{label:"Description"},t.description),i.a.createElement(Ft,{label:"On Finished Message"},t.afterCompletionMessage),i.a.createElement(Ft,{label:"Duration "},At(t.duration)),i.a.createElement(Ft,{label:"Active"},t.active?"YES":"NO"),i.a.createElement(Ft,{label:"Repeatable"},t.repeatable?"YES":"NO"),i.a.createElement(Ft,{label:"Show All Question"},t.showAllQuestion?"YES":"NO"),i.a.createElement(Ft,{label:"Qestions Timered"},t.questionsTimered?"YES":"NO"),i.a.createElement(Ft,null,i.a.createElement(it,{style:{marginRight:"5px"},iconClassName:"fas fa-edit",className:"btn btn-warning",onClick:this.editRecord},"Edit"),i.a.createElement(it,{className:"btn btn-danger",iconClassName:"fas fa-times",onClick:this.deleteRecord},"Delete")),i.a.createElement(Ft,{label:"Image"},t.image?i.a.createElement("img",{height:"100",width:"100",src:ye()+t.image}):"No Image")),a.map((function(e,t){return i.a.createElement(en,{questionTimered:n,number:t+1,key:"qdl-"+t,question:e})}))))}}]),a}(Me),en=function(e){var t,a=e.question,n=null!==(t=a.choices)&&void 0!==t?t:[];return i.a.createElement(ma,{attributes:{style:{marginBottom:"5px"}}},i.a.createElement("h4",null,e.number,". ",a.statement),i.a.createElement(Ft,{show:e.questionTimered},i.a.createElement("i",{className:"fas fa-clock"}),"\xa0",At(a.duration)),a.image?i.a.createElement("img",{src:ye()+a.image,height:"100"}):null,a.essay?i.a.createElement("p",null,i.a.createElement("u",null,"Answer:"),i.a.createElement("p",null,a.answerEssay)):null,n.map((function(e,t){var n=e.answerCode==a.answerCode;return i.a.createElement("div",{key:"qdc-"+a.id+t},i.a.createElement("b",{className:n?"border rounded border-success text-success":"text-dark"},e.answerCode),i.a.createElement("span",{style:{marginLeft:"5px"}},e.statement),i.a.createElement("p",null),e.image?i.a.createElement("img",{src:ye()+e.image,height:"100"}):null)})))},tn=Object(p.f)(Object(je.b)(ke)($a)),an=function e(){Object(m.a)(this,e),this.quizList=new Array,this.loading=!1,this.filter=new st,this.totalData=0},nn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r,i;return Object(m.a)(this,a),(i=t.call(this,e,"Take Quiz",!0)).publicQuizService=void 0,i.state=new an,i.startLoading=function(e){i.setState({loading:!0}),Object(at.a)((n=Object(c.a)(i),Object(nt.a)(a.prototype)),"startLoading",n).call(n,e)},i.endLoading=function(){i.setState({loading:!1}),Object(at.a)((r=Object(c.a)(i),Object(nt.a)(a.prototype)),"endLoading",r).call(r)},i.dataLoaded=function(e){var t;i.setState({quizList:null!==(t=e.entities)&&void 0!==t?t:[],totalData:e.totalData})},i.loadRecords=function(){if(!i.state.loading){var e=i.state.filter;e.availabilityCheck=!0,i.commonAjaxWithProgress(i.publicQuizService.getQuizList,i.dataLoaded,i.showCommonErrorAlert,e)}},i.loadRecordsWithFilter=function(e){if(!i.state.loading){var t=i.state.filter;t.page=0,t.fieldsFilter=e,i.setState({filter:t}),i.loadRecords()}},i.loadRecordsAtPage=function(e){if(!i.state.loading){var t=i.state.filter;t.page=e,i.setState({filter:t}),i.loadRecords()}},i.takeQuiz=function(e){i.showConfirmation("Take Quiz: "+e.title+"?").then((function(t){t&&i.props.history.push({pathname:"/quiz/challenge/"+e.id})}))},i.publicQuizService=i.getServices().publicQuizService,i}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(at.a)(Object(nt.a)(a.prototype),"componentDidMount",this).call(this),this.loadRecords()}},{key:"render",value:function(){var e,t,a,n,r=this.state.filter,o=(null!==(e=r.limit)&&void 0!==e?e:0)*(null!==(t=r.page)&&void 0!==t?t:0);return i.a.createElement("div",{style:{marginTop:"20px"},className:"section-body container-fluid"},i.a.createElement("h2",null,"Take Quiz"),i.a.createElement("div",{className:"alert alert-info"},"Challenge your self"),i.a.createElement(dt,{activePage:null!==(a=r.page)&&void 0!==a?a:0,limit:null!==(n=r.limit)&&void 0!==n?n:5,totalData:this.state.totalData,onClick:this.loadRecordsAtPage}),i.a.createElement(_a,{loading:this.state.loading,onFilter:this.loadRecordsWithFilter,quizOnClick:this.takeQuiz,startingNumber:o,quizList:this.state.quizList}))}}]),a}($e),rn=Object(p.f)(Object(je.b)(ke)(nn)),on=function e(){Object(m.a)(this,e)},ln=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).tick=0,n.state=new on,n.timeout=void 0,n.progressRef=i.a.createRef(),n.timerStringRef=i.a.createRef(),n.stop=!1,n.updateTick=function(){n.resetTimeout();var e=n.props.duration,t=n.tick;t>=e?n.updateTickWithCallback(t,n.props.onTimeout):(t+=.1,n.updateTickWithCallback(t,n.updateTimerLoop))},n.updateTickWithCallback=function(e,t){n.tick=e;var a=100-100*n.tick/n.props.duration+"%";if(n.progressRef.current&&(n.progressRef.current.style.width=a),n.timerStringRef.current){var r=At(n.props.duration-Math.ceil(n.tick));n.timerStringRef.current.innerHTML="<strong>"+r+"</strong>"}t()},n.stopTimer=function(){console.debug("STOP TIMER"),n.stop=!0},n.resetTick=function(){n.updateTickWithCallback(0,n.updateTimerLoop)},n.resetTimeout=function(){n.timeout&&clearTimeout(n.timeout)},n.updateTimerLoop=function(){1!=n.stop?n.timeout=setTimeout(n.updateTick,100):console.debug("WILL update timer but it has been stopped..")},n}return Object(s.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"container-fluid text-center"},i.a.createElement("p",null,i.a.createElement("i",{className:"fas fa-stopwatch"}),"\xa0",i.a.createElement("span",{ref:this.timerStringRef})),i.a.createElement("div",{className:"progress",style:{height:"5px"}},i.a.createElement("div",{ref:this.progressRef,style:{transitionDuration:"500ms",width:"0%"},className:"bg-dark"})),i.a.createElement("p",null))}}]),a}(r.Component),sn=function e(){Object(m.a)(this,e),this.questionIndex=0,this.showAllQuestion=!0},cn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).questionTimerRef=i.a.createRef(),n.state=new sn,n.updateQuestionIndex=function(e){console.debug("updateQuestionIndex: ",e),n.setQuestionIndex(e)},n.getCurrentQuestion=function(){return n.props.quiz.questions&&n.props.quiz.questions.length>n.state.questionIndex?n.props.quiz.questions[n.state.questionIndex]:(n.setState({questionIndex:0}),n.props.quiz.questions[0])},n.toggleQuestionView=function(e){n.setState({showAllQuestion:e,questionIndex:0})},n.nextQuestion=function(){if(n.props.quiz.questions.length-1!=n.state.questionIndex){var e=n.state.questionIndex+1;n.setQuestionIndex(e)}else n.props.onTimeout()},n.setQuestionIndex=function(e){n.setState({questionIndex:e},(function(){n.resetTimer();try{n.props.setChoice(n.props.quiz.questions[e].answerCode,e)}catch(t){}}))},n.updateTimer=function(){n.questionTimerRef.current&&n.questionTimerRef.current.updateTimerLoop()},n.resetTimer=function(){n.questionTimerRef.current&&n.questionTimerRef.current.resetTick()},n.setChoice=function(e,t){if(n.props.setChoice(e,t),n.props.questionTimered)if(n.props.quiz.questions.length>t+1){var a=t+1;n.setQuestionIndex(a)}else n.onSubmit();else if(!n.props.quiz.showAllQuestion)if(n.props.quiz.questions.length>t+1){var r=t+1;n.setQuestionIndex(r)}else n.onSubmit()},n.onSubmit=function(){n.questionTimerRef.current&&n.questionTimerRef.current.stopTimer(),n.props.submit()},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.updateTimer()}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.quiz,o=null!==(e=n.questions)&&void 0!==e?e:[],l=0==n.showAllQuestion?n.showAllQuestion:this.state.showAllQuestion;return i.a.createElement("div",null,i.a.createElement("h1",null,i.a.createElement("i",{className:"fas fa-feather-alt"}),"\xa0",n.title),i.a.createElement("div",{className:"alert alert-info"},i.a.createElement(Ft,{label:"Started at"},n.startedDate?new Date(n.startedDate).toLocaleString():"-"),i.a.createElement(Ft,{show:!this.props.result,label:"Duration"},i.a.createElement("p",null,At(n.duration))),i.a.createElement(Ft,{label:"Show All Question"},n.showAllQuestion?i.a.createElement($t,{onClick:this.toggleQuestionView,active:this.state.showAllQuestion}):"No")),l?o.map((function(e,a){return i.a.createElement(dn,{setChoice:t.setChoice,index:a,question:e,key:"pqqs-"+a})})):i.a.createElement(r.Fragment,null,a.questionTimered?i.a.createElement(ln,{display:"progress",onTimeout:this.nextQuestion,ref:this.questionTimerRef,duration:this.getCurrentQuestion().duration}):null,i.a.createElement(un,{enabled:0==n.questionsTimered,updateQuestionIndex:this.updateQuestionIndex,questionCount:a.quiz.questions.length,index:this.state.questionIndex}),i.a.createElement(dn,{setChoice:this.setChoice,index:this.state.questionIndex,question:this.getCurrentQuestion()}),i.a.createElement(un,{enabled:0==n.questionsTimered,updateQuestionIndex:this.updateQuestionIndex,questionCount:a.quiz.questions.length,index:this.state.questionIndex})),i.a.createElement(lt,{title:"Option"},i.a.createElement(it,{onClick:this.onSubmit,className:"btn btn-primary"},"Submit")))}}]),a}(r.Component),un=function(e){var t=e.enabled;return i.a.createElement("div",null,i.a.createElement("p",null),i.a.createElement("div",{className:"row container-fluid"},i.a.createElement("div",{className:"col-5 text-center"},i.a.createElement(Ve,{className:"btn btn-secondary",children:"Previous",onClick:function(t){return e.updateQuestionIndex(e.index-1)},show:t&&e.index>0,iconClassName:"fas fa-angle-left"})),i.a.createElement("div",{className:"col-2 text-center"},i.a.createElement("p",null,"Question: ",e.index+1," of ",e.questionCount)),i.a.createElement("div",{className:"col-5 text-center"},i.a.createElement(Ve,{className:"btn btn-secondary",children:"Next",onClick:function(t){return e.updateQuestionIndex(e.index+1)},show:t&&e.index<e.questionCount-1,iconClassName:"fas fa-angle-right"}))),i.a.createElement("p",null))},dn=function(e){var t,a=e.question,n=null!==(t=a.choices)&&void 0!==t?t:[];return i.a.createElement(ma,{className:"bg-light",attributes:{style:{marginBottom:"5px"}}},i.a.createElement("div",{className:"row"},i.a.createElement("h2",{className:"col-1 text-dark"},e.index+1),i.a.createElement("div",{className:"col-11"},i.a.createElement("h4",{className:"text-dark"},a.statement),a.image?i.a.createElement("img",{height:"150",src:ye()+a.image}):null,i.a.createElement("hr",null),a.essay?i.a.createElement("textarea",{value:a.answerEssay,onChange:function(t){e.setChoice(t.target.value,e.index)},className:"form-control"}):null,n.map((function(t,n){return i.a.createElement(mn,{correctChoice:a.correctChoice,answered:t.answerCode==a.answerCode,setChoice:function(t){return e.setChoice(t,e.index)},key:"pqci-"+n+"-of-"+e.index,choice:t,index:n})})))))},mn=function(e){var t=e.choice,a=e.answered?"btn btn-secondary":"btn btn-outline-secondary";return void 0!=e.correctChoice&&(t.answerCode==e.correctChoice?a=e.answered?"btn btn-primary":"btn btn-success":e.answered&&(a="btn btn-danger")),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-1 text-left"},i.a.createElement("a",{onClick:function(a){e.setChoice(t.answerCode)},className:a}," ",i.a.createElement("strong",null,t.answerCode))),i.a.createElement("div",{className:"col-11 "},i.a.createElement("p",null,t.statement),t.image?i.a.createElement("img",{height:"150",src:ye()+t.image}):null))},pn=function e(){Object(m.a)(this,e),this.tick=0},fn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=new pn,n.timeout=void 0,n.updateTick=function(){n.resetTimeout();var e=n.props.duration,t=n.state.tick;t>=e?n.setState({tick:0},n.props.onTimeout):(t++,n.setState({tick:t},n.updateTimerLoop))},n.resetTick=function(){n.setState({tick:0},n.updateTimerLoop)},n.resetTimeout=function(){n.timeout&&clearTimeout(n.timeout)},n.updateTimerLoop=function(){n.timeout=setTimeout(n.updateTick,1e3)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props;return i.a.createElement(hn,{latestUpdate:this.props.latestUpdate,duration:e.duration,tick:this.state.tick})}}]),a}(r.Component),hn=function(e){var t,a=e.duration-e.tick,n=a%2==0?"fas fa-hourglass-end":"fas fa-hourglass-start";return t=a<=15?"bg-danger text-warning":"bg-warning ",i.a.createElement("div",{className:t,style:{fontSize:"1.7em",right:"10px",padding:"10px",position:"fixed",zIndex:1e3}},i.a.createElement("span",{style:{marginRight:"10px"}},i.a.createElement("i",{className:n})),i.a.createElement("span",null,i.a.createElement("b",null,At(a))),e.latestUpdate?i.a.createElement("p",{style:{fontSize:"0.5em"}},"Last Update: ",e.latestUpdate.toLocaleString()):null)},vn=function(e){return i.a.createElement(Zt,{style:{marginTop:"20px"}},i.a.createElement("h3",null,"Error While Submitting Answer"),i.a.createElement(Ve,{onClick:e.retrySubmit,iconClassName:"fas fa-redo"},"Retry"))},gn=function(e){return i.a.createElement("div",{style:{marginTop:"20px"},className:"container-fluid"},i.a.createElement(Zt,null,i.a.createElement("i",{style:{marginRight:"5px"},className:"fas fa-exclamation-circle"})," Timeout"))},bn=function(e){var t=e.quiz;return i.a.createElement("div",{style:{marginTop:"20px",paddingTop:"20px"},className:"text-center container-fluid"},i.a.createElement("img",{height:"250",src:t.image?ye()+t.image:"/logo192.png",className:"rounded-circle"}),i.a.createElement("h3",null,i.a.createElement("strong",null,t.title)),i.a.createElement("p",null,"Duration: ",At(t.duration)),i.a.createElement("p",null,"Question: ",t.getQuestionCount()),i.a.createElement("p",null),i.a.createElement(Ve,{className:"btn btn-dark",onClick:e.start,iconClassName:"fas fa-play"},"Start"))},En=function(e){var t=e.quizResult;return i.a.createElement(lt,{title:"Result"},1==t.displayScore?i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",{className:"text-center"},"Your Score ",i.a.createElement("strong",{className:"text-primary"},t.score.toFixed(2))),i.a.createElement("h4",{className:"text-center text-success"},"Correct Answer ",t.correctAnswer),i.a.createElement("h4",{className:"text-center text-danger"},"Wrong Answer ",t.wrongAnswer)):i.a.createElement("h2",{className:"text-center text-primary"},"Your Response Has Been Submitted"),i.a.createElement("div",{className:"text-center"},e.quiz.repeatable?i.a.createElement(it,{onClick:function(){window.location.reload()},iconClassName:"fas fa-redo"},"Reload | Try Again"):i.a.createElement("h4",null,"Thanks for Participating")),i.a.createElement("hr",null),i.a.createElement("p",null,t.message))},yn=function e(){Object(m.a)(this,e),this.quiz=void 0,this.loading=!1,this.quizResult=void 0,this.timeout=!1,this.running=!1,this.errorSubmit=!1,this.latestUpdate=void 0},Cn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r,o;return Object(m.a)(this,a),(o=t.call(this,e,!0)).quizTemp=void 0,o.publicQuizService=void 0,o.state=new yn,o.timerRef=i.a.createRef(),o.quizBodyRef=i.a.createRef(),o.startLoading=function(e){Object(at.a)((n=Object(c.a)(o),Object(nt.a)(a.prototype)),"startLoading",n).call(n,e),o.setState({loading:!0})},o.endLoading=function(){Object(at.a)((r=Object(c.a)(o),Object(nt.a)(a.prototype)),"endLoading",r).call(r),o.setState({loading:!1})},o.setWsUpdateHandlerOnQuestionChange=function(){o.setWsUpdateHandler((function(e){"QUIZ_ANSWER_UPDATE"==e.type&&e.date&&o.setState({latestUpdate:new Date(e.date)})}))},o.start=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=o.state.quiz;t&&(e&&(t.startedDate=new Date),o.setState({running:!0,quiz:t},(function(){o.beginTimer(),o.sendStartUpdate()})))},o.beginTimer=function(){x((function(){o.timerRef.current?o.timerRef.current.updateTimerLoop():console.debug("TIME NOT READY")}),500)},o.setFailedTimeout=function(){o.doSubmitAnswer(),o.setState({quiz:void 0,timeout:!0})},o.dataLoaded=function(e){var t=e.quizHistory;if(t&&e.quiz){var a=e.quiz,n=o.synchronizeLatestHistory(a,t);n&&o.setState({quiz:n,quizResult:void 0},(function(){var e;o.start(!1),o.updateQuestionIndex(null!==(e=n.maxQuestionNumber)&&void 0!==e?e:1)}))}else o.setState({quiz:Object.assign(new R,e.quiz),quizResult:void 0})},o.synchronizeLatestHistory=function(e,t){var a,n;e.duration=null!==(a=t.remainingDuration)&&void 0!==a?a:e.duration,e.startedDate=t.started;var r=null!==(n=t.maxQuestionNumber)&&void 0!==n?n:1;if(t.updated&&e.questionsTimered){var i=r-1,l=Math.ceil(((new Date).getTime()-new Date(t.updated).getTime())/1e3),s=e.questions[i].duration,c=s-l;if(console.debug("actual duration: ",s,"-  ",l," = ",c),c>0)e.questions[i].duration=c,console.debug("SET question number ",r," remaining second: ",c);else{if(r>=e.questions.length)return void o.setFailedTimeout();r++}}return e.maxQuestionNumber=r,Object.assign(new R,e)},o.updateQuestionIndex=function(e){var t=o.state.quiz;if(t&&!(t.questions.length<e))var a=setTimeout((function(){o.quizBodyRef.current?o.quizBodyRef.current.updateQuestionIndex(e-1):console.debug("Question Index Not Updated"),clearTimeout(a)}),500)},o.loadQuiz=function(){o.commonAjaxWithProgress(o.publicQuizService.getQuiz,o.dataLoaded,o.showCommonErrorAlert,o.props.match.params.id)},o.goBack=function(e){o.showConfirmation("Leave Page?").then((function(e){e&&o.props.history.push("/quiz")}))},o.setChoice=function(e,t){var a=o.state.quiz;if(a&&!o.state.quizResult&&a&&0!=a.questions.length)try{a.questions[t].essay?a.questions[t].answerEssay=e:a.questions[t].answerCode=e,a.questions[t].entered=!0,o.setState({quiz:R.clone(a)},(function(){return o.sendUpdateQuizHistory(Object.assign(new R,a))}))}catch(n){}},o.sendUpdateQuizHistory=function(e){o.publicQuizService.sendUpdateAnswer(e,o.props.requestId)},o.sendStartUpdate=function(){o.state.quiz&&o.publicQuizService.sendUpdateStart(o.state.quiz,o.props.requestId)},o.quizSubmitted=function(e){var t;o.setState({errorSubmit:!1,timeout:!1,quizResult:e.quizResult,quiz:Object.assign(new R,null===(t=e.quizResult)||void 0===t?void 0:t.submittedQuiz)})},o.resetQuiz=function(){var e=o.state.quiz;e&&(e.resetCorrectChoices(),o.setState({quizResult:void 0,tick:0,quiz:Object.assign(new R,e),running:!1}))},o.submitAnwser=function(){var e=o.state.quiz;e&&!o.state.quizResult&&(e.questionsTimered?o.doSubmitAnswer():Object.assign(new R,e).allQuestionHasBeenAnswered()?o.showConfirmation("Submit answers?").then((function(e){e&&o.doSubmitAnswer()})):o.showConfirmationDanger("Answers are not complete. Continue to submit answers?").then((function(e){e&&o.doSubmitAnswer()})))},o.doSubmitAnswer=function(){var e=o.state.quiz;e&&(e.submittedDate=new Date,o.commonAjaxWithProgress(o.publicQuizService.submitAnswers,o.quizSubmitted,(function(){return o.quizNotSubmitted(Object.assign(new R,e))}),e),o.setState({quiz:void 0}))},o.quizNotSubmitted=function(e){o.quizTemp=e,o.showCommonErrorAlert("Error submitting quiz"),o.setState({errorSubmit:!0})},o.retrySubmit=function(){0!=o.state.errorSubmit&&(o.setState({quiz:o.quizTemp},o.doSubmitAnswer),o.quizTemp=void 0)},o.publicQuizService=o.getServices().publicQuizService,o}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Quiz Challenge",this.loadQuiz(),this.setWsUpdateHandlerOnQuestionChange()}},{key:"componentWillUnmount",value:function(){this.setWsUpdateHandler(void 0)}},{key:"render",value:function(){var e;if(this.state.errorSubmit)return i.a.createElement(vn,{retrySubmit:this.retrySubmit});var t={marginTop:"30px"},a=Object.assign(new R,this.state.quiz);if(!this.state.loading&&0==a.getQuestionCount())return i.a.createElement(Zt,{style:t,children:"Quiz in currently unavailable"});if(this.state.timeout)return i.a.createElement(gn,null);if(this.state.loading)return i.a.createElement("div",{style:t,className:"container-fluid"},i.a.createElement(We,null));if(a&&!this.state.running)return i.a.createElement(bn,{quiz:a,start:this.start});a.showAllQuestion=a.showAllQuestion||void 0!=this.state.quizResult;var n=1==(null===a||void 0===a?void 0:a.questionsTimered)&&void 0==this.state.quizResult;return i.a.createElement("div",{style:t,className:"section-body container-fluid"},!this.state.quizResult&&a&&0==a.questionsTimered?i.a.createElement(fn,{latestUpdate:this.state.latestUpdate,ref:this.timerRef,onTimeout:this.setFailedTimeout,duration:null!==(e=a.duration)&&void 0!==e?e:0}):null,i.a.createElement(it,{className:"btn btn-outline-dark btn-sm",onClick:this.goBack,iconClassName:"fas fa-angle-left"},"Back"),i.a.createElement("p",null),this.state.quizResult?i.a.createElement(En,{quiz:a,quizResult:this.state.quizResult}):null,a?i.a.createElement(cn,{result:this.state.quizResult,ref:this.quizBodyRef,questionTimered:n,onTimeout:this.setFailedTimeout,submit:this.submitAnwser,setChoice:this.setChoice,quiz:a}):i.a.createElement(Zt,null,"No Data"))}}]),a}(Me),Nn=Object(p.f)(Object(je.b)(ke)(Cn)),wn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e,"Gallery")}return Object(s.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Gallery"),i.a.createElement("div",{className:"alert alert-info"},"Welcome to gallery page"))}}]),a}($e),Sn=Object(p.f)(Object(je.b)(ke)(wn)),On=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).title=void 0,e.description=void 0,e.category=void 0,e.images=void 0,e}return Object(s.a)(a,[{key:"imageCount",value:function(){return this.images?this.images.split("~").length:0}},{key:"getFirstImage",value:function(){try{return new String(this.images).split("~")[0]}catch(e){return"default.bmp"}}},{key:"getFullUrls",value:function(){var e=new Array;if(!this.images)return["default.bmp"];for(var t=this.images.split("~"),a=0;a<t.length;a++){var n=t[a];e.push(ye()+n)}return e}}]),a}(b),jn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.image;return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Gallery"),i.a.createElement(it,{onClick:this.props.back,iconClassName:"fas fa-angle-left",children:"Back"}),i.a.createElement("p",null),i.a.createElement(Da,{imageUrls:e.getFullUrls()}),i.a.createElement("h4",null,e.title),i.a.createElement("div",{className:"alert alert-success"},i.a.createElement("h5",null,"Description"),e.description))}}]),a}(r.Component),kn=function e(){Object(m.a)(this,e),this.imageList=new Array,this.loading=!1,this.filter=new st,this.totalData=0,this.selectedImage=void 0},Dn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new kn,n.galleryService=void 0,n.startLoading=function(){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.dataLoaded=function(e){var t;n.setState({imageList:null!==(t=e.entities)&&void 0!==t?t:[],totalData:e.totalData})},n.loadPictures=function(){n.state.loading||n.commonAjax(n.galleryService.getPictures,n.dataLoaded,n.showCommonErrorAlert,n.state.filter)},n.loadPicturesAtPage=function(e){var t=n.state.filter;t.page=e,n.setState({filter:t}),n.loadPictures()},n.onImageClick=function(e){n.setState({selectedImage:e})},n.removeSelectedImage=function(){n.setState({selectedImage:void 0})},n.galleryService=n.getServices().galleryService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Picture Gallery",this.loadPictures()}},{key:"render",value:function(){var e,t,a=this.state.filter,n=this.state.selectedImage;return n?i.a.createElement(jn,{image:n,back:this.removeSelectedImage}):i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Pictures"),i.a.createElement("div",{className:"alert alert-info"},"Welcome to gallery picture"),i.a.createElement(dt,{activePage:null!==(e=a.page)&&void 0!==e?e:0,limit:null!==(t=a.limit)&&void 0!==t?t:5,totalData:this.state.totalData,onClick:this.loadPicturesAtPage}),this.state.loading?i.a.createElement(We,null):i.a.createElement(In,{onClick:this.onImageClick,images:this.state.imageList}))}}]),a}(Me),In=function(e){var t=e.images;return i.a.createElement("div",{className:"row"},t.map((function(t,a){return i.a.createElement(Ln,{key:"img-item-"+a,onClick:e.onClick,image:t})})))},Ln=function(e){var t=Object.assign(new On,e.image),a=t.getFirstImage();return i.a.createElement("div",{style:{marginBottom:"5px"},className:"col-md-3"},i.a.createElement("div",{className:"card"},i.a.createElement("img",{onClick:function(a){return e.onClick(t)},src:ye()+a,className:"card-img-top"}),i.a.createElement("div",{style:{position:"absolute",right:5,bottom:5}},i.a.createElement("a",{className:"btn btn-outline-dark btn-sm",onClick:function(a){return e.onClick(t)}},i.a.createElement("i",{className:"fas fa-angle-double-right"}))),i.a.createElement("div",{className:"card-body"},i.a.createElement("h5",{className:"card-title"},t.title))))},qn=Object(p.f)(Object(je.b)(ke)(Dn)),Pn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).user=void 0,e.started=void 0,e.ended=void 0,e.quizDuration=void 0,e.userDuration=void 0,e.quiz=void 0,e.quizRepeatable=void 0,e.score=void 0,e.created=void 0,e.updated=void 0,e.remainingDuration=void 0,e.maxQuestionNumber=void 0,e.requestId=void 0,e.token=void 0,e}return a}(b),An=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e,t;return 0==this.props.show?null:i.a.createElement("div",{style:this.props.style,className:"alert alert-warning "+(null!==(e=this.props.className)&&void 0!==e?e:"")},null!==(t=this.props.children)&&void 0!==t?t:"Error Occured")}}]),a}(r.Component),Tn=function e(){Object(m.a)(this,e),this.histories=new Array,this.loading=!1,this.filter=new st,this.totalData=0},zn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).publicQuizService=void 0,n.state=new Tn,n.startLoading=function(){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.dataLoaded=function(e){var t;n.setState({histories:null!==(t=e.entities)&&void 0!==t?t:[],totalData:e.totalData})},n.loadRecords=function(){n.state.loading||n.commonAjax(n.publicQuizService.getHistories,n.dataLoaded,n.showCommonErrorAlert,n.state.filter)},n.loadRecordsAtPage=function(e){var t=n.state.filter;t.page=e,n.setState({filter:t}),n.loadRecords()},n.publicQuizService=n.getServices().publicQuizService,document.title="Quiz History",n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Object(at.a)(Object(nt.a)(a.prototype),"componentDidMount",this).call(this),this.loadRecords()}},{key:"render",value:function(){var e,t,a,n,r,o=this.getLoggedUser();if(!o)return null;var l=this.state.filter,s=(null!==(e=l.limit)&&void 0!==e?e:0)*(null!==(t=l.page)&&void 0!==t?t:0);return i.a.createElement("div",{className:" section-body container-fluid"},i.a.createElement("h2",null,"Quiz History"),i.a.createElement("div",{className:"alert alert-info"},"Welcome, ",i.a.createElement("strong",null,o.displayName,"  "),i.a.createElement("p",null),i.a.createElement("p",{className:"badge badge-dark"},null===(a=o.role)||void 0===a?void 0:a.toLowerCase().split("_")[1])),i.a.createElement(dt,{activePage:null!==(n=l.page)&&void 0!==n?n:0,limit:null!==(r=l.limit)&&void 0!==r?r:5,totalData:this.state.totalData,onClick:this.loadRecordsAtPage}),this.state.loading?i.a.createElement(ma,null,i.a.createElement(We,null)):i.a.createElement(Rn,{loadRecords:this.loadRecords,startingNumber:s,histories:this.state.histories}),i.a.createElement("p",null))}}]),a}(Me),Rn=function(e){return 0==e.histories.length?i.a.createElement(ma,null,i.a.createElement(An,null,"No Data"),i.a.createElement(Ve,{iconClassName:"fas fa-sync-alt",className:"btn btn-dark",onClick:e.loadRecords},"Reload")):i.a.createElement(ma,null,i.a.createElement(xa,null,i.a.createElement("table",{className:"table table-striped"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No"),i.a.createElement("th",null,"Quiz"),i.a.createElement("th",null,"Quiz Duration"),i.a.createElement("th",null,"Start"),i.a.createElement("th",null,"End"),i.a.createElement("th",null,"User Duration"),i.a.createElement("th",null,"Score"),i.a.createElement("th",null,"Action"))),i.a.createElement("tbody",null,e.histories.map((function(t,a){var n,r,o;return t=Object.assign(new Pn,t),i.a.createElement("tr",{key:"quiz-public-list-"+a},i.a.createElement("td",null,a+e.startingNumber+1),i.a.createElement("td",null,null===(n=t.quiz)||void 0===n?void 0:n.title),i.a.createElement("td",null,t.quizDuration),i.a.createElement("td",null,t.started?new Date(t.started).toLocaleString():"-"),i.a.createElement("td",null,t.ended?new Date(t.ended).toLocaleString():"-","  "),i.a.createElement("td",null,t.userDuration," "),i.a.createElement("td",null,t.score&&t.score.toFixed?t.score.toFixed(2):"-"," "),i.a.createElement("td",null,(null===(r=t.quiz)||void 0===r?void 0:r.repeatable)?i.a.createElement(Ve,{className:"btn btn-sm",attributes:{target:"_blank"},to:"/quiz/challenge/"+(null===(o=t.quiz)||void 0===o?void 0:o.id),iconClassName:"fas fa-redo"}):"Not Repeatable",i.a.createElement(Ve,{className:"btn btn-sm",attributes:{target:"_blank"},to:"/quiz/history/"+t.id,iconClassName:"fas fa-list"})))}))))),i.a.createElement("p",null),i.a.createElement(Ve,{iconClassName:"fas fa-sync-alt",className:"btn btn-dark",onClick:e.loadRecords},"Reload"))},xn=Object(p.f)(Object(je.b)(ke)(zn)),Fn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).title=void 0,e.url=void 0,e.description=void 0,e.category=void 0,e.videoSnippet=void 0,e}return a}(b),Mn=function e(){Object(m.a)(this,e),this.videoList=new Array,this.loading=!1,this.filter=new st,this.totalData=0},_n=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r,i;return Object(m.a)(this,a),(i=t.call(this,e,!1)).state=new Mn,i.galleryService=void 0,i.startLoading=function(e){i.setState({loading:!0}),Object(at.a)((n=Object(c.a)(i),Object(nt.a)(a.prototype)),"startLoading",n).call(n,e)},i.endLoading=function(){i.setState({loading:!1}),Object(at.a)((r=Object(c.a)(i),Object(nt.a)(a.prototype)),"endLoading",r).call(r)},i.dataLoaded=function(e){var t;i.setState({videoList:null!==(t=e.entities)&&void 0!==t?t:[],totalData:e.totalData})},i.loadRecords=function(){i.state.loading||i.commonAjaxWithProgress(i.galleryService.getVideos,i.dataLoaded,i.showCommonErrorAlert,i.state.filter)},i.loadRecordsAtPage=function(e){var t=i.state.filter;t.page=e,i.setState({filter:t}),i.loadRecords()},i.onImageClick=function(e){i.setState({selectedImage:e})},i.removeSelectedImage=function(){i.setState({selectedImage:void 0})},i.galleryService=i.getServices().galleryService,i}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Video Gallery",this.loadRecords()}},{key:"render",value:function(){var e,t,a=this.state.filter;return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Videos"),i.a.createElement("div",{className:"alert alert-info"},"Welcome to gallery videos"),i.a.createElement(dt,{activePage:null!==(e=a.page)&&void 0!==e?e:0,limit:null!==(t=a.limit)&&void 0!==t?t:5,totalData:this.state.totalData,onClick:this.loadRecordsAtPage}),this.state.loading?i.a.createElement(We,null):i.a.createElement(Un,{onClick:this.onImageClick,video:this.state.videoList}))}}]),a}(Me),Un=function(e){var t=e.video;return i.a.createElement("div",{className:"row"},t.map((function(e,t){return i.a.createElement(Qn,{video:e,key:"ii-"+t})})))},Qn=function(e){var t,a,n=Object.assign(new Fn,e.video),r=n.videoSnippet,o=i.a.createElement("a",{className:"btn btn-outline-dark btn-sm",target:"_blank",href:n.url},i.a.createElement("i",{className:"fa fa-play"}),"\xa0 Link");return r?i.a.createElement("div",{className:"col-md-4",style:{marginBottom:"10px"}},i.a.createElement("div",{className:"card"},i.a.createElement("img",{src:null===(t=r.thumbnails)||void 0===t||null===(a=t.medium)||void 0===a?void 0:a.url,className:"card-img-top"}),i.a.createElement("div",{className:"card-body"},i.a.createElement("p",{className:"card-title"},r.title)),i.a.createElement("div",{className:"card-footer"},o))):i.a.createElement("div",{className:"col-md-4"},i.a.createElement(ma,null,i.a.createElement(An,null,"No Preview"),o))},Bn=Object(p.f)(Object(je.b)(ke)(_n)),Yn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).title=void 0,e.accessCode=void 0,e.description=void 0,e.category=void 0,e.fileName=void 0,e.getExtension=function(){if(!e.fileName)return"file";var t=e.fileName.split(".");return t.length<=1?"file":t[t.length-1]},e}return a}(b),Hn=function e(){Object(m.a)(this,e),this.showLink=!1,this.fileName=void 0},Wn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).galleryService=void 0,n.state=new Hn,n.showAccessCodeInput=function(e){var t=prompt("Enter access code for "+n.props.document.title);null!=t&&n.validateAccessCode(t)},n.validateAccessCode=function(e){n.commonAjax(n.galleryService.validateDocumentAccessCode,n.accessCodeValidated,n.showCommonErrorAlert,e,n.props.document.id)},n.accessCodeValidated=function(e){n.setState({fileName:e.message,showLink:!0})},n.render=function(){var e=Object.assign(new Yn,n.props.document);return e.fileName=n.state.fileName,i.a.createElement("div",{className:"col-md-3 text-center"},i.a.createElement(ma,null,i.a.createElement("h5",null,e.title),i.a.createElement("p",null,e.description),i.a.createElement("hr",null),n.state.showLink?i.a.createElement(r.Fragment,null,i.a.createElement(Vn,{doc:e}),i.a.createElement("a",{className:"btn btn-outline-dark btn-sm",target:"_blank",href:Ce()+e.fileName},i.a.createElement("i",{className:"fa fa-link"}),"\xa0Link (",e.getExtension(),")")):i.a.createElement(it,{onClick:n.showAccessCodeInput,className:"btn btn-dark btn-sm",children:"Unlock",iconClassName:"fas fa-key"})),i.a.createElement("p",null))},n.galleryService=n.getServices().galleryService,n.state.fileName=n.props.document.fileName,n.state.showLink="PROTECTED"!=n.props.document.accessCode,n}return a}(Me),Vn=function(e){var t=e.doc;return"mp3"==t.getExtension().toLowerCase()?i.a.createElement("video",{controls:!0,height:30,style:{width:"100%"},src:Ce()+t.fileName}):null},Xn=Object(p.f)(Object(je.b)(ke)(Wn)),Gn=function e(){Object(m.a)(this,e),this.documentList=new Array,this.loading=!1,this.filter=new st,this.totalData=0},Kn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new Gn,n.galleryService=void 0,n.startLoading=function(){n.setState({loading:!0})},n.endLoading=function(){n.setState({loading:!1})},n.dataLoaded=function(e){var t;n.setState({documentList:null!==(t=e.entities)&&void 0!==t?t:[],totalData:e.totalData})},n.loadRecords=function(){n.state.loading||n.commonAjax(n.galleryService.getDocuments,n.dataLoaded,n.showCommonErrorAlert,n.state.filter)},n.loadRecordsAtPage=function(e){var t=n.state.filter;t.page=e,n.setState({filter:t}),n.loadRecords()},n.removeSelectedImage=function(){n.setState({selectedImage:void 0})},n.galleryService=n.getServices().galleryService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="Document Gallery",this.loadRecords()}},{key:"render",value:function(){var e,t,a=this.state.filter;return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Documents"),i.a.createElement("div",{className:"alert alert-info"}," Welcome to gallery documents"),i.a.createElement(dt,{activePage:null!==(e=a.page)&&void 0!==e?e:0,limit:null!==(t=a.limit)&&void 0!==t?t:5,totalData:this.state.totalData,onClick:this.loadRecordsAtPage}),this.state.loading?i.a.createElement(We,null):i.a.createElement(Jn,{documents:this.state.documentList}))}}]),a}(Me),Jn=function(e){var t=e.documents;return i.a.createElement("div",{className:"row"},t.map((function(e,t){return i.a.createElement(Xn,{document:e,key:"ii-"+t})})))},Zn=Object(p.f)(Object(je.b)(ke)(Kn)),$n=function e(){Object(m.a)(this,e),this.loading=!1,this.displayName="",this.username="",this.editPassword="",this.editPasswordRepeat=""},er=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state=new $n,n.userService=void 0,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.saveUser=function(){var e=new Ne;e.editPassword=n.state.editPassword.trim(),e.username=n.state.username.trim(),e.displayName=n.state.displayName.trim(),n.commonAjax(n.userService.saveUser,n.userSaved,n.showCommonErrorAlert,e)},n.userSaved=function(e){n.showConfirmation("Success").then((function(e){n.backToLogin()}))},n.passwordMatch=function(){return""!=n.state.editPassword.trim()&&n.state.editPassword.trim()==n.state.editPasswordRepeat.trim()},n.fieldComplete=function(){return""!=n.state.displayName.trim()&&""!=n.state.username.trim()&&""!=n.state.editPassword.trim()&&""!=n.state.editPasswordRepeat.trim()},n.userService=n.getServices().userService,n}return Object(s.a)(a,[{key:"register",value:function(e){if(e.preventDefault(),this.fieldComplete()){if(0==this.passwordMatch())return void this.showCommonErrorAlert("Password mismatch");this.saveUser()}else this.showCommonErrorAlert("Field is not complete")}},{key:"componentDidMount",value:function(){document.title="Register",this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"componentDidUpdate",value:function(){this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"RegisterForm",className:"Register-wrapper",style:{margin:0,padding:0}},i.a.createElement("div",{className:"text-center",style:{marginTop:"25px"}},i.a.createElement("h1",null,"Register")),i.a.createElement("form",{name:"Register",onSubmit:function(t){e.register(t)},method:"POST",className:"form-signin text-center"},i.a.createElement(ar,{name:"username",value:this.state.username,onChange:this.handleInputChange}),i.a.createElement(ar,{name:"displayName",value:this.state.displayName,onChange:this.handleInputChange}),i.a.createElement(tr,{name:"editPassword",value:this.state.editPassword,onChange:this.handleInputChange}),i.a.createElement(tr,{name:"editPasswordRepeat",value:this.state.editPasswordRepeat,onChange:this.handleInputChange}),this.state.loading?i.a.createElement(We,null):i.a.createElement("button",{className:"btn text-light",style:{backgroundColor:"rgb(9,26,78)"},type:"submit"},"Register"),i.a.createElement("p",null)))}}]),a}(Me),tr=function(e){var t=e.name,a=e.value,n=e.onChange;return i.a.createElement(r.Fragment,null,i.a.createElement("label",{className:"sr-only"},"Password"),i.a.createElement("input",{style:{borderColor:"rgb(9,26,78)"},name:t,value:a,onChange:n,type:"password",id:"inputPassword",className:"form-control",placeholder:t,required:!0}),i.a.createElement("p",null))},ar=function(e){var t=e.name,a=e.value,n=e.onChange;return i.a.createElement(r.Fragment,null,i.a.createElement("label",{className:"sr-only"},"Username"),i.a.createElement("input",{style:{borderColor:"rgb(9,26,78)"},name:t,value:a,onChange:n,type:"text",id:"username",className:"form-control",placeholder:t,required:!0,autoFocus:!0}),i.a.createElement("p",null))},nr=Object(p.f)(Object(je.b)(ke,(function(e){return{}}))(er)),rr=function e(){Object(m.a)(this,e),this.attachment=void 0},ir=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).quizService=void 0,n.state=new rr,n.submit=function(e){e.preventDefault(),n.showConfirmation("Upload?").then((function(e){e&&n.upload()}))},n.uploadSuccess=function(e){n.showInfo("Success"),e.quiz?n.props.history.push("/quizmanagement/detail/"+e.quiz.id):n.setState({attachment:null})},n.upload=function(){n.state.attachment&&n.commonAjaxWithProgress(n.quizService.uploadQuiz,n.uploadSuccess,n.showCommonErrorAlert,n.state.attachment)},n.setAttachmentInfo=function(e){var t=e.target;ze(t).then((function(e){if(e.url="",0==e.name.endsWith(".xlsx"))return n.showCommonErrorAlert('INVALID FILE: "'+e.name+'"'),void(t.value="");n.setState({attachment:e})})).catch(n.showCommonErrorAlert)},n.quizService=n.getServices().quizService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",{className:"section-body container-fluid"},i.a.createElement("h2",null,"Quiz Upload"),i.a.createElement("form",{onSubmit:this.submit},i.a.createElement(Ft,{label:"File"},i.a.createElement("input",{type:"file",className:"form-control",onChange:this.setAttachmentInfo})),i.a.createElement(Ft,{label:"Download Template"},i.a.createElement("a",{href:"resources/assets/quiz_template.xlsx",className:"btn btn-dark"},"Download")),i.a.createElement(Ft,null,this.state.attachment?i.a.createElement("input",{type:"submit",className:"btn btn-primary"}):null)))}}]),a}(Me),or=Object(p.f)(Object(je.b)(ke)(ir)),lr=function e(){Object(m.a)(this,e),this.error=!1,this.quizHistory=void 0},sr=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!0)).state=new lr,n.quizService=void 0,n.recordLoaded=function(e){e.quizHistory&&e.quizHistory.quiz&&(e.quizHistory.quiz=R.clone(e.quizHistory.quiz),n.setState({error:!1,quizHistory:e.quizHistory}))},n.recordNotLoaded=function(e){n.setState({error:!0})},n.loadHistoryDetail=function(){n.commonAjax(n.quizService.getHistoryDetail,n.recordLoaded,n.recordNotLoaded,n.getHistoryId())},n.getHistoryId=function(){return n.props.match.params.id},n.quizService=n.getServices().quizService,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.loadHistoryDetail()}},{key:"render",value:function(){var e;if(this.state.error)return i.a.createElement(Zt,null,i.a.createElement("p",null),"Error Loading Record",i.a.createElement("p",null),i.a.createElement("a",{onClick:this.loadHistoryDetail},"Retry"));if(!(null===(e=this.state.quizHistory)||void 0===e?void 0:e.quiz))return i.a.createElement(Zt,null,i.a.createElement("p",null),"Loading Quiz");var t=this.state.quizHistory.quiz;return i.a.createElement("div",{className:"container-fluid section-body"},i.a.createElement("h2",null,"Quiz History Detail: ",t.title),i.a.createElement(Ve,{iconClassName:"fas fa-arrow-left",to:"/dashboard/quizhistory"},"Back"),i.a.createElement("p",null),i.a.createElement(cr,{user:this.state.quizHistory.user,quiz:t}))}}]),a}(Me),cr=function(e){var t,a=e.quiz.questions;return i.a.createElement(lt,{title:"Quiz By "+(null===(t=e.user)||void 0===t?void 0:t.displayName)},a.map((function(e,t){return i.a.createElement(ur,{question:e,key:"qst-"+t})})))},ur=function(e){var t=e.question;return i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement("strong",null,t.number)," ",t.statement),t.essay?i.a.createElement("textarea",{className:"form-control",disabled:!0,value:t.answerEssay}):i.a.createElement(dr,{question:t}))},dr=function(e){var t,a=e.question;return i.a.createElement("ul",null,null===(t=a.choices)||void 0===t?void 0:t.map((function(e,t){var n=a.answerCode==e.answerCode;return i.a.createElement("li",{style:{listStyle:"none"},key:a.number+"-"+t},i.a.createElement("span",{className:n?"border rounded border-dark font-weight-bold":""}," ",e.answerCode," ")," ",e.statement)})))},mr=Object(p.f)(Object(je.b)(ke)(sr)),pr=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).ref=i.a.createRef(),n.setSidebarMenus=function(e){n.props.setSidebarMenus(e)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(r.Fragment,null,i.a.createElement(p.c,null,i.a.createElement(p.a,{exact:!0,path:"/home",render:function(e){return console.debug("Home path"),i.a.createElement(ca,null)}}),i.a.createElement(p.a,{exact:!0,path:"/",render:function(e){return i.a.createElement(ca,null)}}),i.a.createElement(p.a,{exact:!0,path:"/about",render:function(e){return i.a.createElement(Oa,null)}}),i.a.createElement(p.a,{exact:!0,path:"/lessons",render:function(t){return console.debug("Lessons path"),i.a.createElement(Ra,{setSidebarMenus:e.setSidebarMenus})}}),i.a.createElement(p.a,{exact:!0,path:"/lessons/:categoryCode",render:function(t){return i.a.createElement(Ra,{setSidebarMenus:e.setSidebarMenus})}}),i.a.createElement(p.a,{exact:!0,path:"/management",render:function(t){return console.debug("MANAGEMENTS path"),i.a.createElement(la,{setSidebarMenus:e.setSidebarMenus})}}),i.a.createElement(p.a,{exact:!0,path:"/management/:code",render:function(t){return i.a.createElement(la,{setSidebarMenus:e.setSidebarMenus})}})),i.a.createElement(fr,null),i.a.createElement(gr,null),i.a.createElement(br,null),i.a.createElement(Er,null),i.a.createElement(vr,null),i.a.createElement(hr,null))}},{key:"componentDidMount",value:function(){}}]),a}(Me),fr=function(e){return i.a.createElement(p.c,null,i.a.createElement(p.a,{exact:!0,path:"/login",render:function(e){return i.a.createElement(Ze,null)}}),i.a.createElement(p.a,{exact:!0,path:"/register",render:function(e){return i.a.createElement(nr,null)}}))},hr=function(e){return i.a.createElement(p.c,null,i.a.createElement(p.a,{exact:!0,path:"/gallery",render:function(e){return i.a.createElement(Sn,null)}}),i.a.createElement(p.a,{exact:!0,path:"/gallery/picture",render:function(e){return i.a.createElement(qn,null)}}),i.a.createElement(p.a,{exact:!0,path:"/gallery/video",render:function(e){return i.a.createElement(Bn,null)}}),i.a.createElement(p.a,{exact:!0,path:"/gallery/document",render:function(e){return i.a.createElement(Zn,null)}}))},vr=function(e){return i.a.createElement(p.c,null,i.a.createElement(p.a,{exact:!0,path:"/dashboard",render:function(e){return console.debug("dashboard path"),i.a.createElement(tt,null)}}),i.a.createElement(p.a,{exact:!0,path:"/dashboard/quizhistory",render:function(e){return i.a.createElement(xn,null)}}))},gr=function(e){return i.a.createElement(p.c,null,i.a.createElement(p.a,{exact:!0,path:"/settings",render:function(e){return i.a.createElement(da,null)}}),i.a.createElement(p.a,{exact:!0,path:"/settings/user-profile",render:function(e){return i.a.createElement(Ea,null)}}),i.a.createElement(p.a,{exact:!0,path:"/settings/app-profile",render:function(e){return i.a.createElement(wa,null)}}))},br=function(e){return i.a.createElement(p.c,null,i.a.createElement(p.a,{exact:!0,path:"/quiz",render:function(e){return i.a.createElement(rn,null)}}),i.a.createElement(p.a,{exact:!0,path:"/quiz/challenge/:id",render:function(e){return i.a.createElement(Nn,null)}}),i.a.createElement(p.a,{exact:!0,path:"/quiz/history/:id",render:function(e){return i.a.createElement(mr,null)}}))},Er=function(e){return i.a.createElement(p.c,null,i.a.createElement(p.a,{exact:!0,path:"/quizmanagement",render:function(e){return i.a.createElement(Ba,null)}}),i.a.createElement(p.a,{exact:!0,path:"/quizmanagement/form",render:function(e){return i.a.createElement(Ja,null)}}),i.a.createElement(p.a,{exact:!0,path:"/quizmanagement/upload",render:function(e){return i.a.createElement(or,null)}}),i.a.createElement(p.a,{exact:!0,path:"/quizmanagement/detail/:id",render:function(e){return i.a.createElement(tn,null)}}))},yr=Object(p.f)(Object(je.b)(ke,(function(e){return{}}))(pr)),Cr=(a(79),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).isSidebarActive=function(e){var t=n.props.parentMenu;if(null==t)return!1;var a=n.props.location.pathname;return t.url+"/"+e.url==a},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){var t=e.srcElement.body.scrollTop;Math.min(0,t/3-60)}},{key:"render",value:function(){var e=this,t=this.props.parentMenu;if(null==t)return null;var a=null==this.props.sidebarMenus?[]:this.props.sidebarMenus,n=this.getLoggedUser();return i.a.createElement("ul",{id:"sidebar",className:"sidebar-nav bg-light"},i.a.createElement(Nr,{show:null!=t,brand:t}),a.map((function(a){if(a.userAuthorized&&!a.userAuthorized(n))return null;var r=e.isSidebarActive(a)?"menu-active":"regular-menu";return i.a.createElement("li",{className:"sidebar-item "+r,key:"SIDEBAR_"+a.code},i.a.createElement(_e.b,{to:t.url+"/"+a.url},i.a.createElement("span",{className:"sidebar-icon"},i.a.createElement("i",{className:N.getIconClassName(a)})),i.a.createElement("span",{className:"menu-label"},a.name)))})))}}]),a}(Me)),Nr=function(e){return 0==e.show?null:i.a.createElement(r.Fragment,null,i.a.createElement("li",{id:"sidebar-brand",className:"sidebar-brand",style:{marginBottom:"20px"}},i.a.createElement("div",{style:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px"}},i.a.createElement("h3",{className:"text-dark"},i.a.createElement("i",{className:N.getIconClassName(e.brand)})),i.a.createElement(_e.b,{to:e.brand.url,style:{textDecoration:"none"}},i.a.createElement("h4",{className:"text-dark"},e.brand.name)))),i.a.createElement("li",{className:"sidebar-item-brand "},i.a.createElement(_e.b,{to:e.brand.url},i.a.createElement("span",{className:"sidebar-icon"},i.a.createElement("i",{className:N.getIconClassName(e.brand)})))))},wr=Object(p.f)(Object(je.b)(ke,(function(e){return{performLogout:function(t){return e(Oe(t))}}}))(Cr)),Sr=(a(80),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e,!1)).state={showSidebar:!1,activeMenuCode:null,menu:void 0,sidebarMenus:[]},n.currentPathName="",n.setMenuNull=function(){console.warn("SET MENU NULL"),n.setState({menu:void 0,showSidebar:!1,activeMenuCode:null,sidebarMenus:null})},n.setMenu=function(e){null!=e&&(console.debug("SET MENU: ",e.code),n.setState({menu:e,sidebarMenus:null,showSidebar:e.showSidebar,activeMenuCode:e.code}))},n.setSidebarMenus=function(e){n.setState({sidebarMenus:e})},n.setCurrentMenu=function(){var e=function(e){var t=e.split("/"),a=t[0];return""==a.trim()&&(a=t[1]),a}(n.props.location.pathname);if(e!=n.currentPathName){n.currentPathName=e;var t=function(e){var t=w();try{for(var a=0;a<t.length;a++){var n=t[a];if(n.url=="/"+e)return n}return null}catch(r){return null}}(e);null==t?n.setMenuNull():n.setMenu(t)}},n.getSubMenus=function(){var e,t=n.state.menu;return t&&null!=t.subMenus&&(null===(e=t.subMenus)||void 0===e?void 0:e.length)>0?t.subMenus:n.state.sidebarMenus?n.state.sidebarMenus:null},n.state=Object(f.a)({},n.state),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setCurrentMenu()}},{key:"componentDidUpdate",value:function(){this.setCurrentMenu()}},{key:"render",value:function(){var e=1==this.state.showSidebar,t=e?"app-content":"content";return i.a.createElement(r.Fragment,null,i.a.createElement(He,{setMenuNull:this.setMenuNull,activeMenuCode:this.state.activeMenuCode,setMenu:this.setMenu}),i.a.createElement("div",{id:"content-wrapper",className:"container-fluid  "+t},i.a.createElement(yr,{setSidebarMenus:this.setSidebarMenus})),e?i.a.createElement(wr,{sidebarMenus:this.getSubMenus(),parentMenu:this.state.menu}):null)}}]),a}(Me)),Or=Object(p.f)(Object(je.b)(ke,(function(e){return{performLogout:function(t){return e(Oe(t))}}}))(Sr)),jr=function e(){Object(m.a)(this,e),this.loading=!1,this.loadingPercentage=0,this.requestId=void 0,this.mainAppUpdated=new Date,this.showAlert=!1,this.realtime=!1,this.appIdStatus="Loading App Id",this.errorAuthenticatingApp=!1},kr=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).wsConnected=!1,n.loadings=0,n.alertTitle="Info",n.alertBody=null,n.alertIsYesOnly=!0,n.alertIsError=!1,n.alertOnYesCallback=function(e){},n.alertOnCancelCallback=function(e){},n.wsUpdateHandler=void 0,n.clientRef=i.a.createRef(),n.userService=void 0,n.alertCallback={title:"Info",message:"Info",yesOnly:!1,onOk:function(){},onNo:function(){}},n.refresh=function(){n.setState({mainAppUpdated:new Date})},n.requestAppId=function(){n.setState({appIdStatus:"Authenticating application",errorAuthenticatingApp:!1}),n.userService.requestApplicationId((function(e){n.props.setRequestId(e,Object(c.a)(n)),n.refresh(),n.setState({errorAuthenticatingApp:!1})}),n.retryRequestAppId)},n.retryRequestAppId=function(){n.setState({appIdStatus:"Authenticating application (Retrying)",errorAuthenticatingApp:!1}),n.userService.requestApplicationIdNoAuth((function(e){n.props.setRequestId(e,Object(c.a)(n)),n.setState({errorAuthenticatingApp:!1})}),(function(){return n.setState({errorAuthenticatingApp:!0})}))},n.smoothEndLoading=function(){x((function(){n.setState({loading:!1,loadingPercentage:0})}),100)},n.handleProgress=function(e){var t,a=null!==(t=e.percentage)&&void 0!==t?t:0,r=Math.floor(a);(a<0||a>100)&&n.endLoading(),n.setState({loadingPercentage:r})},n.initWebsocket=function(){var e;e=Ee()+"realtime-app",_=e,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(null!=t)for(var n=0;n<t.length;n++)Q.push(t[n])}({subscribeUrl:"/wsResp/progress/"+n.props.requestId,callback:n.handleProgress},{subscribeUrl:"/wsResp/"+n.props.requestId+"/update",callback:function(e){return n.handleWsUpdate(e)}}),function e(){var t=new window.SockJS(_);(F=window.Stomp.over(t)).connect({},(function(e){M=!0,console.log("Websocket CONNECTED: ",_,"frame :",e,F.ws._transport.ws.url),console.debug("subscriptionCallbacks :",Q.length);for(var t=function(e){var t=Q[e];t&&F.subscribe(t.subscribeUrl,(function(e){var a=JSON.parse(e.body);t.callback(a)}))},a=0;a<Q.length;a++)t(a);for(var n=0;n<U.length;n++){(0,U[n])(e)}}),(function(t){console.warn("Error connection websocket, reconnect"),x(e,2e3)}))}(),n.wsConnected=!0},n.handleWsUpdate=function(e){n.wsUpdateHandler&&n.wsUpdateHandler(e)},n.setWsUpdateHandler=function(e){n.wsUpdateHandler=e},n.resetWsUpdateHandler=function(){n.setWsUpdateHandler(void 0)},n.state=new jr,n.userService=n.props.services.userService,n.props.setMainApp(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"incrementLoadings",value:function(){this.loadings++}},{key:"decrementLoadings",value:function(){this.loadings--,this.loadings<0&&(this.loadings=0)}},{key:"startLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.incrementLoadings(),this.setState({loading:!0,realtime:e})}},{key:"endLoading",value:function(){this.decrementLoadings(),0==this.loadings&&(this.state.realtime?this.setState({loadingPercentage:100},this.smoothEndLoading):this.setState({loading:!1,loadingPercentage:0}))}},{key:"showAlert",value:function(e,t,a,n,r){this.alertTitle=e,this.alertBody=t,this.alertIsYesOnly=a;var i=this;this.alertOnYesCallback=function(e){i.dismissAlert(),n(e)},a||(this.alertOnCancelCallback=function(e){i.dismissAlert(),null!=r&&r(e)}),this.setState({showAlert:!0})}},{key:"dismissAlert",value:function(){this.alertIsError=!1,this.setState({showAlert:!1})}},{key:"showAlertError",value:function(e,t,a,n,r){this.alertIsError=!0,this.showAlert(e,t,a,n,r)}},{key:"componentDidUpdate",value:function(){this.props.applicationProfile&&function(e){if(e.pageIcon){var t=document.querySelector('link[rel="shortcut icon"]')||document.querySelector('link[rel="icon"]');t||((t=document.createElement("link")).id="favicon",t.setAttribute("rel","shortcut icon"),document.head.appendChild(t)),t.setAttribute("href",ye()+e.pageIcon)}}(this.props.applicationProfile),this.props.requestId&&!this.wsConnected&&this.initWebsocket()}},{key:"componentDidMount",value:function(){this.requestAppId(),this.setState({loadingPercentage:0})}},{key:"render",value:function(){var e=this;return this.props.requestId?i.a.createElement(r.Fragment,null,i.a.createElement(Dr,{realtime:this.state.realtime,loading:this.state.loading,loadingPercentage:this.state.loadingPercentage}),this.state.showAlert?i.a.createElement(Ae,{title:this.alertTitle,isError:this.alertIsError,onClose:function(t){return e.setState({showAlert:!1})},yesOnly:this.alertIsYesOnly,onYes:this.alertOnYesCallback,onNo:this.alertOnCancelCallback},this.alertBody):null,i.a.createElement(Or,null)):i.a.createElement("div",{className:"text-center",style:{paddingTop:"10%"}},i.a.createElement("h2",null,this.state.appIdStatus),this.state.errorAuthenticatingApp?i.a.createElement(Ve,{iconClassName:"fas fa-redo",onClick:this.retryRequestAppId,children:"Retry"}):i.a.createElement(We,null))}}]),a}(r.Component);function Dr(e){return 1==e.loading?i.a.createElement(Ie,{realtime:e.realtime,progress:e.loadingPercentage,text:"Please wait...",type:"loading"}):null}var Ir=Object(p.f)(Object(je.b)(ke,(function(e){return{setMainApp:function(t){return e({type:"SET_MAIN_APP",payload:t,meta:{type:"SET_MAIN_APP"}})},setRequestId:function(t,a){return e(function(e,t){return{type:"SET_REQUEST_ID",payload:Object(f.a)({loginStatus:e.loggedIn,referer:t},e),meta:{type:"SET_REQUEST_ID"}}}(t,a))}}}))(kr)),Lr=function(e){var t=oe();return i.a.createElement(je.a,{store:t},i.a.createElement(_e.a,null,i.a.createElement(Ir,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(Lr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[44,1,2]]]);
//# sourceMappingURL=main.5a5336f4.chunk.js.map